import{g as fe,O as be,l as xe,c as r,a as e,b as k,G as A,p as c,n as o,r as n,d as g,y as $,H as z,A as ee,w as we,x as V,t as u,T as I,s as _,q as B,o as a,F as ve,v as ge}from"./Blq0K2QU.js";import{_ as he}from"./DHaYKDNW.js";import{_ as M}from"./5LwSwYqh.js";import{a as p,c as E}from"./CyqcL6d0.js";const ye={class:"p-4 md:p-6 max-w-6xl mx-auto"},ke={class:"mb-8"},_e={class:"flex items-center justify-between"},Ce={class:"mb-6 flex flex-wrap items-center gap-4"},Ae={class:"flex items-center gap-2"},Ve={class:"flex items-center gap-2"},Ie={class:"p-6"},Me={class:"overflow-x-auto"},Ee={class:"w-full"},Te={class:"py-4 pr-4"},Ne={class:"flex items-center gap-3"},je={class:"w-8 h-8 rounded-full bg-primary-500/20 flex items-center justify-center"},Se={class:"text-primary-400 font-medium text-sm"},Pe={class:"text-white font-medium"},Re={class:"py-4 pr-4 text-slate-300"},$e={class:"py-4 pr-4"},ze={key:0,class:"relative"},Be=["onUpdate:modelValue","onChange"],Le={class:"py-4 pr-4"},Fe={class:"py-4 pr-4"},Oe={key:0,class:"flex items-center gap-1.5 text-success-400"},Ue={key:1,class:"text-slate-500 text-sm"},De={class:"py-4"},He={class:"flex items-center gap-2"},We=["onClick"],Je=["onClick","title"],qe={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ge={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ke=["onClick"],Qe={key:3,class:"text-xs text-slate-500 ml-2"},Xe={key:0,class:"text-center py-12"},Ye={key:1,class:"text-center py-12"},Ze={class:"glass-card w-full max-w-md"},et={class:"p-6 border-b border-white/10"},tt={key:0,class:"text-sm text-slate-400 mt-1"},st={class:"p-6 space-y-4"},ot={class:"p-6 border-t border-white/10 flex items-center gap-4"},lt=["disabled"],at={key:0,class:"flex items-center justify-center gap-2"},rt={key:1},nt={class:"glass-card w-full max-w-sm"},it={class:"p-6 border-b border-white/10"},dt={class:"text-lg font-semibold text-white"},ct={key:0,class:"text-sm text-slate-400 mt-1"},ut={class:"p-6 border-t border-white/10 flex items-center gap-4"},pt=["disabled"],mt={key:0,class:"flex items-center justify-center gap-2"},ft={key:1},bt={class:"glass-card w-full max-w-sm"},xt={class:"p-6 border-b border-white/10"},wt={key:0,class:"text-sm text-slate-400 mt-1"},vt={class:"p-6 border-t border-white/10 flex items-center gap-4"},gt=["disabled"],ht={key:0,class:"flex items-center justify-center gap-2"},yt={key:1},kt={class:"glass-card w-full max-w-sm"},_t={class:"p-6 border-b border-white/10"},Ct={key:0,class:"text-sm text-slate-400 mt-1"},At={class:"p-6 border-t border-white/10 flex items-center gap-4"},Vt=["disabled"],It={key:0,class:"flex items-center justify-center gap-2"},Mt={key:1},Et={class:"glass-card w-full max-w-md"},Tt={class:"p-6 space-y-4"},Nt={class:"p-6 border-t border-white/10 flex items-center gap-4"},jt=["disabled"],St={key:0,class:"flex items-center justify-center gap-2"},Pt={key:1},Ot=fe({__name:"admin-list",setup(Rt){const b=be().public.apiBase,X=n([]),L=n(!0),F=n(null),O=n(""),x=n(""),w=n(""),Y=B(()=>{let l=X.value;return x.value&&(l=l.filter(t=>t.role===x.value)),w.value&&(l=l.filter(t=>t.status===w.value)),l}),U=n(!1),i=n(null),m=n({newPassword:"",confirmPassword:""}),T=n(!1),D=n(!1),h=n("disable"),N=n(!1),H=n(!1),f=n(null),j=n(!1),W=n(!1),S=n(!1),J=l=>({OWNER:"擁有者",ADMIN:"管理員",STAFF:"員工"})[l]||l,te=B(()=>f.value?J(f.value.newRole):""),se=()=>{x.value="",w.value=""},P=l=>!(l.role==="OWNER"||l.id===F.value||O.value!=="OWNER"),y=async()=>{try{const l=localStorage.getItem("admin_token"),t=await fetch(`${b}/admin/admins`,{headers:{Authorization:`Bearer ${l}`}});if(t.ok){const s=await t.json();X.value=s.datas||[]}}catch(l){console.error("取得管理員列表失敗:",l),await p("載入管理員列表失敗")}finally{L.value=!1}},oe=async()=>{try{const l=localStorage.getItem("admin_token"),t=await fetch(`${b}/admin/me/profile`,{headers:{Authorization:`Bearer ${l}`}});if(t.ok){const s=await t.json();F.value=s.datas.id,O.value=s.datas.role}}catch(l){console.error("取得目前管理員資料失敗:",l)}},le=l=>{i.value=l,m.value={newPassword:"",confirmPassword:""},U.value=!0},q=()=>{U.value=!1,i.value=null},Z=B(()=>m.value.newPassword.length>=6&&m.value.newPassword===m.value.confirmPassword),ae=async()=>{if(!(!Z.value||!i.value)){T.value=!0;try{const l=localStorage.getItem("admin_token"),t=await fetch(`${b}/admin/admins/reset-password`,{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({target_admin_id:i.value.id,new_password:m.value.newPassword})}),s=await t.json();t.ok?(await E("密碼已重設"),q()):await p(s.message||"重設密碼失敗")}catch{await p("重設密碼失敗，請稍後再試")}finally{T.value=!1}}},re=l=>{i.value=l,h.value=l.status==="ACTIVE"?"disable":"enable",D.value=!0},G=()=>{D.value=!1,i.value=null},ne=async()=>{if(i.value){N.value=!0;try{const l=localStorage.getItem("admin_token"),t=h.value==="disable"?"INACTIVE":"ACTIVE",s=await fetch(`${b}/admin/admins/toggle-status`,{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({target_admin_id:i.value.id,new_status:t})}),v=await s.json();s.ok?(await E(t==="ACTIVE"?"已啟用管理員":"已停用管理員"),G(),await y()):await p(v.message||"操作失敗")}catch{await p("操作失敗，請稍後再試")}finally{N.value=!1}}},ie=l=>{f.value={admin:l,newRole:l.role},H.value=!0},K=()=>{H.value=!1,f.value=null,y()},de=async()=>{if(f.value){j.value=!0;try{const l=localStorage.getItem("admin_token"),t=await fetch(`${b}/admin/admins/change-role`,{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({target_admin_id:f.value.admin.id,new_role:f.value.newRole})}),s=await t.json();t.ok?(await E(`已將 ${f.value.admin.name} 變更為 ${J(f.value.newRole)}`),K(),await y()):await p(s.message||"角色變更失敗")}catch{await p("角色變更失敗，請稍後再試")}finally{j.value=!1}}},ce=l=>{i.value=l,W.value=!0},Q=()=>{W.value=!1,i.value=null},ue=async()=>{if(i.value){S.value=!0;try{const l=localStorage.getItem("admin_token"),t=await fetch(`${b}/admin/me/line/unbind`,{method:"DELETE",headers:{Authorization:`Bearer ${l}`}}),s=await t.json();t.ok?(await E(`${i.value.name} 的 LINE 綁定已解除`),Q(),await y()):await p(s.message||"解除綁定失敗")}catch{await p("解除綁定失敗，請稍後再試")}finally{S.value=!1}}};xe(async()=>{await Promise.all([y(),oe()])});const C=n(!1),d=n({email:"",name:"",role:"ADMIN",password:""}),R=n(!1),pe=B(()=>O.value==="OWNER"),me=async()=>{if(!d.value.email||!d.value.name||!d.value.password){await p("請填寫完整資訊");return}if(d.value.password.length<6){await p("密碼至少需要 6 個字元");return}R.value=!0;try{const l=localStorage.getItem("admin_token"),t=await fetch(`${b}/admin/admins`,{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({email:d.value.email,name:d.value.name,role:d.value.role,password:d.value.password})}),s=await t.json();t.ok?(await E(`管理員 ${d.value.name} 已成功建立`),C.value=!1,d.value={email:"",name:"",role:"ADMIN",password:""},await y()):await p(s.message||"新增失敗")}catch{await p("新增失敗，請稍後再試")}finally{R.value=!1}};return(l,t)=>(a(),r("div",ye,[e("div",ke,[e("div",_e,[t[12]||(t[12]=e("div",null,[e("h1",{class:"text-2xl md:text-3xl font-bold text-slate-100 mb-2"}," 管理員管理 "),e("p",{class:"text-slate-400 text-sm md:text-base"}," 管理中心的管理員帳號（僅擁有者可執行） ")],-1)),o(pe)?(a(),r("button",{key:0,onClick:t[0]||(t[0]=s=>C.value=!0),class:"px-4 py-2 bg-primary-500/30 border border-primary-500 text-primary-400 rounded-xl hover:bg-primary-500/40 transition-colors flex items-center gap-2"},[...t[11]||(t[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),g(" 新增管理員 ",-1)])])):c("",!0)])]),e("div",Ce,[e("div",Ae,[t[14]||(t[14]=e("label",{class:"text-sm text-slate-400"},"角色篩選：",-1)),$(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>ee(x)?x.value=s:null),class:"px-3 py-1.5 rounded-lg text-sm bg-slate-800/80 border border-white/10 text-slate-300 focus:outline-none focus:border-primary-500 min-w-[120px]"},[...t[13]||(t[13]=[e("option",{value:""},"全部角色",-1),e("option",{value:"OWNER"},"擁有者",-1),e("option",{value:"ADMIN"},"管理員",-1),e("option",{value:"STAFF"},"員工",-1)])],512),[[z,o(x)]])]),e("div",Ve,[t[16]||(t[16]=e("label",{class:"text-sm text-slate-400"},"狀態篩選：",-1)),$(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>ee(w)?w.value=s:null),class:"px-3 py-1.5 rounded-lg text-sm bg-slate-800/80 border border-white/10 text-slate-300 focus:outline-none focus:border-primary-500 min-w-[120px]"},[...t[15]||(t[15]=[e("option",{value:""},"全部狀態",-1),e("option",{value:"ACTIVE"},"啟用",-1),e("option",{value:"INACTIVE"},"停用",-1)])],512),[[z,o(w)]])]),o(x)||o(w)?(a(),r("button",{key:0,onClick:se,class:"text-sm text-primary-400 hover:text-primary-300 transition-colors"}," 清除篩選 ")):c("",!0)]),k(he,null,{default:we(()=>[e("div",Ie,[e("div",Me,[e("table",Ee,[t[23]||(t[23]=e("thead",null,[e("tr",{class:"text-left text-slate-400 text-sm border-b border-white/10"},[e("th",{class:"pb-4 pr-4 font-medium"},"姓名"),e("th",{class:"pb-4 pr-4 font-medium"},"Email"),e("th",{class:"pb-4 pr-4 font-medium"},"角色"),e("th",{class:"pb-4 pr-4 font-medium"},"狀態"),e("th",{class:"pb-4 pr-4 font-medium"},"LINE"),e("th",{class:"pb-4 font-medium"},"操作")])],-1)),e("tbody",null,[(a(!0),r(ve,null,ge(o(Y),s=>(a(),r("tr",{key:s.id,class:"border-b border-white/5 hover:bg-white/5 transition-colors"},[e("td",Te,[e("div",Ne,[e("div",je,[e("span",Se,u(s.name.charAt(0)),1)]),e("span",Pe,u(s.name),1)])]),e("td",Re,u(s.email),1),e("td",$e,[P(s)?(a(),r("div",ze,[$(e("select",{"onUpdate:modelValue":v=>s.role=v,onChange:v=>ie(s),class:_(["px-3 py-1.5 rounded-lg text-sm bg-slate-800/80 border border-white/10 text-slate-300 focus:outline-none focus:border-primary-500 cursor-pointer",{"border-purple-500/50":s.role==="OWNER","border-blue-500/50":s.role==="ADMIN","border-green-500/50":s.role==="STAFF"}])},[...t[17]||(t[17]=[e("option",{value:"ADMIN"},"管理員",-1),e("option",{value:"STAFF"},"員工",-1),e("option",{value:"OWNER"},"擁有者",-1)])],42,Be),[[z,s.role]])])):(a(),r("span",{key:1,class:_(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{"bg-purple-500/20 text-purple-400":s.role==="OWNER","bg-blue-500/20 text-blue-400":s.role==="ADMIN","bg-green-500/20 text-green-400":s.role==="STAFF"}])},u(J(s.role)),3))]),e("td",Le,[e("span",{class:_(["inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium",{"bg-success-500/20 text-success-400":s.status==="ACTIVE","bg-critical-500/20 text-critical-400":s.status==="INACTIVE"}])},[e("span",{class:_(["w-1.5 h-1.5 rounded-full",{"bg-success-400":s.status==="ACTIVE","bg-critical-400":s.status==="INACTIVE"}])},null,2),g(" "+u(s.status==="ACTIVE"?"啟用":"停用"),1)],2)]),e("td",Fe,[s.line_user_id?(a(),r("div",Oe,[...t[18]||(t[18]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),e("span",{class:"text-xs"},"已綁定",-1)])])):(a(),r("span",Ue,"未綁定"))]),e("td",De,[e("div",He,[P(s)?(a(),r("button",{key:0,onClick:v=>le(s),class:"p-2 rounded-lg hover:bg-white/10 text-slate-400 hover:text-white transition-colors",title:"重設密碼"},[...t[19]||(t[19]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})],-1)])],8,We)):c("",!0),P(s)?(a(),r("button",{key:1,onClick:v=>re(s),class:_(["p-2 rounded-lg transition-colors",s.status==="ACTIVE"?"hover:bg-critical-500/20 text-slate-400 hover:text-critical-400":"hover:bg-success-500/20 text-slate-400 hover:text-success-400"]),title:s.status==="ACTIVE"?"停用":"啟用"},[s.status==="ACTIVE"?(a(),r("svg",qe,[...t[20]||(t[20]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"},null,-1)])])):(a(),r("svg",Ge,[...t[21]||(t[21]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])]))],10,Je)):c("",!0),P(s)&&s.line_user_id?(a(),r("button",{key:2,onClick:v=>ce(s),class:"p-2 rounded-lg hover:bg-red-500/20 text-slate-400 hover:text-red-400 transition-colors",title:"解除 LINE 綁定"},[...t[22]||(t[22]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})],-1)])],8,Ke)):c("",!0),s.id===o(F)?(a(),r("span",Qe," (本人) ")):c("",!0)])])]))),128))])]),o(Y).length===0&&!o(L)?(a(),r("div",Xe,[...t[24]||(t[24]=[e("div",{class:"w-16 h-16 mx-auto mb-4 rounded-full bg-slate-700/50 flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})])],-1),e("p",{class:"text-slate-400"},"暫無符合條件的管理員",-1)])])):c("",!0),o(L)?(a(),r("div",Ye,[...t[25]||(t[25]=[e("div",{class:"animate-spin w-8 h-8 border-4 border-primary-500 border-t-transparent rounded-full mx-auto"},null,-1),e("p",{class:"text-slate-400 mt-4"},"載入中...",-1)])])):c("",!0)])])]),_:1}),(a(),A(I,{to:"body"},[o(U)?(a(),r("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",onClick:V(q,["self"])},[e("div",Ze,[e("div",et,[t[26]||(t[26]=e("h3",{class:"text-lg font-semibold text-white"},"重設密碼",-1)),o(i)?(a(),r("p",tt," 將重設 "+u(o(i).name)+" 的密碼 ",1)):c("",!0)]),e("div",st,[e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm text-slate-400 mb-2"},"新密碼",-1)),k(M,{modelValue:o(m).newPassword,"onUpdate:modelValue":t[3]||(t[3]=s=>o(m).newPassword=s),type:"password",placeholder:"請輸入新密碼（至少 6 個字元）",class:"w-full"},null,8,["modelValue"])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm text-slate-400 mb-2"},"確認新密碼",-1)),k(M,{modelValue:o(m).confirmPassword,"onUpdate:modelValue":t[4]||(t[4]=s=>o(m).confirmPassword=s),type:"password",placeholder:"請再次輸入新密碼",class:"w-full",error:o(m).confirmPassword&&o(m).newPassword!==o(m).confirmPassword?"密碼不一致":""},null,8,["modelValue","error"])])]),e("div",ot,[e("button",{onClick:q,class:"flex-1 px-4 py-2 rounded-lg bg-white/5 text-white hover:bg-white/10 transition-colors"}," 取消 "),e("button",{onClick:ae,disabled:!o(Z)||o(T),class:"flex-1 px-4 py-2 rounded-lg bg-primary-500/30 border border-primary-500 text-primary-400 hover:bg-primary-500/40 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[o(T)?(a(),r("span",at,[...t[29]||(t[29]=[e("svg",{class:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),g(" 處理中... ",-1)])])):(a(),r("span",rt,"確認重設"))],8,lt)])])])):c("",!0)])),(a(),A(I,{to:"body"},[o(D)?(a(),r("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",onClick:V(G,["self"])},[e("div",nt,[e("div",it,[e("h3",dt,u(o(h)==="disable"?"停用管理員":"啟用管理員"),1),o(i)?(a(),r("p",ct," 確定要"+u(o(h)==="disable"?"停用":"啟用")+" "+u(o(i).name)+" 的帳號嗎？ ",1)):c("",!0)]),e("div",ut,[e("button",{onClick:G,class:"flex-1 px-4 py-2 rounded-lg bg-white/5 text-white hover:bg-white/10 transition-colors"}," 取消 "),e("button",{onClick:ne,disabled:o(N),class:_(["flex-1 px-4 py-2 rounded-lg transition-colors",o(h)==="disable"?"bg-critical-500/30 border border-critical-500 text-critical-400 hover:bg-critical-500/40":"bg-success-500/30 border border-success-500 text-success-400 hover:bg-success-500/40"])},[o(N)?(a(),r("span",mt,[...t[30]||(t[30]=[e("svg",{class:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):(a(),r("span",ft,"確認"+u(o(h)==="disable"?"停用":"啟用"),1))],10,pt)])])])):c("",!0)])),(a(),A(I,{to:"body"},[o(H)?(a(),r("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",onClick:V(K,["self"])},[e("div",bt,[e("div",xt,[t[31]||(t[31]=e("h3",{class:"text-lg font-semibold text-white"},"變更角色",-1)),o(i)?(a(),r("p",wt," 確定要將 "+u(o(i).name)+" 的角色變更為 "+u(o(te))+" 嗎？ ",1)):c("",!0)]),e("div",vt,[e("button",{onClick:K,class:"flex-1 px-4 py-2 rounded-lg bg-white/5 text-white hover:bg-white/10 transition-colors"}," 取消 "),e("button",{onClick:de,disabled:o(j),class:"flex-1 px-4 py-2 rounded-lg bg-primary-500/30 border border-primary-500 text-primary-400 hover:bg-primary-500/40 transition-colors"},[o(j)?(a(),r("span",ht,[...t[32]||(t[32]=[e("svg",{class:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):(a(),r("span",yt,"確認變更"))],8,gt)])])])):c("",!0)])),(a(),A(I,{to:"body"},[o(W)?(a(),r("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",onClick:V(Q,["self"])},[e("div",kt,[e("div",_t,[t[35]||(t[35]=e("h3",{class:"text-lg font-semibold text-white"},"解除 LINE 綁定",-1)),o(i)?(a(),r("p",Ct,[g(" 確定要解除 "+u(o(i).name)+" 的 LINE 綁定嗎？",1),t[33]||(t[33]=e("br",null,null,-1)),t[34]||(t[34]=e("span",{class:"text-yellow-400"},"解除後將無法接收 LINE 通知",-1))])):c("",!0)]),e("div",At,[e("button",{onClick:Q,class:"flex-1 px-4 py-2 rounded-lg bg-white/5 text-white hover:bg-white/10 transition-colors"}," 取消 "),e("button",{onClick:ue,disabled:o(S),class:"flex-1 px-4 py-2 rounded-lg bg-red-500/30 border border-red-500 text-red-400 hover:bg-red-500/40 transition-colors"},[o(S)?(a(),r("span",It,[...t[36]||(t[36]=[e("svg",{class:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):(a(),r("span",Mt,"確認解除"))],8,Vt)])])])):c("",!0)])),(a(),A(I,{to:"body"},[o(C)?(a(),r("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",onClick:t[10]||(t[10]=V(s=>C.value=!1,["self"]))},[e("div",Et,[t[43]||(t[43]=e("div",{class:"p-6 border-b border-white/10"},[e("h3",{class:"text-lg font-semibold text-white"},"新增管理員"),e("p",{class:"text-sm text-slate-400 mt-1"}," 直接建立管理員帳號 ")],-1)),e("div",Tt,[e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm text-slate-400 mb-2"},[g("姓名 "),e("span",{class:"text-critical-500"},"*")],-1)),k(M,{modelValue:o(d).name,"onUpdate:modelValue":t[5]||(t[5]=s=>o(d).name=s),placeholder:"請輸入姓名",class:"w-full"},null,8,["modelValue"])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm text-slate-400 mb-2"},[g("Email "),e("span",{class:"text-critical-500"},"*")],-1)),k(M,{modelValue:o(d).email,"onUpdate:modelValue":t[6]||(t[6]=s=>o(d).email=s),type:"email",placeholder:"請輸入 Email",class:"w-full"},null,8,["modelValue"])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm text-slate-400 mb-2"},[g("密碼 "),e("span",{class:"text-critical-500"},"*")],-1)),k(M,{modelValue:o(d).password,"onUpdate:modelValue":t[7]||(t[7]=s=>o(d).password=s),type:"password",placeholder:"請輸入密碼（至少6個字元）",class:"w-full"},null,8,["modelValue"])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm text-slate-400 mb-2"},"角色",-1)),$(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>o(d).role=s),class:"w-full px-3 py-2 rounded-lg text-sm bg-slate-800/80 border border-white/10 text-slate-300 focus:outline-none focus:border-primary-500"},[...t[40]||(t[40]=[e("option",{value:"ADMIN"},"管理員",-1),e("option",{value:"STAFF"},"員工",-1)])],512),[[z,o(d).role]])])]),e("div",Nt,[e("button",{onClick:t[9]||(t[9]=s=>C.value=!1),class:"flex-1 px-4 py-2 rounded-lg bg-white/5 text-white hover:bg-white/10 transition-colors"}," 取消 "),e("button",{onClick:me,disabled:o(R),class:"flex-1 px-4 py-2 rounded-lg bg-primary-500/30 border border-primary-500 text-primary-400 hover:bg-primary-500/40 transition-colors"},[o(R)?(a(),r("span",St,[...t[42]||(t[42]=[e("svg",{class:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):(a(),r("span",Pt,"新增管理員"))],8,jt)])])])):c("",!0)]))]))}});export{Ot as default};
