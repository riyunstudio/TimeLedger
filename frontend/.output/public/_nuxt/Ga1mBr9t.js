import{g as I,r as k,D as O,c as r,o as l,x as M,a as e,t as x,y as $,z as T,n as o,B as z,l as A,G as L,p as C,d as R,F as j,v as B,m as E,s as S,H as D,P as Y,A as G,q as J}from"./Blq0K2QU.js";import{a as U,u as P,c as N,b as W}from"./CyqcL6d0.js";import{u as F}from"./CnOGT6qf.js";const Q={class:"flex items-center justify-between p-4 border-b border-white/10"},K={class:"text-lg font-semibold text-slate-100"},X={class:"flex gap-3"},Z=["disabled"],ee=I({__name:"RoomModal",props:{room:{}},emits:["close","saved"],setup(y,{emit:h}){const u=y,c=h,b=k(!1),{getCenterId:m}=F(),i=k({name:u.room?.name||"",capacity:u.room?.capacity||1});O(()=>u.room,n=>{n?i.value={name:n.name,capacity:n.capacity}:i.value={name:"",capacity:1}});const v=async()=>{b.value=!0;try{const n=z(),s=m(),f={name:i.value.name,capacity:parseInt(i.value.capacity.toString())};u.room&&u.room.id?await n.put(`/admin/rooms/${u.room.id}`,f):await n.post("/admin/rooms",f),c("saved"),c("close")}catch(n){console.error("Failed to save room:",n),await U("å„²å­˜å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}finally{b.value=!1}};return(n,s)=>(l(),r("div",{class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:s[5]||(s[5]=M(f=>c("close"),["self"]))},[e("div",{class:"glass-card w-full max-w-md animate-spring",onClick:s[4]||(s[4]=M(()=>{},["stop"]))},[e("div",Q,[e("h3",K,x(y.room?"ç·¨è¼¯æ•™å®¤":"æ–°å¢æ•™å®¤"),1),e("button",{onClick:s[0]||(s[0]=f=>c("close")),class:"p-2 rounded-lg hover:bg-white/10 transition-colors"},[...s[6]||(s[6]=[e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:M(v,["prevent"]),class:"p-4 space-y-4"},[e("div",null,[s[7]||(s[7]=e("label",{class:"block text-slate-300 mb-2 font-medium"},"æ•™å®¤åç¨±",-1)),$(e("input",{"onUpdate:modelValue":s[1]||(s[1]=f=>o(i).name=f),type:"text",placeholder:"ä¾‹ï¼šRoom A",class:"input-field",required:""},null,512),[[T,o(i).name]])]),e("div",null,[s[8]||(s[8]=e("label",{class:"block text-slate-300 mb-2 font-medium"},"å®¹é‡",-1)),$(e("input",{"onUpdate:modelValue":s[2]||(s[2]=f=>o(i).capacity=f),type:"number",min:"1",placeholder:"1",class:"input-field",required:""},null,512),[[T,o(i).capacity,void 0,{number:!0}]])]),e("div",X,[e("button",{onClick:s[3]||(s[3]=f=>c("close")),class:"flex-1 glass-btn py-3 rounded-xl font-medium"}," å–æ¶ˆ "),e("button",{type:"submit",disabled:o(b),class:"flex-1 btn-primary"},x(o(b)?"å„²å­˜ä¸­...":"å„²å­˜"),9,Z)])],32)])]))}}),te={class:"space-y-4"},se={class:"flex items-center justify-between"},oe={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},le={key:1,class:"text-center py-12 text-slate-500 glass-card"},ne={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ie={class:"flex items-start justify-between mb-3"},ae={class:"text-lg font-semibold text-slate-100 mb-1"},re={class:"text-sm text-slate-400"},de={class:"flex gap-2"},ue=["onClick"],ce=["onClick"],me={class:"space-y-2"},ve={class:"flex items-center gap-2"},pe={class:"text-sm font-medium text-slate-100"},fe={key:0,class:"flex flex-wrap gap-2"},xe={class:"flex items-center gap-2"},be={class:"text-xs text-slate-500 mt-3 pt-3 border-t border-white/10"},ge=I({__name:"RoomsTab",setup(y){const h=k(!1),u=k(!1),c=k(null),b=k(!1),{getCenterId:m}=F(),{error:i,confirm:v}=P(),n=k([]),s=async()=>{b.value=!0;try{const d=z(),t=m(),w=await d.get("/admin/rooms");n.value=w.datas||[]}catch(d){console.error("Failed to fetch rooms:",d),n.value=[]}finally{b.value=!1}};A(()=>{s()});const f=d=>{c.value={...d},u.value=!0},g=async d=>{if(await v("ç¢ºå®šè¦åˆªé™¤æ­¤æ•™å®¤ï¼Ÿ"))try{const t=z(),w=m();await t.delete(`/admin/rooms/${d}`),n.value=n.value.filter(p=>p.id!==d)}catch(t){console.error("Failed to delete room:",t),await i("åˆªé™¤å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}},H=d=>new Date(d).toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric"});return(d,t)=>{const w=ee;return l(),r("div",te,[e("div",se,[t[5]||(t[5]=e("h2",{class:"text-xl font-semibold text-slate-100"},"æ•™å®¤åˆ—è¡¨",-1)),e("button",{onClick:t[0]||(t[0]=p=>h.value=!0),class:"btn-primary px-4 py-2 text-sm font-medium flex items-center gap-2"},[...t[4]||(t[4]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),R(" æ–°å¢æ•™å®¤ ",-1)])])]),o(b)?(l(),r("div",oe,[(l(),r(j,null,B(6,p=>e("div",{key:p,class:"glass-card p-5"},[...t[6]||(t[6]=[E('<div class="animate-pulse"><div class="flex items-start justify-between mb-3"><div class="flex-1"><div class="h-5 w-32 bg-white/10 rounded mb-2"></div><div class="h-4 w-20 bg-white/10 rounded"></div></div><div class="flex gap-2"><div class="w-8 h-8 bg-white/10 rounded-lg"></div><div class="w-8 h-8 bg-white/10 rounded-lg"></div></div></div><div class="space-y-2"><div class="flex items-center gap-2"><div class="w-5 h-5 bg-white/10 rounded"></div><div class="h-4 w-16 bg-white/10 rounded"></div></div><div class="flex gap-2"><div class="h-6 w-16 bg-white/10 rounded-full"></div><div class="h-6 w-16 bg-white/10 rounded-full"></div></div></div><div class="mt-3 pt-3 border-t border-white/10"><div class="h-3 w-24 bg-white/10 rounded"></div></div></div>',1)])])),64))])):o(n).length===0?(l(),r("div",le,[t[7]||(t[7]=e("svg",{class:"w-16 h-16 mx-auto mb-4 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),t[8]||(t[8]=e("p",{class:"mb-4"},"å°šæœªæ·»åŠ æ•™å®¤",-1)),e("button",{onClick:t[1]||(t[1]=p=>h.value=!0),class:"px-4 py-2 rounded-lg bg-primary-500 text-white hover:bg-primary-600 transition-colors"}," æ–°å¢ç¬¬ä¸€é–“æ•™å®¤ ")])):(l(),r("div",ne,[(l(!0),r(j,null,B(o(n),p=>(l(),r("div",{key:p.id,class:"glass-card p-5 hover:bg-white/5 transition-all"},[e("div",ie,[e("div",null,[e("h3",ae,x(p.name),1),e("p",re,"Room "+x(p.id),1)]),e("div",de,[e("button",{onClick:a=>f(p),class:"p-2 rounded-lg hover:bg-white/10 transition-colors"},[...t[9]||(t[9]=[e("svg",{class:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 0L21.828 3.172a2 2 0 010-2.828l-7-7a2 2 0 00-2.828 0L2.172 20.828a2 2 0 010 2.828l7 7a2 2 0 0012.828 0l7.172-7.172z"})],-1)])],8,ue),e("button",{onClick:a=>g(p.id),class:"p-2 rounded-lg hover:bg-critical-500/20 text-critical-500 transition-colors"},[...t[10]||(t[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ce)])]),e("div",me,[e("div",ve,[t[11]||(t[11]=e("svg",{class:"w-5 h-5 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20H2v-2a3 3 0 015.356-1.857m0 0a5 5 0 0111 0 5 5 0 0111 0z"})],-1)),t[12]||(t[12]=e("span",{class:"text-sm text-slate-400"},"å®¹é‡",-1)),e("span",pe,x(p.capacity)+" äºº",1)]),p.equipment?(l(),r("div",fe,[(l(!0),r(j,null,B(p.equipment,(a,V)=>(l(),r("span",{key:V,class:"px-2 py-1 rounded-full text-xs font-medium bg-secondary-500/20 text-secondary-500"},x(a),1))),128))])):C("",!0),e("div",xe,[t[13]||(t[13]=e("svg",{class:"w-5 h-5 text-success-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",{class:S(["px-2 py-1 rounded-full text-xs font-medium",p.status==="ACTIVE"?"bg-success-500/20 text-success-500":p.status==="BUSY"?"bg-warning-500/20 text-warning-500":"bg-slate-500/20 text-slate-400"])},x(p.status==="ACTIVE"?"å¯ä½¿ç”¨":p.status==="BUSY"?"ä½¿ç”¨ä¸­":"ç¶­ä¿®ä¸­"),3)])]),e("div",be," å‰µå»ºæ–¼ï¼š"+x(H(p.created_at)),1)]))),128))])),o(h)?(l(),L(w,{key:3,room:null,onClose:t[2]||(t[2]=p=>h.value=!1),onSaved:s})):C("",!0),o(u)?(l(),L(w,{key:4,room:o(c),onClose:t[3]||(t[3]=p=>u.value=!1),onSaved:s},null,8,["room"])):C("",!0)])}}}),we={class:"flex items-center justify-between p-4 border-b border-white/10 sticky top-0 bg-slate-900/95 backdrop-blur-sm z-10"},he={class:"text-lg font-semibold text-slate-100"},ke={class:"grid grid-cols-2 gap-4"},ye={class:"flex items-center gap-2"},_e={class:"flex items-center gap-2"},$e={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Ce={class:"flex items-center gap-2"},Me={class:"flex items-center gap-2"},je={class:"flex gap-3 pt-2"},Be=["disabled"],Ve=I({__name:"CourseModal",props:{course:{}},emits:["close","saved"],setup(y,{emit:h}){const u=y,c=h,b=k(!1);F();const m=k({name:u.course?.name||"",duration:u.course?.default_duration||60,color_hex:u.course?.color_hex||"#3B82F6",teacher_buffer_min:u.course?.teacher_buffer_min||10,room_buffer_min:u.course?.room_buffer_min||5});O(()=>u.course,v=>{v?m.value={name:v.name,duration:v.default_duration||60,color_hex:v.color_hex||"#3B82F6",teacher_buffer_min:v.teacher_buffer_min,room_buffer_min:v.room_buffer_min}:m.value={name:"",duration:60,color_hex:"#3B82F6",teacher_buffer_min:10,room_buffer_min:5}},{immediate:!0});const i=async()=>{b.value=!0;try{const v=z(),n={name:m.value.name,duration:m.value.duration,color_hex:m.value.color_hex,teacher_buffer_min:m.value.teacher_buffer_min,room_buffer_min:m.value.room_buffer_min};u.course&&u.course.id?(await v.put(`/admin/courses/${u.course.id}`,n),await N("èª²ç¨‹æ›´æ–°æˆåŠŸ")):(await v.post("/admin/courses",n),await N("èª²ç¨‹å»ºç«‹æˆåŠŸ")),c("saved"),c("close")}catch(v){console.error("Failed to save course:",v),await U("å„²å­˜å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}finally{b.value=!1}};return(v,n)=>(l(),r("div",{class:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:n[9]||(n[9]=M(s=>c("close"),["self"]))},[e("div",{class:"glass-card w-full max-w-md sm:max-w-lg max-h-[90vh] overflow-y-auto animate-spring",onClick:n[8]||(n[8]=M(()=>{},["stop"]))},[e("div",we,[e("h3",he,x(y.course?"ç·¨è¼¯èª²ç¨‹":"æ–°å¢èª²ç¨‹"),1),e("button",{onClick:n[0]||(n[0]=s=>c("close")),class:"p-2 rounded-lg hover:bg-white/10 transition-colors"},[...n[10]||(n[10]=[e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:M(i,["prevent"]),class:"p-4 space-y-4"},[e("div",null,[n[11]||(n[11]=e("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},"èª²ç¨‹åç¨±",-1)),$(e("input",{"onUpdate:modelValue":n[1]||(n[1]=s=>o(m).name=s),type:"text",placeholder:"ä¾‹ï¼šé‹¼ç´åŸºç¤",class:"input-field text-sm sm:text-base",required:""},null,512),[[T,o(m).name]])]),e("div",ke,[e("div",null,[n[13]||(n[13]=e("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},"èª²ç¨‹æ™‚é•·",-1)),e("div",ye,[$(e("input",{"onUpdate:modelValue":n[2]||(n[2]=s=>o(m).duration=s),type:"number",min:"15",step:"15",placeholder:"60",class:"input-field text-sm sm:text-base",required:""},null,512),[[T,o(m).duration,void 0,{number:!0}]]),n[12]||(n[12]=e("span",{class:"text-sm text-slate-400"},"åˆ†é˜",-1))])]),e("div",null,[n[14]||(n[14]=e("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},"èª²ç¨‹é¡è‰²",-1)),e("div",_e,[$(e("input",{"onUpdate:modelValue":n[3]||(n[3]=s=>o(m).color_hex=s),type:"color",class:"w-10 h-10 rounded-lg cursor-pointer border border-white/20",required:""},null,512),[[T,o(m).color_hex]]),$(e("input",{"onUpdate:modelValue":n[4]||(n[4]=s=>o(m).color_hex=s),type:"text",placeholder:"#3B82F6",class:"input-field text-sm sm:text-base flex-1",required:""},null,512),[[T,o(m).color_hex]])])])]),e("div",$e,[e("div",null,[n[16]||(n[16]=e("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},"è€å¸«ç·©è¡æ™‚é–“",-1)),e("div",Ce,[$(e("input",{"onUpdate:modelValue":n[5]||(n[5]=s=>o(m).teacher_buffer_min=s),type:"number",min:"0",placeholder:"10",class:"input-field text-sm sm:text-base",required:""},null,512),[[T,o(m).teacher_buffer_min,void 0,{number:!0}]]),n[15]||(n[15]=e("span",{class:"text-sm text-slate-400"},"åˆ†é˜",-1))])]),e("div",null,[n[18]||(n[18]=e("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},"æ•™å®¤ç·©è¡æ™‚é–“",-1)),e("div",Me,[$(e("input",{"onUpdate:modelValue":n[6]||(n[6]=s=>o(m).room_buffer_min=s),type:"number",min:"0",placeholder:"5",class:"input-field text-sm sm:text-base",required:""},null,512),[[T,o(m).room_buffer_min,void 0,{number:!0}]]),n[17]||(n[17]=e("span",{class:"text-sm text-slate-400"},"åˆ†é˜",-1))])])]),n[19]||(n[19]=e("div",{class:"p-3 rounded-xl bg-slate-700/30 border border-white/10"},[e("p",{class:"text-sm text-slate-300"},[e("span",{class:"font-medium text-slate-400"},"ğŸ’¡ æç¤ºï¼š"),R(" ç·©è¡æ™‚é–“æ˜¯é€£çºŒèª²ç¨‹ä¹‹é–“çš„é–“éš”æ™‚é–“ ")])],-1)),e("div",je,[e("button",{type:"button",onClick:n[7]||(n[7]=s=>c("close")),class:"flex-1 glass-btn py-2.5 sm:py-3 rounded-xl font-medium text-sm sm:text-base"}," å–æ¶ˆ "),e("button",{type:"submit",disabled:o(b),class:"flex-1 btn-primary py-2.5 sm:py-3 rounded-xl font-medium text-sm sm:text-base"},x(o(b)?"å„²å­˜ä¸­...":"å„²å­˜"),9,Be)])],32)])]))}}),ze={class:"space-y-4"},He={class:"flex items-center justify-between"},Te={class:"flex items-center gap-3"},Le={class:"text-sm text-slate-500"},Ie={class:"flex items-center gap-2"},Se={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Ue={key:1,class:"text-center py-12 text-slate-500 glass-card"},Fe={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Ae={class:"flex items-start justify-between mb-3"},De={class:"flex-1"},Re={class:"text-lg font-semibold text-slate-100"},Ee={class:"text-sm text-slate-400 mt-1"},qe={class:"flex items-center gap-1"},Ne=["onClick"],Oe=["onClick"],Pe={class:"space-y-2"},We={class:"flex items-center gap-2"},Ye={class:"text-sm font-medium text-slate-100"},Ge={class:"flex items-center gap-2"},Je={class:"text-sm font-medium text-slate-100"},Qe=I({__name:"CoursesTab",setup(y){const h=k(!1),u=k(!1),c=k(null),b=k(!1),{getCenterId:m}=F(),i=k([]),v=async()=>{b.value=!0;try{const g=await z().get("/admin/courses");i.value=g.datas||[]}catch(f){console.error("Failed to fetch courses:",f),i.value=[];const g=f?.response?.data?.message||f?.message||"ç„¡æ³•è¼‰å…¥èª²ç¨‹åˆ—è¡¨ï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·š";await U(g)}finally{b.value=!1}};A(()=>{v()});const n=f=>{c.value={...f},u.value=!0},s=async f=>{if(await W(`ç¢ºå®šè¦åˆªé™¤èª²ç¨‹ã€Œ${f.name}ã€å—ï¼Ÿ`))try{const g=z(),H=m();await g.delete(`/admin/courses/${f.id}`),await v()}catch(g){console.error("Failed to delete course:",g),await U("åˆªé™¤å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}};return(f,g)=>{const H=Ve;return l(),r("div",ze,[e("div",He,[e("div",Te,[g[3]||(g[3]=e("h2",{class:"text-xl font-semibold text-slate-100"},"èª²ç¨‹åˆ—è¡¨",-1)),e("span",Le,"("+x(o(i).length)+")",1)]),e("div",Ie,[e("button",{onClick:v,class:"p-2 rounded-lg hover:bg-white/10 transition-colors",title:"é‡æ–°æ•´ç†"},[(l(),r("svg",{class:S(["w-5 h-5 text-slate-400",{"animate-spin":o(b)}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...g[4]||(g[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2))]),e("button",{onClick:g[0]||(g[0]=d=>h.value=!0),class:"btn-primary px-4 py-2 text-sm font-medium"}," + æ–°å¢èª²ç¨‹ ")])]),o(b)?(l(),r("div",Se,[(l(),r(j,null,B(6,d=>e("div",{key:d,class:"glass-card p-5"},[...g[5]||(g[5]=[E('<div class="animate-pulse"><div class="flex items-start justify-between mb-3"><div class="flex-1"><div class="h-5 w-32 bg-white/10 rounded mb-2"></div><div class="h-4 w-20 bg-white/10 rounded"></div></div><div class="flex gap-2"><div class="w-8 h-8 bg-white/10 rounded-lg"></div><div class="w-8 h-8 bg-white/10 rounded-lg"></div></div></div><div class="space-y-2"><div class="flex items-center gap-2"><div class="w-5 h-5 bg-white/10 rounded"></div><div class="h-4 w-20 bg-white/10 rounded"></div></div><div class="flex items-center gap-2"><div class="w-5 h-5 bg-white/10 rounded"></div><div class="h-4 w-20 bg-white/10 rounded"></div></div></div></div>',1)])])),64))])):o(i).length===0?(l(),r("div",Ue,[...g[6]||(g[6]=[e("svg",{class:"w-16 h-16 mx-auto text-slate-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})],-1),e("p",{class:"text-lg mb-2"},"å°šæœªæ·»åŠ èª²ç¨‹",-1),e("p",{class:"text-sm text-slate-500"},"é»æ“Šä¸Šæ–¹æŒ‰éˆ•æ–°å¢ç¬¬ä¸€å€‹èª²ç¨‹",-1)])])):(l(),r("div",Fe,[(l(!0),r(j,null,B(o(i),d=>(l(),r("div",{key:d.id,class:"glass-card p-5 hover:bg-white/5 transition-all"},[e("div",Ae,[e("div",De,[e("h3",Re,x(d.name),1),e("p",Ee,"Course ID: "+x(d.id),1)]),e("div",qe,[e("button",{onClick:t=>n(d),class:"p-2 rounded-lg hover:bg-white/10 transition-colors",title:"ç·¨è¼¯"},[...g[7]||(g[7]=[e("svg",{class:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 0L21.828 5.172a2 2 0 010-2.828l-7.414-7.414a2 2 0 00-2.828 0L2.172 15.828a2 2 0 010 2.828l7.414 7.414a2 2 0 002.828 0z"})],-1)])],8,Ne),e("button",{onClick:t=>s(d),class:"p-2 rounded-lg hover:bg-red-500/20 transition-colors",title:"åˆªé™¤"},[...g[8]||(g[8]=[e("svg",{class:"w-4 h-4 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Oe)])]),e("div",Pe,[e("div",We,[g[9]||(g[9]=e("svg",{class:"w-5 h-5 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0zm-9 9h.01"})],-1)),g[10]||(g[10]=e("span",{class:"text-sm text-slate-300"},"è€å¸«ç·©è¡",-1)),e("span",Ye,x(d.teacher_buffer_min)+" åˆ†é˜",1)]),e("div",Ge,[g[11]||(g[11]=e("svg",{class:"w-5 h-5 text-secondary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H9"})],-1)),g[12]||(g[12]=e("span",{class:"text-sm text-slate-300"},"æ•™å®¤ç·©è¡",-1)),e("span",Je,x(d.room_buffer_min)+" åˆ†é˜",1)])])]))),128))])),o(h)?(l(),L(H,{key:3,course:null,onClose:g[1]||(g[1]=d=>h.value=!1),onSaved:v})):C("",!0),o(u)?(l(),L(H,{key:4,course:o(c),onClose:g[2]||(g[2]=d=>u.value=!1),onSaved:v},null,8,["course"])):C("",!0)])}}}),Ke={class:"flex items-center justify-between p-4 border-b border-white/10 sticky top-0 bg-slate-900/95 backdrop-blur-sm z-10"},Xe={class:"text-lg font-semibold text-slate-100"},Ze={key:0,class:"p-8 text-center"},et=["value"],tt=["value"],st=["value"],ot={class:"flex items-center gap-2"},lt={class:"flex gap-3 pt-2"},nt=["disabled"],it=I({__name:"OfferingModal",props:{offering:{}},emits:["close","saved"],setup(y,{emit:h}){const u=y,c=h,b=k(!0),m=k(!1),i=k([]),v=k([]),n=k([]),s=k({course_id:"",name:"",default_teacher_id:null,default_room_id:null,allow_buffer_override:!1}),{getCenterId:f}=F(),g=async()=>{try{const d=z(),t=f(),[w,p,a]=await Promise.all([d.get("/admin/courses"),d.get("/teachers"),d.get("/admin/rooms")]);i.value=w.datas||[],v.value=p.datas||[],n.value=a.datas||[],u.offering&&(s.value={course_id:u.offering.course_id||"",name:u.offering.name||"",default_teacher_id:u.offering.default_teacher_id||null,default_room_id:u.offering.default_room_id||null,allow_buffer_override:u.offering.allow_buffer_override||!1})}catch(d){console.error("Failed to fetch data:",d)}finally{b.value=!1}},H=async()=>{m.value=!0;try{const d=z(),t=f(),w={course_id:parseInt(s.value.course_id),name:s.value.name||null,default_teacher_id:s.value.default_teacher_id,default_room_id:s.value.default_room_id,allow_buffer_override:s.value.allow_buffer_override};u.offering?await d.put(`/admin/offerings/${u.offering.id}`,w):await d.post("/admin/offerings",w),c("saved"),c("close")}catch(d){console.error("Failed to save offering:",d),await U("å„²å­˜å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}finally{m.value=!1}};return A(()=>{g()}),(d,t)=>(l(),r("div",{class:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:t[8]||(t[8]=M(w=>c("close"),["self"]))},[e("div",{class:"glass-card w-full max-w-md max-h-[90vh] overflow-y-auto animate-spring",onClick:t[7]||(t[7]=M(()=>{},["stop"]))},[e("div",Ke,[e("h3",Xe,x(y.offering?"ç·¨è¼¯å¾…æ’èª²ç¨‹":"æ–°å¢å¾…æ’èª²ç¨‹"),1),e("button",{onClick:t[0]||(t[0]=w=>c("close")),class:"p-2 rounded-lg hover:bg-white/10 transition-colors"},[...t[9]||(t[9]=[e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),o(b)?(l(),r("div",Ze,[...t[10]||(t[10]=[e("div",{class:"inline-flex items-center gap-2 text-slate-400"},[e("svg",{class:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("span",null,"è¼‰å…¥ä¸­...")],-1)])])):(l(),r("form",{key:1,onSubmit:M(H,["prevent"]),class:"p-4 space-y-4"},[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-slate-300 mb-2 font-medium text-sm"},"èª²ç¨‹",-1)),$(e("select",{"onUpdate:modelValue":t[1]||(t[1]=w=>o(s).course_id=w),class:"input-field text-sm",required:""},[t[11]||(t[11]=e("option",{value:""},"è«‹é¸æ“‡èª²ç¨‹",-1)),(l(!0),r(j,null,B(o(i),w=>(l(),r("option",{key:w.id,value:w.id},x(w.name),9,et))),128))],512),[[D,o(s).course_id]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-slate-300 mb-2 font-medium text-sm"},"åç¨±ï¼ˆå¯é¸ï¼‰",-1)),$(e("input",{"onUpdate:modelValue":t[2]||(t[2]=w=>o(s).name=w),type:"text",placeholder:"ä¾‹ï¼šé€±ä¸€é‹¼ç´ç­",class:"input-field text-sm"},null,512),[[T,o(s).name]]),t[14]||(t[14]=e("p",{class:"text-xs text-slate-500 mt-1"},"ç•™ç©ºå°‡è‡ªå‹•ä½¿ç”¨èª²ç¨‹åç¨±",-1))]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-slate-300 mb-2 font-medium text-sm"},"é è¨­è€å¸«ï¼ˆå¯é¸ï¼‰",-1)),$(e("select",{"onUpdate:modelValue":t[3]||(t[3]=w=>o(s).default_teacher_id=w),class:"input-field text-sm"},[t[15]||(t[15]=e("option",{value:null},"æœªæŒ‡å®š",-1)),(l(!0),r(j,null,B(o(v),w=>(l(),r("option",{key:w.id,value:w.id},x(w.name),9,tt))),128))],512),[[D,o(s).default_teacher_id]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-slate-300 mb-2 font-medium text-sm"},"é è¨­æ•™å®¤ï¼ˆå¯é¸ï¼‰",-1)),$(e("select",{"onUpdate:modelValue":t[4]||(t[4]=w=>o(s).default_room_id=w),class:"input-field text-sm"},[t[17]||(t[17]=e("option",{value:null},"æœªæŒ‡å®š",-1)),(l(!0),r(j,null,B(o(n),w=>(l(),r("option",{key:w.id,value:w.id},x(w.name),9,st))),128))],512),[[D,o(s).default_room_id]])]),e("div",ot,[$(e("input",{type:"checkbox",id:"allow_buffer_override","onUpdate:modelValue":t[5]||(t[5]=w=>o(s).allow_buffer_override=w),class:"w-4 h-4 rounded bg-slate-800 border-slate-600 text-primary-500 focus:ring-primary-500"},null,512),[[Y,o(s).allow_buffer_override]]),t[19]||(t[19]=e("label",{for:"allow_buffer_override",class:"text-sm text-slate-300"}," å…è¨±è¦†è“‹ç·©è¡æ™‚é–“ ",-1))]),e("div",lt,[e("button",{type:"button",onClick:t[6]||(t[6]=w=>c("close")),class:"flex-1 glass-btn py-2.5 rounded-xl font-medium text-sm"}," å–æ¶ˆ "),e("button",{type:"submit",disabled:o(m),class:"flex-1 btn-primary py-2.5 rounded-xl font-medium text-sm"},x(o(m)?"å„²å­˜ä¸­...":"å„²å­˜"),9,nt)])],32))])]))}}),at={class:"space-y-4"},rt={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},dt={key:1,class:"text-center py-12 text-slate-500 glass-card"},ut={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ct=["onDragstart"],mt={class:"flex items-start justify-between mb-3"},vt={class:"text-lg font-semibold text-slate-100 mb-1"},pt={class:"text-sm text-slate-400"},ft={class:"flex gap-1"},xt=["onClick"],bt=["onClick"],gt={key:0,class:"text-sm text-slate-300 mb-1"},wt={class:"text-slate-100"},ht={key:1,class:"text-sm text-slate-500 mb-1"},kt={key:2,class:"text-sm text-slate-300"},yt={class:"text-slate-100"},_t={key:3,class:"text-sm text-slate-500"},$t={key:4,class:"text-xs text-warning-500 mt-1"},Ct=I({__name:"OfferingsTab",setup(y){const h=k(!1),u=k(null),c=k([]),b=k(!1),m=k(new Map),i=k(new Map),{getCenterId:v}=F(),n=(p,a)=>{a.dataTransfer?.setData("application/json",JSON.stringify({type:"offering",item:p})),a.dataTransfer.effectAllowed="copy"},s=p=>m.value.get(p)?.name||`è€å¸« ${p}`,f=p=>i.value.get(p)?.name||`æ•™å®¤ ${p}`,g=async()=>{try{const p=z(),[a,V]=await Promise.all([p.get("/teachers"),p.get("/admin/rooms")]);a.datas?.forEach(_=>{m.value.set(_.id,_)}),V.datas?.forEach(_=>{i.value.set(_.id,_)})}catch(p){console.error("Failed to fetch resources:",p)}},H=async()=>{b.value=!0;try{const p=z(),a=v(),V=await p.get("/admin/offerings");V.datas?.offerings?c.value=V.datas.offerings:c.value=[]}catch(p){console.error("Failed to fetch offerings:",p),c.value=[]}finally{b.value=!1}},d=p=>{u.value=p,h.value=!0},t=()=>{u.value=null,h.value=!0},w=async p=>{if(await W(`ç¢ºå®šè¦åˆªé™¤å¾…æ’èª²ç¨‹ã€Œ${p.name}ã€å—ï¼Ÿ`))try{const a=z(),V=v();await a.delete(`/admin/offerings/${p.id}`),await H()}catch(a){console.error("Failed to delete offering:",a),await U("åˆªé™¤å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}};return A(()=>{g(),H()}),(p,a)=>{const V=it;return l(),r("div",at,[e("div",{class:"flex items-center justify-between"},[a[2]||(a[2]=e("h2",{class:"text-xl font-semibold text-slate-100"},"å¾…æ’èª²ç¨‹",-1)),e("button",{onClick:t,class:"btn-primary px-4 py-2 text-sm font-medium flex items-center gap-2"},[...a[1]||(a[1]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),R(" æ–°å¢å¾…æ’èª²ç¨‹ ",-1)])])]),o(b)?(l(),r("div",rt,[(l(),r(j,null,B(6,_=>e("div",{key:_,class:"glass-card p-5"},[...a[3]||(a[3]=[E('<div class="animate-pulse"><div class="flex items-start justify-between mb-3"><div class="flex-1"><div class="h-5 w-40 bg-white/10 rounded mb-2"></div><div class="h-4 w-24 bg-white/10 rounded"></div></div><div class="flex gap-2"><div class="w-8 h-8 bg-white/10 rounded-lg"></div><div class="w-8 h-8 bg-white/10 rounded-lg"></div></div></div><div class="space-y-2"><div class="h-4 w-32 bg-white/10 rounded"></div><div class="h-4 w-32 bg-white/10 rounded"></div></div></div>',1)])])),64))])):o(c).length===0?(l(),r("div",dt,[a[4]||(a[4]=e("svg",{class:"w-16 h-16 mx-auto mb-4 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),a[5]||(a[5]=e("p",{class:"mb-4"},"å°šæœªæ·»åŠ å¾…æ’èª²ç¨‹",-1)),e("button",{onClick:t,class:"px-4 py-2 rounded-lg bg-primary-500 text-white hover:bg-primary-600 transition-colors"}," æ–°å¢ç¬¬ä¸€å€‹å¾…æ’èª²ç¨‹ ")])):(l(),r("div",ut,[(l(!0),r(j,null,B(o(c),_=>(l(),r("div",{key:_.id,class:"glass-card p-5 hover:bg-white/5 transition-all cursor-pointer",draggable:"true",onDragstart:q=>n(_,q)},[e("div",mt,[e("div",null,[e("h3",vt,x(_.name),1),e("p",pt,"Course ID: "+x(_.course_id),1)]),e("div",ft,[e("button",{onClick:M(q=>d(_),["stop"]),class:"p-2 rounded-lg hover:bg-white/10 transition-colors",title:"ç·¨è¼¯"},[...a[6]||(a[6]=[e("svg",{class:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 0L21.828 3.172a2 2 0 010-2.828l-7-7a2 2 0 00-2.828 0L2.172 20.828a2 2 0 010 2.828l7 7a2 2 0 0012.828 0l7.172-7.172z"})],-1)])],8,xt),e("button",{onClick:M(q=>w(_),["stop"]),class:"p-2 rounded-lg hover:bg-red-500/20 transition-colors",title:"åˆªé™¤"},[...a[7]||(a[7]=[e("svg",{class:"w-4 h-4 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,bt)])]),_.default_teacher_id?(l(),r("p",gt,[a[8]||(a[8]=e("span",{class:"text-slate-400"},"é è¨­è€å¸«ï¼š",-1)),e("span",wt,x(s(_.default_teacher_id)),1)])):(l(),r("p",ht,[...a[9]||(a[9]=[e("span",{class:"text-slate-400"},"é è¨­è€å¸«ï¼š",-1),e("span",null,"æœªæŒ‡å®š",-1)])])),_.default_room_id?(l(),r("p",kt,[a[10]||(a[10]=e("span",{class:"text-slate-400"},"é è¨­æ•™å®¤ï¼š",-1)),e("span",yt,x(f(_.default_room_id)),1)])):(l(),r("p",_t,[...a[11]||(a[11]=[e("span",{class:"text-slate-400"},"é è¨­æ•™å®¤ï¼š",-1),e("span",null,"æœªæŒ‡å®š",-1)])])),_.allow_buffer_override?C("",!0):(l(),r("p",$t," âš ï¸ ä¸å…è¨±è¦†è“‹ç·©è¡æ™‚é–“ "))],40,ct))),128))])),o(h)?(l(),L(V,{key:3,offering:o(u),onClose:a[0]||(a[0]=_=>{h.value=!1,u.value=null}),onSaved:H},null,8,["offering"])):C("",!0)])}}}),Mt={class:"flex items-center justify-between p-4 border-b border-white/10"},jt={key:0,class:"p-3 rounded-xl bg-success-500/10 border border-success-500/20"},Bt=["value"],Vt={class:"flex gap-3"},zt=["disabled"],Ht=I({__name:"TeacherInviteModal",emits:["close","invited"],setup(y,{emit:h}){const u=h,c=k(!1),b=k(""),{getCenterId:m}=F(),i=k({email:"",role:"TEACHER",message:""}),v=async()=>{c.value=!0;try{const n=z(),s=m(),f=await n.post("/admin/invitations",{email:i.value.email,role:i.value.role,message:i.value.message});f&&f.token?b.value=`${window.location.origin}/register?token=${f.token}&center=${s}`:(u("invited"),u("close"),await N("é‚€è«‹å·²ç™¼é€ï¼"))}catch(n){console.error("Failed to send invitation:",n),await U("ç™¼é€å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}finally{c.value=!1}};return(n,s)=>(l(),r("div",{class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:s[7]||(s[7]=M(f=>u("close"),["self"]))},[e("div",{class:"glass-card w-full max-w-md animate-spring",onClick:s[6]||(s[6]=M(()=>{},["stop"]))},[e("div",Mt,[s[9]||(s[9]=e("h3",{class:"text-lg font-semibold text-slate-100"},"é‚€è«‹è€å¸«",-1)),e("button",{onClick:s[0]||(s[0]=f=>u("close")),class:"p-2 rounded-lg hover:bg-white/10 transition-colors"},[...s[8]||(s[8]=[e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:M(v,["prevent"]),class:"p-4 space-y-4"},[e("div",null,[s[10]||(s[10]=e("label",{class:"block text-slate-300 mb-2 font-medium"},"è€å¸« Email",-1)),$(e("input",{"onUpdate:modelValue":s[1]||(s[1]=f=>o(i).email=f),type:"email",placeholder:"teacher@example.com",class:"input-field",required:""},null,512),[[T,o(i).email]])]),e("div",null,[s[12]||(s[12]=e("label",{class:"block text-slate-300 mb-2 font-medium"},"è§’è‰²",-1)),$(e("select",{"onUpdate:modelValue":s[2]||(s[2]=f=>o(i).role=f),class:"input-field"},[...s[11]||(s[11]=[e("option",{value:"TEACHER"},"è€å¸«",-1),e("option",{value:"SUBSTITUTE"},"ä»£èª²è€å¸«",-1)])],512),[[D,o(i).role]])]),o(b)?(l(),r("div",jt,[s[13]||(s[13]=e("p",{class:"text-sm text-success-500 font-medium mb-1"},"é‚€è«‹é€£çµå·²å»ºç«‹ï¼",-1)),e("input",{value:o(b),readonly:"",class:"input-field text-xs bg-slate-800",onClick:s[3]||(s[3]=f=>f.target?.select())},null,8,Bt),s[14]||(s[14]=e("p",{class:"text-xs text-slate-400 mt-1"},"é€£çµå°‡åœ¨ 72 å°æ™‚å¾ŒéæœŸ",-1))])):C("",!0),e("div",null,[s[15]||(s[15]=e("label",{class:"block text-slate-300 mb-2 font-medium"},"é‚€è«‹è¨Šæ¯",-1)),$(e("textarea",{"onUpdate:modelValue":s[4]||(s[4]=f=>o(i).message=f),placeholder:"æ­¡è¿åŠ å…¥æˆ‘å€‘çš„ä¸­å¿ƒ...",rows:"3",class:"input-field resize-none"},null,512),[[T,o(i).message]])]),e("div",Vt,[e("button",{onClick:s[5]||(s[5]=f=>u("close")),class:"flex-1 glass-btn py-3 rounded-xl font-medium"}," å–æ¶ˆ "),e("button",{type:"submit",disabled:o(c),class:"flex-1 btn-primary"},x(o(c)?"ç™¼é€ä¸­...":"ç™¼é€é‚€è«‹"),9,zt)])],32)])]))}}),Tt={class:"flex items-center justify-between p-4 border-b border-white/10"},Lt={class:"p-4 space-y-4"},It={class:"flex items-center gap-4"},St={class:"w-16 h-16 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center"},Ut={class:"text-2xl font-bold text-white"},Ft={class:"text-xl font-semibold text-slate-100"},At={class:"space-y-3"},Dt={class:"flex items-center gap-3 p-3 rounded-lg bg-white/5"},Rt={class:"text-slate-300"},Et={class:"flex items-center gap-3 p-3 rounded-lg bg-white/5"},qt={class:"text-slate-300"},Nt={class:"flex items-center gap-3 p-3 rounded-lg bg-white/5"},Ot={class:"text-slate-300"},Pt={key:0},Wt={class:"flex flex-wrap gap-2"},Yt={key:1},Gt={class:"text-sm font-medium text-slate-400 mb-2"},Jt={class:"space-y-2"},Qt={class:"flex-shrink-0 w-10 h-10 rounded-lg bg-amber-500/20 flex items-center justify-center"},Kt={key:0,class:"w-5 h-5 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Xt={key:1,class:"w-5 h-5 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Zt={class:"flex-1 min-w-0"},es={class:"text-sm font-medium text-slate-200 truncate"},ts={class:"text-xs text-slate-500"},ss=["href"],os={key:2,class:"flex items-center gap-3 p-3 rounded-lg bg-white/5"},ls={class:"p-4 border-t border-white/10"},ns=I({__name:"AdminTeacherProfileModal",props:{teacher:{}},emits:["close"],setup(y,{emit:h}){const u=h,c=m=>m.toLowerCase().includes("pdf")?"pdf":"image",b=m=>m?new Date(m).toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric"}):"æœªè¨­å®š";return(m,i)=>(l(),r("div",{class:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:i[3]||(i[3]=M(v=>u("close"),["self"]))},[e("div",{class:"glass-card w-full max-w-lg max-h-[90vh] overflow-y-auto animate-spring",onClick:i[2]||(i[2]=M(()=>{},["stop"]))},[e("div",Tt,[i[5]||(i[5]=e("h3",{class:"text-lg font-semibold text-slate-100"}," è€å¸«æª”æ¡ˆ ",-1)),e("button",{onClick:i[0]||(i[0]=v=>u("close")),class:"p-2 rounded-lg hover:bg-white/10 transition-colors"},[...i[4]||(i[4]=[e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Lt,[e("div",It,[e("div",St,[e("span",Ut,x(y.teacher?.name?.charAt(0)||"?"),1)]),e("div",null,[e("h4",Ft,x(y.teacher?.name),1),e("span",{class:S(["px-2 py-1 rounded-full text-xs font-medium",y.teacher?.is_active?"bg-success-500/20 text-success-500":"bg-warning-500/20 text-warning-500"])},x(y.teacher?.is_active?"æ´»èºä¸­":"æœªæ´»èº"),3)])]),e("div",At,[e("div",Dt,[i[6]||(i[6]=e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),e("span",Rt,x(y.teacher?.email||"æœªè¨­å®š"),1)]),e("div",Et,[i[7]||(i[7]=e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),e("span",qt,x(y.teacher?.phone||"æœªè¨­å®š"),1)]),e("div",Nt,[i[8]||(i[8]=e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),e("span",Ot,x(y.teacher?.city||"æœªè¨­å®š")+" "+x(y.teacher?.district||""),1)])]),y.teacher?.skills?.length>0?(l(),r("div",Pt,[i[9]||(i[9]=e("h5",{class:"text-sm font-medium text-slate-400 mb-2"},"æŠ€èƒ½å°ˆé•·",-1)),e("div",Wt,[(l(!0),r(j,null,B(y.teacher.skills,v=>(l(),r("span",{key:v.id,class:"px-3 py-1.5 rounded-full text-sm font-medium bg-primary-500/20 text-primary-500"},x(v.skill_name),1))),128))])])):C("",!0),y.teacher?.certificates?.length>0?(l(),r("div",Yt,[e("h5",Gt,"æŒæœ‰è­‰ç…§ ("+x(y.teacher.certificates.length)+" å¼µ)",1),e("div",Jt,[(l(!0),r(j,null,B(y.teacher.certificates,v=>(l(),r("div",{key:v.id,class:"flex items-center gap-3 p-3 rounded-lg bg-white/5 hover:bg-white/10 transition-colors"},[e("div",Qt,[c(v.name)==="pdf"?(l(),r("svg",Kt,[...i[10]||(i[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])):(l(),r("svg",Xt,[...i[11]||(i[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])]))]),e("div",Zt,[e("p",es,x(v.name),1),e("p",ts," ç™¼ç…§æ—¥æœŸï¼š"+x(b(v.issued_at)),1)]),v.file_url?(l(),r("a",{key:0,href:v.file_url,target:"_blank",class:"flex-shrink-0 p-2 rounded-lg bg-primary-500/20 text-primary-500 hover:bg-primary-500/30 transition-colors",title:"æŸ¥çœ‹è­‰ç…§"},[...i[12]||(i[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,ss)):C("",!0)]))),128))])])):(l(),r("div",os,[...i[13]||(i[13]=[e("svg",{class:"w-5 h-5 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})],-1),e("span",{class:"text-slate-400"},"å°šæœªä¸Šå‚³ä»»ä½•è­‰ç…§",-1)])]))]),e("div",ls,[e("button",{onClick:i[1]||(i[1]=v=>u("close")),class:"w-full glass-btn py-3 rounded-xl font-medium"}," é—œé–‰ ")])])]))}}),is={class:"space-y-4"},as={class:"flex items-center justify-between"},rs={class:"mb-4"},ds=["disabled"],us={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},cs={key:1,class:"text-center py-12 text-slate-500 glass-card"},ms={key:2,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},vs={class:"flex items-start justify-between mb-3"},ps={class:"flex items-center gap-3"},fs={class:"w-12 h-12 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center"},xs={class:"text-lg font-bold text-white"},bs={class:"text-lg font-semibold text-slate-100"},gs={class:"text-sm text-slate-400"},ws=["onClick"],hs={class:"space-y-2"},ks={key:0,class:"flex flex-wrap gap-1"},ys={key:0,class:"text-xs text-slate-400"},_s={key:1,class:"flex items-center gap-2 text-sm text-slate-400"},$s={class:"flex items-center gap-2"},Cs={key:0,class:"mt-3 pt-3 border-t border-white/10 space-y-2"},Ms=["onClick"],js=["onClick"],Bs=I({__name:"TeachersTab",setup(y){const{error:h,confirm:u}=P(),c=k(!1),b=k(""),m=k({}),i=k(!1),v=k(null),n=k([]),s=J(()=>{if(!b.value)return n.value;const d=b.value.toLowerCase();return n.value.filter(t=>t.name?.toLowerCase().includes(d)||t.email?.toLowerCase().includes(d))}),f=async()=>{i.value=!0;try{const t=await z().get("/teachers");n.value=t.datas||[]}catch(d){console.error("Failed to fetch teachers:",d),n.value=[]}finally{i.value=!1}};A(()=>{f()});const g=d=>{v.value=d,m.value[d.id]=!1},H=async d=>{if(await u(`ç¢ºå®šè¦ç§»é™¤è€å¸«ã€Œ${d.name}ã€å—ï¼Ÿæ­¤æ“ä½œå°‡åˆªé™¤è©²è€å¸«çš„å¸³è™Ÿã€‚`))try{await z().delete(`/teachers/${d.id}`),await f(),m.value[d.id]=!1}catch(t){console.error("Failed to remove teacher:",t),await h("ç§»é™¤å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}};return(d,t)=>{const w=Ht,p=ns;return l(),r("div",is,[e("div",as,[t[4]||(t[4]=e("h2",{class:"text-xl font-semibold text-slate-100"},"è€å¸«åˆ—è¡¨",-1)),e("button",{onClick:t[0]||(t[0]=a=>c.value=!0),class:"btn-primary px-4 py-2 text-sm font-medium"}," + é‚€è«‹è€å¸« ")]),e("div",rs,[$(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>G(b)?b.value=a:null),type:"text",placeholder:"æœå°‹è€å¸«...",class:"input-field",disabled:o(i)},null,8,ds),[[T,o(b)]])]),o(i)?(l(),r("div",us,[(l(),r(j,null,B(6,a=>e("div",{key:a,class:"glass-card p-5"},[...t[5]||(t[5]=[E('<div class="animate-pulse"><div class="flex items-start justify-between mb-3"><div class="flex items-center gap-3"><div class="w-12 h-12 rounded-full bg-white/10"></div><div><div class="h-5 w-32 bg-white/10 rounded mb-2"></div><div class="h-4 w-48 bg-white/10 rounded"></div></div></div><div class="w-8 h-8 bg-white/10 rounded-lg"></div></div><div class="space-y-2"><div class="flex gap-2"><div class="h-6 w-16 bg-white/10 rounded-full"></div><div class="h-6 w-16 bg-white/10 rounded-full"></div><div class="h-6 w-16 bg-white/10 rounded-full"></div></div><div class="flex items-center gap-2"><div class="h-5 w-20 bg-white/10 rounded"></div></div></div></div>',1)])])),64))])):s.value.length===0?(l(),r("div",cs,[t[6]||(t[6]=e("svg",{class:"w-16 h-16 mx-auto mb-4 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20H2v-2a3 3 0 015.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),e("p",null,x(o(b)?"æ‰¾ä¸åˆ°ç¬¦åˆçš„è€å¸«":"å°šæœªæ·»åŠ è€å¸«"),1)])):(l(),r("div",ms,[(l(!0),r(j,null,B(s.value,a=>(l(),r("div",{key:a.id,class:"glass-card p-5 hover:bg-white/5 transition-all"},[e("div",vs,[e("div",ps,[e("div",fs,[e("span",xs,x(a.name?.charAt(0)),1)]),e("div",null,[e("h3",bs,x(a.name),1),e("p",gs,x(a.email),1)])]),e("button",{onClick:V=>o(m)[a.id]=!o(m)[a.id],class:"p-2 rounded-lg hover:bg-white/10 transition-colors"},[...t[7]||(t[7]=[e("svg",{class:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 19v.01M7 5h10M7 19h10"})],-1)])],8,ws)]),e("div",hs,[a.skills?(l(),r("div",ks,[(l(!0),r(j,null,B(a.skills.slice(0,3),(V,_)=>(l(),r("span",{key:_,class:"px-2 py-1 rounded-full text-xs font-medium bg-secondary-500/20 text-secondary-500"},x(V.skill_name),1))),128)),a.skills.length>3?(l(),r("span",ys," +"+x(a.skills.length-3)+" æ›´å¤š ",1)):C("",!0)])):C("",!0),a.certificates&&a.certificates.length>0?(l(),r("div",_s,[t[8]||(t[8]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})],-1)),R(" "+x(a.certificates.length)+" å¼µè­‰ç…§ ",1)])):C("",!0),e("div",$s,[e("span",{class:S(["px-2 py-1 rounded-full text-xs font-medium",a.is_active?"bg-success-500/20 text-success-500":"bg-warning-500/20 text-warning-500"])},x(a.is_active?"æ´»èºä¸­":"æœªæ´»èº"),3)])]),o(m)[a.id]?(l(),r("div",Cs,[e("button",{onClick:V=>g(a),class:"w-full glass-btn px-4 py-2 rounded-xl text-sm"}," æŸ¥çœ‹å€‹äººæª”æ¡ˆ ",8,Ms),e("button",{onClick:V=>H(a),class:"w-full glass-btn px-4 py-2 rounded-xl text-sm text-red-400 hover:bg-red-500/10"}," ç§»é™¤è€å¸« ",8,js)])):C("",!0)]))),128))])),o(c)?(l(),L(w,{key:3,onClose:t[2]||(t[2]=a=>c.value=!1),onInvited:f})):C("",!0),o(v)?(l(),L(p,{key:4,teacher:o(v),onClose:t[3]||(t[3]=a=>v.value=null)},null,8,["teacher"])):C("",!0)])}}}),Vs={class:"p-4 md:p-6 max-w-7xl mx-auto"},zs={class:"mb-6 flex flex-col sm:flex-row gap-3 overflow-x-auto pb-2"},Is=I({__name:"resources",setup(y){const h=k("rooms");return(u,c)=>(l(),r("div",Vs,[c[4]||(c[4]=e("div",{class:"mb-6 md:mb-8"},[e("h1",{class:"text-2xl md:text-3xl font-bold text-slate-100 mb-2"}," è³‡æºç®¡ç† "),e("p",{class:"text-slate-400 text-sm md:text-base"}," ç®¡ç†æ•™å®¤ã€èª²ç¨‹ã€å¾…æ’èª²ç¨‹ã€è€å¸« ")],-1)),e("div",zs,[e("button",{onClick:c[0]||(c[0]=b=>h.value="rooms"),class:S(["px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-colors",o(h)==="rooms"?"bg-primary-500/30 border border-primary-500 text-primary-400":"bg-white/5 text-slate-300 hover:bg-white/10"])}," æ•™å®¤ ",2),e("button",{onClick:c[1]||(c[1]=b=>h.value="courses"),class:S(["px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-colors",o(h)==="courses"?"bg-primary-500/30 border border-primary-500 text-primary-400":"bg-white/5 text-slate-300 hover:bg-white/10"])}," èª²ç¨‹ ",2),e("button",{onClick:c[2]||(c[2]=b=>h.value="offerings"),class:S(["px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-colors",o(h)==="offerings"?"bg-primary-500/30 border border-primary-500 text-primary-400":"bg-white/5 text-slate-300 hover:bg-white/10"])}," å¾…æ’èª²ç¨‹ ",2),e("button",{onClick:c[3]||(c[3]=b=>h.value="teachers"),class:S(["px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-colors",o(h)==="teachers"?"bg-primary-500/30 border border-primary-500 text-primary-400":"bg-white/5 text-slate-300 hover:bg-white/10"])}," è€å¸« ",2)]),o(h)==="rooms"?(l(),L(ge,{key:0})):o(h)==="courses"?(l(),L(Qe,{key:1})):o(h)==="offerings"?(l(),L(Ct,{key:2})):o(h)==="teachers"?(l(),L(Bs,{key:3})):C("",!0)]))}});export{Is as default};
