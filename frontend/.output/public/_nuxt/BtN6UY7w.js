import{g as I,r as h,D as N,c as r,o as n,x as M,a as e,t as x,y as $,z as H,n as o,B,l as F,G as S,p as C,d as O,F as V,v as T,m as E,s as L,H as R,O as G,A as J,q as Q}from"./ZcPQy5tI.js";import{a as U,u as P,c as q,b as Y}from"./DaFB5xze.js";import{u as A}from"./pFv8ODIQ.js";const W={class:"flex items-center justify-between p-4 border-b border-white/10"},K={class:"text-lg font-semibold text-slate-100"},X={class:"flex gap-3"},Z=["disabled"],ee=I({__name:"RoomModal",props:{room:{}},emits:["close","saved"],setup(y,{emit:w}){const u=y,c=w,a=h(!1),{getCenterId:m}=A(),b=h({name:u.room?.name||"",capacity:u.room?.capacity||1});N(()=>u.room,l=>{l?b.value={name:l.name,capacity:l.capacity}:b.value={name:"",capacity:1}});const k=async()=>{a.value=!0;try{const l=B(),s=m(),p={name:b.value.name,capacity:parseInt(b.value.capacity.toString())};u.room&&u.room.id?await l.put(`/admin/rooms/${u.room.id}`,p):await l.post("/admin/rooms",p),c("saved"),c("close")}catch(l){console.error("Failed to save room:",l),await U("å„²å­˜å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}finally{a.value=!1}};return(l,s)=>(n(),r("div",{class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:s[5]||(s[5]=M(p=>c("close"),["self"]))},[e("div",{class:"glass-card w-full max-w-md animate-spring",onClick:s[4]||(s[4]=M(()=>{},["stop"]))},[e("div",W,[e("h3",K,x(y.room?"ç·¨è¼¯æ•™å®¤":"æ–°å¢æ•™å®¤"),1),e("button",{onClick:s[0]||(s[0]=p=>c("close")),class:"p-2 rounded-lg hover:bg-white/10 transition-colors"},[...s[6]||(s[6]=[e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:M(k,["prevent"]),class:"p-4 space-y-4"},[e("div",null,[s[7]||(s[7]=e("label",{class:"block text-slate-300 mb-2 font-medium"},"æ•™å®¤åç¨±",-1)),$(e("input",{"onUpdate:modelValue":s[1]||(s[1]=p=>o(b).name=p),type:"text",placeholder:"ä¾‹ï¼šRoom A",class:"input-field",required:""},null,512),[[H,o(b).name]])]),e("div",null,[s[8]||(s[8]=e("label",{class:"block text-slate-300 mb-2 font-medium"},"å®¹é‡",-1)),$(e("input",{"onUpdate:modelValue":s[2]||(s[2]=p=>o(b).capacity=p),type:"number",min:"1",placeholder:"1",class:"input-field",required:""},null,512),[[H,o(b).capacity,void 0,{number:!0}]])]),e("div",X,[e("button",{onClick:s[3]||(s[3]=p=>c("close")),class:"flex-1 glass-btn py-3 rounded-xl font-medium"}," å–æ¶ˆ "),e("button",{type:"submit",disabled:o(a),class:"flex-1 btn-primary"},x(o(a)?"å„²å­˜ä¸­...":"å„²å­˜"),9,Z)])],32)])]))}}),te={class:"space-y-4"},se={class:"flex items-center justify-between"},oe={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},le={key:1,class:"text-center py-12 text-slate-500 glass-card"},ne={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ie={class:"flex items-start justify-between mb-3"},ae={class:"text-lg font-semibold text-slate-100 mb-1"},re={class:"text-sm text-slate-400"},de={class:"flex gap-2"},ue=["onClick"],ce=["onClick"],me={class:"space-y-2"},ve={class:"flex items-center gap-2"},pe={class:"text-sm font-medium text-slate-100"},fe={key:0,class:"flex flex-wrap gap-2"},xe={class:"flex items-center gap-2"},be={class:"text-xs text-slate-500 mt-3 pt-3 border-t border-white/10"},ge=I({__name:"RoomsTab",setup(y){const w=h(!1),u=h(!1),c=h(null),a=h(!1),{getCenterId:m}=A(),{error:b,confirm:k}=P(),l=h([]),s=async()=>{a.value=!0;try{const d=B(),t=m(),g=await d.get("/admin/rooms");l.value=g.datas||[]}catch(d){console.error("Failed to fetch rooms:",d),l.value=[]}finally{a.value=!1}};F(()=>{s()});const p=d=>{c.value={...d},u.value=!0},f=async d=>{if(await k("ç¢ºå®šè¦åˆªé™¤æ­¤æ•™å®¤ï¼Ÿ"))try{const t=B(),g=m();await t.delete(`/admin/rooms/${d}`),l.value=l.value.filter(v=>v.id!==d)}catch(t){console.error("Failed to delete room:",t),await b("åˆªé™¤å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}},z=d=>new Date(d).toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric"});return(d,t)=>{const g=ee;return n(),r("div",te,[e("div",se,[t[5]||(t[5]=e("h2",{class:"text-xl font-semibold text-slate-100"},"æ•™å®¤åˆ—è¡¨",-1)),e("button",{onClick:t[0]||(t[0]=v=>w.value=!0),class:"btn-primary px-4 py-2 text-sm font-medium flex items-center gap-2"},[...t[4]||(t[4]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),O(" æ–°å¢æ•™å®¤ ",-1)])])]),o(a)?(n(),r("div",oe,[(n(),r(V,null,T(6,v=>e("div",{key:v,class:"glass-card p-5"},[...t[6]||(t[6]=[E('<div class="animate-pulse"><div class="flex items-start justify-between mb-3"><div class="flex-1"><div class="h-5 w-32 bg-white/10 rounded mb-2"></div><div class="h-4 w-20 bg-white/10 rounded"></div></div><div class="flex gap-2"><div class="w-8 h-8 bg-white/10 rounded-lg"></div><div class="w-8 h-8 bg-white/10 rounded-lg"></div></div></div><div class="space-y-2"><div class="flex items-center gap-2"><div class="w-5 h-5 bg-white/10 rounded"></div><div class="h-4 w-16 bg-white/10 rounded"></div></div><div class="flex gap-2"><div class="h-6 w-16 bg-white/10 rounded-full"></div><div class="h-6 w-16 bg-white/10 rounded-full"></div></div></div><div class="mt-3 pt-3 border-t border-white/10"><div class="h-3 w-24 bg-white/10 rounded"></div></div></div>',1)])])),64))])):o(l).length===0?(n(),r("div",le,[t[7]||(t[7]=e("svg",{class:"w-16 h-16 mx-auto mb-4 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),t[8]||(t[8]=e("p",{class:"mb-4"},"å°šæœªæ·»åŠ æ•™å®¤",-1)),e("button",{onClick:t[1]||(t[1]=v=>w.value=!0),class:"px-4 py-2 rounded-lg bg-primary-500 text-white hover:bg-primary-600 transition-colors"}," æ–°å¢ç¬¬ä¸€é–“æ•™å®¤ ")])):(n(),r("div",ne,[(n(!0),r(V,null,T(o(l),v=>(n(),r("div",{key:v.id,class:"glass-card p-5 hover:bg-white/5 transition-all"},[e("div",ie,[e("div",null,[e("h3",ae,x(v.name),1),e("p",re,"Room "+x(v.id),1)]),e("div",de,[e("button",{onClick:i=>p(v),class:"p-2 rounded-lg hover:bg-white/10 transition-colors"},[...t[9]||(t[9]=[e("svg",{class:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 0L21.828 3.172a2 2 0 010-2.828l-7-7a2 2 0 00-2.828 0L2.172 20.828a2 2 0 010 2.828l7 7a2 2 0 0012.828 0l7.172-7.172z"})],-1)])],8,ue),e("button",{onClick:i=>f(v.id),class:"p-2 rounded-lg hover:bg-critical-500/20 text-critical-500 transition-colors"},[...t[10]||(t[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ce)])]),e("div",me,[e("div",ve,[t[11]||(t[11]=e("svg",{class:"w-5 h-5 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20H2v-2a3 3 0 015.356-1.857m0 0a5 5 0 0111 0 5 5 0 0111 0z"})],-1)),t[12]||(t[12]=e("span",{class:"text-sm text-slate-400"},"å®¹é‡",-1)),e("span",pe,x(v.capacity)+" äºº",1)]),v.equipment?(n(),r("div",fe,[(n(!0),r(V,null,T(v.equipment,(i,j)=>(n(),r("span",{key:j,class:"px-2 py-1 rounded-full text-xs font-medium bg-secondary-500/20 text-secondary-500"},x(i),1))),128))])):C("",!0),e("div",xe,[t[13]||(t[13]=e("svg",{class:"w-5 h-5 text-success-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",{class:L(["px-2 py-1 rounded-full text-xs font-medium",v.status==="ACTIVE"?"bg-success-500/20 text-success-500":v.status==="BUSY"?"bg-warning-500/20 text-warning-500":"bg-slate-500/20 text-slate-400"])},x(v.status==="ACTIVE"?"å¯ä½¿ç”¨":v.status==="BUSY"?"ä½¿ç”¨ä¸­":"ç¶­ä¿®ä¸­"),3)])]),e("div",be," å‰µå»ºæ–¼ï¼š"+x(z(v.created_at)),1)]))),128))])),o(w)?(n(),S(g,{key:3,room:null,onClose:t[2]||(t[2]=v=>w.value=!1),onSaved:s})):C("",!0),o(u)?(n(),S(g,{key:4,room:o(c),onClose:t[3]||(t[3]=v=>u.value=!1),onSaved:s},null,8,["room"])):C("",!0)])}}}),we={class:"flex items-center justify-between p-4 border-b border-white/10 sticky top-0 bg-slate-900/95 backdrop-blur-sm z-10"},he={class:"text-lg font-semibold text-slate-100"},ke={class:"grid grid-cols-2 gap-4"},ye={class:"flex items-center gap-2"},_e={class:"flex items-center gap-2"},$e={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Ce={class:"flex items-center gap-2"},Me={class:"flex items-center gap-2"},je={class:"flex gap-3 pt-2"},Be=["disabled"],Ve=I({__name:"CourseModal",props:{course:{}},emits:["close","saved"],setup(y,{emit:w}){const u=y,c=w,a=h(!1);A();const m=h({name:u.course?.name||"",duration:u.course?.default_duration||60,color_hex:u.course?.color_hex||"#3B82F6",teacher_buffer_min:u.course?.teacher_buffer_min||10,room_buffer_min:u.course?.room_buffer_min||5});N(()=>u.course,k=>{k?m.value={name:k.name,duration:k.default_duration||60,color_hex:k.color_hex||"#3B82F6",teacher_buffer_min:k.teacher_buffer_min,room_buffer_min:k.room_buffer_min}:m.value={name:"",duration:60,color_hex:"#3B82F6",teacher_buffer_min:10,room_buffer_min:5}},{immediate:!0});const b=async()=>{a.value=!0;try{const k=B(),l={name:m.value.name,duration:m.value.duration,color_hex:m.value.color_hex,teacher_buffer_min:m.value.teacher_buffer_min,room_buffer_min:m.value.room_buffer_min};u.course&&u.course.id?(await k.put(`/admin/courses/${u.course.id}`,l),await q("èª²ç¨‹æ›´æ–°æˆåŠŸ")):(await k.post("/admin/courses",l),await q("èª²ç¨‹å»ºç«‹æˆåŠŸ")),c("saved"),c("close")}catch(k){console.error("Failed to save course:",k),await U("å„²å­˜å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}finally{a.value=!1}};return(k,l)=>(n(),r("div",{class:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:l[9]||(l[9]=M(s=>c("close"),["self"]))},[e("div",{class:"glass-card w-full max-w-md sm:max-w-lg max-h-[90vh] overflow-y-auto animate-spring",onClick:l[8]||(l[8]=M(()=>{},["stop"]))},[e("div",we,[e("h3",he,x(y.course?"ç·¨è¼¯èª²ç¨‹":"æ–°å¢èª²ç¨‹"),1),e("button",{onClick:l[0]||(l[0]=s=>c("close")),class:"p-2 rounded-lg hover:bg-white/10 transition-colors"},[...l[10]||(l[10]=[e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:M(b,["prevent"]),class:"p-4 space-y-4"},[e("div",null,[l[11]||(l[11]=e("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},"èª²ç¨‹åç¨±",-1)),$(e("input",{"onUpdate:modelValue":l[1]||(l[1]=s=>o(m).name=s),type:"text",placeholder:"ä¾‹ï¼šé‹¼ç´åŸºç¤",class:"input-field text-sm sm:text-base",required:""},null,512),[[H,o(m).name]])]),e("div",ke,[e("div",null,[l[13]||(l[13]=e("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},"èª²ç¨‹æ™‚é•·",-1)),e("div",ye,[$(e("input",{"onUpdate:modelValue":l[2]||(l[2]=s=>o(m).duration=s),type:"number",min:"15",step:"15",placeholder:"60",class:"input-field text-sm sm:text-base",required:""},null,512),[[H,o(m).duration,void 0,{number:!0}]]),l[12]||(l[12]=e("span",{class:"text-sm text-slate-400"},"åˆ†é˜",-1))])]),e("div",null,[l[14]||(l[14]=e("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},"èª²ç¨‹é¡è‰²",-1)),e("div",_e,[$(e("input",{"onUpdate:modelValue":l[3]||(l[3]=s=>o(m).color_hex=s),type:"color",class:"w-10 h-10 rounded-lg cursor-pointer border border-white/20",required:""},null,512),[[H,o(m).color_hex]]),$(e("input",{"onUpdate:modelValue":l[4]||(l[4]=s=>o(m).color_hex=s),type:"text",placeholder:"#3B82F6",class:"input-field text-sm sm:text-base flex-1",required:""},null,512),[[H,o(m).color_hex]])])])]),e("div",$e,[e("div",null,[l[16]||(l[16]=e("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},"è€å¸«ç·©è¡æ™‚é–“",-1)),e("div",Ce,[$(e("input",{"onUpdate:modelValue":l[5]||(l[5]=s=>o(m).teacher_buffer_min=s),type:"number",min:"0",placeholder:"10",class:"input-field text-sm sm:text-base",required:""},null,512),[[H,o(m).teacher_buffer_min,void 0,{number:!0}]]),l[15]||(l[15]=e("span",{class:"text-sm text-slate-400"},"åˆ†é˜",-1))])]),e("div",null,[l[18]||(l[18]=e("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},"æ•™å®¤ç·©è¡æ™‚é–“",-1)),e("div",Me,[$(e("input",{"onUpdate:modelValue":l[6]||(l[6]=s=>o(m).room_buffer_min=s),type:"number",min:"0",placeholder:"5",class:"input-field text-sm sm:text-base",required:""},null,512),[[H,o(m).room_buffer_min,void 0,{number:!0}]]),l[17]||(l[17]=e("span",{class:"text-sm text-slate-400"},"åˆ†é˜",-1))])])]),l[19]||(l[19]=e("div",{class:"p-3 rounded-xl bg-slate-700/30 border border-white/10"},[e("p",{class:"text-sm text-slate-300"},[e("span",{class:"font-medium text-slate-400"},"ğŸ’¡ æç¤ºï¼š"),O(" ç·©è¡æ™‚é–“æ˜¯é€£çºŒèª²ç¨‹ä¹‹é–“çš„é–“éš”æ™‚é–“ ")])],-1)),e("div",je,[e("button",{type:"button",onClick:l[7]||(l[7]=s=>c("close")),class:"flex-1 glass-btn py-2.5 sm:py-3 rounded-xl font-medium text-sm sm:text-base"}," å–æ¶ˆ "),e("button",{type:"submit",disabled:o(a),class:"flex-1 btn-primary py-2.5 sm:py-3 rounded-xl font-medium text-sm sm:text-base"},x(o(a)?"å„²å­˜ä¸­...":"å„²å­˜"),9,Be)])],32)])]))}}),Te={class:"space-y-4"},ze={class:"flex items-center justify-between"},He={class:"flex items-center gap-3"},Se={class:"text-sm text-slate-500"},Ie={class:"flex items-center gap-2"},Le={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Ue={key:1,class:"text-center py-12 text-slate-500 glass-card"},Ae={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Fe={class:"flex items-start justify-between mb-3"},Re={class:"flex-1"},Ee={class:"text-lg font-semibold text-slate-100"},De={class:"text-sm text-slate-400 mt-1"},qe={class:"flex items-center gap-1"},Oe=["onClick"],Ne=["onClick"],Pe={class:"space-y-2"},Ye={class:"flex items-center gap-2"},Ge={class:"text-sm font-medium text-slate-100"},Je={class:"flex items-center gap-2"},Qe={class:"text-sm font-medium text-slate-100"},We=I({__name:"CoursesTab",setup(y){const w=h(!1),u=h(!1),c=h(null),a=h(!1),{getCenterId:m}=A(),b=h([]),k=async()=>{a.value=!0;try{const f=await B().get("/admin/courses");b.value=f.datas||[]}catch(p){console.error("Failed to fetch courses:",p),b.value=[];const f=p?.response?.data?.message||p?.message||"ç„¡æ³•è¼‰å…¥èª²ç¨‹åˆ—è¡¨ï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·š";await U(f)}finally{a.value=!1}};F(()=>{k()});const l=p=>{c.value={...p},u.value=!0},s=async p=>{if(await Y(`ç¢ºå®šè¦åˆªé™¤èª²ç¨‹ã€Œ${p.name}ã€å—ï¼Ÿ`))try{const f=B(),z=m();await f.delete(`/admin/courses/${p.id}`),await k()}catch(f){console.error("Failed to delete course:",f),await U("åˆªé™¤å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}};return(p,f)=>{const z=Ve;return n(),r("div",Te,[e("div",ze,[e("div",He,[f[3]||(f[3]=e("h2",{class:"text-xl font-semibold text-slate-100"},"èª²ç¨‹åˆ—è¡¨",-1)),e("span",Se,"("+x(o(b).length)+")",1)]),e("div",Ie,[e("button",{onClick:k,class:"p-2 rounded-lg hover:bg-white/10 transition-colors",title:"é‡æ–°æ•´ç†"},[(n(),r("svg",{class:L(["w-5 h-5 text-slate-400",{"animate-spin":o(a)}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...f[4]||(f[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2))]),e("button",{onClick:f[0]||(f[0]=d=>w.value=!0),class:"btn-primary px-4 py-2 text-sm font-medium"}," + æ–°å¢èª²ç¨‹ ")])]),o(a)?(n(),r("div",Le,[(n(),r(V,null,T(6,d=>e("div",{key:d,class:"glass-card p-5"},[...f[5]||(f[5]=[E('<div class="animate-pulse"><div class="flex items-start justify-between mb-3"><div class="flex-1"><div class="h-5 w-32 bg-white/10 rounded mb-2"></div><div class="h-4 w-20 bg-white/10 rounded"></div></div><div class="flex gap-2"><div class="w-8 h-8 bg-white/10 rounded-lg"></div><div class="w-8 h-8 bg-white/10 rounded-lg"></div></div></div><div class="space-y-2"><div class="flex items-center gap-2"><div class="w-5 h-5 bg-white/10 rounded"></div><div class="h-4 w-20 bg-white/10 rounded"></div></div><div class="flex items-center gap-2"><div class="w-5 h-5 bg-white/10 rounded"></div><div class="h-4 w-20 bg-white/10 rounded"></div></div></div></div>',1)])])),64))])):o(b).length===0?(n(),r("div",Ue,[...f[6]||(f[6]=[e("svg",{class:"w-16 h-16 mx-auto text-slate-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})],-1),e("p",{class:"text-lg mb-2"},"å°šæœªæ·»åŠ èª²ç¨‹",-1),e("p",{class:"text-sm text-slate-500"},"é»æ“Šä¸Šæ–¹æŒ‰éˆ•æ–°å¢ç¬¬ä¸€å€‹èª²ç¨‹",-1)])])):(n(),r("div",Ae,[(n(!0),r(V,null,T(o(b),d=>(n(),r("div",{key:d.id,class:"glass-card p-5 hover:bg-white/5 transition-all"},[e("div",Fe,[e("div",Re,[e("h3",Ee,x(d.name),1),e("p",De,"Course ID: "+x(d.id),1)]),e("div",qe,[e("button",{onClick:t=>l(d),class:"p-2 rounded-lg hover:bg-white/10 transition-colors",title:"ç·¨è¼¯"},[...f[7]||(f[7]=[e("svg",{class:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 0L21.828 5.172a2 2 0 010-2.828l-7.414-7.414a2 2 0 00-2.828 0L2.172 15.828a2 2 0 010 2.828l7.414 7.414a2 2 0 002.828 0z"})],-1)])],8,Oe),e("button",{onClick:t=>s(d),class:"p-2 rounded-lg hover:bg-red-500/20 transition-colors",title:"åˆªé™¤"},[...f[8]||(f[8]=[e("svg",{class:"w-4 h-4 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ne)])]),e("div",Pe,[e("div",Ye,[f[9]||(f[9]=e("svg",{class:"w-5 h-5 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0zm-9 9h.01"})],-1)),f[10]||(f[10]=e("span",{class:"text-sm text-slate-300"},"è€å¸«ç·©è¡",-1)),e("span",Ge,x(d.teacher_buffer_min)+" åˆ†é˜",1)]),e("div",Je,[f[11]||(f[11]=e("svg",{class:"w-5 h-5 text-secondary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H9"})],-1)),f[12]||(f[12]=e("span",{class:"text-sm text-slate-300"},"æ•™å®¤ç·©è¡",-1)),e("span",Qe,x(d.room_buffer_min)+" åˆ†é˜",1)])])]))),128))])),o(w)?(n(),S(z,{key:3,course:null,onClose:f[1]||(f[1]=d=>w.value=!1),onSaved:k})):C("",!0),o(u)?(n(),S(z,{key:4,course:o(c),onClose:f[2]||(f[2]=d=>u.value=!1),onSaved:k},null,8,["course"])):C("",!0)])}}}),Ke={class:"flex items-center justify-between p-4 border-b border-white/10 sticky top-0 bg-slate-900/95 backdrop-blur-sm z-10"},Xe={class:"text-lg font-semibold text-slate-100"},Ze={key:0,class:"p-8 text-center"},et=["value"],tt=["value"],st=["value"],ot={class:"flex items-center gap-2"},lt={class:"flex gap-3 pt-2"},nt=["disabled"],it=I({__name:"OfferingModal",props:{offering:{}},emits:["close","saved"],setup(y,{emit:w}){const u=y,c=w,a=h(!0),m=h(!1),b=h([]),k=h([]),l=h([]),s=h({course_id:"",name:"",default_teacher_id:null,default_room_id:null,allow_buffer_override:!1}),{getCenterId:p}=A(),f=async()=>{try{const d=B(),t=p(),[g,v,i]=await Promise.all([d.get("/admin/courses"),d.get("/teachers"),d.get("/admin/rooms")]);b.value=g.datas||[],k.value=v.datas||[],l.value=i.datas||[],u.offering&&(s.value={course_id:u.offering.course_id||"",name:u.offering.name||"",default_teacher_id:u.offering.default_teacher_id||null,default_room_id:u.offering.default_room_id||null,allow_buffer_override:u.offering.allow_buffer_override||!1})}catch(d){console.error("Failed to fetch data:",d)}finally{a.value=!1}},z=async()=>{m.value=!0;try{const d=B(),t=p(),g={course_id:parseInt(s.value.course_id),name:s.value.name||null,default_teacher_id:s.value.default_teacher_id,default_room_id:s.value.default_room_id,allow_buffer_override:s.value.allow_buffer_override};u.offering?await d.put(`/admin/offerings/${u.offering.id}`,g):await d.post("/admin/offerings",g),c("saved"),c("close")}catch(d){console.error("Failed to save offering:",d),await U("å„²å­˜å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}finally{m.value=!1}};return F(()=>{f()}),(d,t)=>(n(),r("div",{class:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:t[8]||(t[8]=M(g=>c("close"),["self"]))},[e("div",{class:"glass-card w-full max-w-md max-h-[90vh] overflow-y-auto animate-spring",onClick:t[7]||(t[7]=M(()=>{},["stop"]))},[e("div",Ke,[e("h3",Xe,x(y.offering?"ç·¨è¼¯å¾…æ’èª²ç¨‹":"æ–°å¢å¾…æ’èª²ç¨‹"),1),e("button",{onClick:t[0]||(t[0]=g=>c("close")),class:"p-2 rounded-lg hover:bg-white/10 transition-colors"},[...t[9]||(t[9]=[e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),o(a)?(n(),r("div",Ze,[...t[10]||(t[10]=[e("div",{class:"inline-flex items-center gap-2 text-slate-400"},[e("svg",{class:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("span",null,"è¼‰å…¥ä¸­...")],-1)])])):(n(),r("form",{key:1,onSubmit:M(z,["prevent"]),class:"p-4 space-y-4"},[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-slate-300 mb-2 font-medium text-sm"},"èª²ç¨‹",-1)),$(e("select",{"onUpdate:modelValue":t[1]||(t[1]=g=>o(s).course_id=g),class:"input-field text-sm",required:""},[t[11]||(t[11]=e("option",{value:""},"è«‹é¸æ“‡èª²ç¨‹",-1)),(n(!0),r(V,null,T(o(b),g=>(n(),r("option",{key:g.id,value:g.id},x(g.name),9,et))),128))],512),[[R,o(s).course_id]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-slate-300 mb-2 font-medium text-sm"},"åç¨±ï¼ˆå¯é¸ï¼‰",-1)),$(e("input",{"onUpdate:modelValue":t[2]||(t[2]=g=>o(s).name=g),type:"text",placeholder:"ä¾‹ï¼šé€±ä¸€é‹¼ç´ç­",class:"input-field text-sm"},null,512),[[H,o(s).name]]),t[14]||(t[14]=e("p",{class:"text-xs text-slate-500 mt-1"},"ç•™ç©ºå°‡è‡ªå‹•ä½¿ç”¨èª²ç¨‹åç¨±",-1))]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-slate-300 mb-2 font-medium text-sm"},"é è¨­è€å¸«ï¼ˆå¯é¸ï¼‰",-1)),$(e("select",{"onUpdate:modelValue":t[3]||(t[3]=g=>o(s).default_teacher_id=g),class:"input-field text-sm"},[t[15]||(t[15]=e("option",{value:null},"æœªæŒ‡å®š",-1)),(n(!0),r(V,null,T(o(k),g=>(n(),r("option",{key:g.id,value:g.id},x(g.name),9,tt))),128))],512),[[R,o(s).default_teacher_id]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-slate-300 mb-2 font-medium text-sm"},"é è¨­æ•™å®¤ï¼ˆå¯é¸ï¼‰",-1)),$(e("select",{"onUpdate:modelValue":t[4]||(t[4]=g=>o(s).default_room_id=g),class:"input-field text-sm"},[t[17]||(t[17]=e("option",{value:null},"æœªæŒ‡å®š",-1)),(n(!0),r(V,null,T(o(l),g=>(n(),r("option",{key:g.id,value:g.id},x(g.name),9,st))),128))],512),[[R,o(s).default_room_id]])]),e("div",ot,[$(e("input",{type:"checkbox",id:"allow_buffer_override","onUpdate:modelValue":t[5]||(t[5]=g=>o(s).allow_buffer_override=g),class:"w-4 h-4 rounded bg-slate-800 border-slate-600 text-primary-500 focus:ring-primary-500"},null,512),[[G,o(s).allow_buffer_override]]),t[19]||(t[19]=e("label",{for:"allow_buffer_override",class:"text-sm text-slate-300"}," å…è¨±è¦†è“‹ç·©è¡æ™‚é–“ ",-1))]),e("div",lt,[e("button",{type:"button",onClick:t[6]||(t[6]=g=>c("close")),class:"flex-1 glass-btn py-2.5 rounded-xl font-medium text-sm"}," å–æ¶ˆ "),e("button",{type:"submit",disabled:o(m),class:"flex-1 btn-primary py-2.5 rounded-xl font-medium text-sm"},x(o(m)?"å„²å­˜ä¸­...":"å„²å­˜"),9,nt)])],32))])]))}}),at={class:"space-y-4"},rt={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},dt={key:1,class:"text-center py-12 text-slate-500 glass-card"},ut={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ct=["onDragstart"],mt={class:"flex items-start justify-between mb-3"},vt={class:"text-lg font-semibold text-slate-100 mb-1"},pt={class:"text-sm text-slate-400"},ft={class:"flex gap-1"},xt=["onClick"],bt=["onClick"],gt={key:0,class:"text-sm text-slate-300 mb-1"},wt={class:"text-slate-100"},ht={key:1,class:"text-sm text-slate-500 mb-1"},kt={key:2,class:"text-sm text-slate-300"},yt={class:"text-slate-100"},_t={key:3,class:"text-sm text-slate-500"},$t={key:4,class:"text-xs text-warning-500 mt-1"},Ct=I({__name:"OfferingsTab",setup(y){const w=h(!1),u=h(null),c=h([]),a=h(!1),m=h(new Map),b=h(new Map),{getCenterId:k}=A(),l=(v,i)=>{i.dataTransfer?.setData("application/json",JSON.stringify({type:"offering",item:v})),i.dataTransfer.effectAllowed="copy"},s=v=>m.value.get(v)?.name||`è€å¸« ${v}`,p=v=>b.value.get(v)?.name||`æ•™å®¤ ${v}`,f=async()=>{try{const v=B(),[i,j]=await Promise.all([v.get("/teachers"),v.get("/admin/rooms")]);i.datas?.forEach(_=>{m.value.set(_.id,_)}),j.datas?.forEach(_=>{b.value.set(_.id,_)})}catch(v){console.error("Failed to fetch resources:",v)}},z=async()=>{a.value=!0;try{const v=B(),i=k(),j=await v.get("/admin/offerings");j.datas?.offerings?c.value=j.datas.offerings:c.value=[]}catch(v){console.error("Failed to fetch offerings:",v),c.value=[]}finally{a.value=!1}},d=v=>{u.value=v,w.value=!0},t=()=>{u.value=null,w.value=!0},g=async v=>{if(await Y(`ç¢ºå®šè¦åˆªé™¤å¾…æ’èª²ç¨‹ã€Œ${v.name}ã€å—ï¼Ÿ`))try{const i=B(),j=k();await i.delete(`/admin/offerings/${v.id}`),await z()}catch(i){console.error("Failed to delete offering:",i),await U("åˆªé™¤å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}};return F(()=>{f(),z()}),(v,i)=>{const j=it;return n(),r("div",at,[e("div",{class:"flex items-center justify-between"},[i[2]||(i[2]=e("h2",{class:"text-xl font-semibold text-slate-100"},"å¾…æ’èª²ç¨‹",-1)),e("button",{onClick:t,class:"btn-primary px-4 py-2 text-sm font-medium flex items-center gap-2"},[...i[1]||(i[1]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),O(" æ–°å¢å¾…æ’èª²ç¨‹ ",-1)])])]),o(a)?(n(),r("div",rt,[(n(),r(V,null,T(6,_=>e("div",{key:_,class:"glass-card p-5"},[...i[3]||(i[3]=[E('<div class="animate-pulse"><div class="flex items-start justify-between mb-3"><div class="flex-1"><div class="h-5 w-40 bg-white/10 rounded mb-2"></div><div class="h-4 w-24 bg-white/10 rounded"></div></div><div class="flex gap-2"><div class="w-8 h-8 bg-white/10 rounded-lg"></div><div class="w-8 h-8 bg-white/10 rounded-lg"></div></div></div><div class="space-y-2"><div class="h-4 w-32 bg-white/10 rounded"></div><div class="h-4 w-32 bg-white/10 rounded"></div></div></div>',1)])])),64))])):o(c).length===0?(n(),r("div",dt,[i[4]||(i[4]=e("svg",{class:"w-16 h-16 mx-auto mb-4 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),i[5]||(i[5]=e("p",{class:"mb-4"},"å°šæœªæ·»åŠ å¾…æ’èª²ç¨‹",-1)),e("button",{onClick:t,class:"px-4 py-2 rounded-lg bg-primary-500 text-white hover:bg-primary-600 transition-colors"}," æ–°å¢ç¬¬ä¸€å€‹å¾…æ’èª²ç¨‹ ")])):(n(),r("div",ut,[(n(!0),r(V,null,T(o(c),_=>(n(),r("div",{key:_.id,class:"glass-card p-5 hover:bg-white/5 transition-all cursor-pointer",draggable:"true",onDragstart:D=>l(_,D)},[e("div",mt,[e("div",null,[e("h3",vt,x(_.name),1),e("p",pt,"Course ID: "+x(_.course_id),1)]),e("div",ft,[e("button",{onClick:M(D=>d(_),["stop"]),class:"p-2 rounded-lg hover:bg-white/10 transition-colors",title:"ç·¨è¼¯"},[...i[6]||(i[6]=[e("svg",{class:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 0L21.828 3.172a2 2 0 010-2.828l-7-7a2 2 0 00-2.828 0L2.172 20.828a2 2 0 010 2.828l7 7a2 2 0 0012.828 0l7.172-7.172z"})],-1)])],8,xt),e("button",{onClick:M(D=>g(_),["stop"]),class:"p-2 rounded-lg hover:bg-red-500/20 transition-colors",title:"åˆªé™¤"},[...i[7]||(i[7]=[e("svg",{class:"w-4 h-4 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,bt)])]),_.default_teacher_id?(n(),r("p",gt,[i[8]||(i[8]=e("span",{class:"text-slate-400"},"é è¨­è€å¸«ï¼š",-1)),e("span",wt,x(s(_.default_teacher_id)),1)])):(n(),r("p",ht,[...i[9]||(i[9]=[e("span",{class:"text-slate-400"},"é è¨­è€å¸«ï¼š",-1),e("span",null,"æœªæŒ‡å®š",-1)])])),_.default_room_id?(n(),r("p",kt,[i[10]||(i[10]=e("span",{class:"text-slate-400"},"é è¨­æ•™å®¤ï¼š",-1)),e("span",yt,x(p(_.default_room_id)),1)])):(n(),r("p",_t,[...i[11]||(i[11]=[e("span",{class:"text-slate-400"},"é è¨­æ•™å®¤ï¼š",-1),e("span",null,"æœªæŒ‡å®š",-1)])])),_.allow_buffer_override?C("",!0):(n(),r("p",$t," âš ï¸ ä¸å…è¨±è¦†è“‹ç·©è¡æ™‚é–“ "))],40,ct))),128))])),o(w)?(n(),S(j,{key:3,offering:o(u),onClose:i[0]||(i[0]=_=>{w.value=!1,u.value=null}),onSaved:z},null,8,["offering"])):C("",!0)])}}}),Mt={class:"flex items-center justify-between p-4 border-b border-white/10"},jt={key:0,class:"p-3 rounded-xl bg-success-500/10 border border-success-500/20"},Bt=["value"],Vt={class:"flex gap-3"},Tt=["disabled"],zt=I({__name:"TeacherInviteModal",emits:["close","invited"],setup(y,{emit:w}){const u=w,c=h(!1),a=h(""),{getCenterId:m}=A(),b=h({email:"",role:"TEACHER",message:""}),k=async()=>{c.value=!0;try{const l=B(),s=m(),p=await l.post("/admin/invitations",{email:b.value.email,role:b.value.role,message:b.value.message});p&&p.token?a.value=`${window.location.origin}/register?token=${p.token}&center=${s}`:(u("invited"),u("close"),await q("é‚€è«‹å·²ç™¼é€ï¼"))}catch(l){console.error("Failed to send invitation:",l),await U("ç™¼é€å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}finally{c.value=!1}};return(l,s)=>(n(),r("div",{class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:s[7]||(s[7]=M(p=>u("close"),["self"]))},[e("div",{class:"glass-card w-full max-w-md animate-spring",onClick:s[6]||(s[6]=M(()=>{},["stop"]))},[e("div",Mt,[s[9]||(s[9]=e("h3",{class:"text-lg font-semibold text-slate-100"},"é‚€è«‹è€å¸«",-1)),e("button",{onClick:s[0]||(s[0]=p=>u("close")),class:"p-2 rounded-lg hover:bg-white/10 transition-colors"},[...s[8]||(s[8]=[e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:M(k,["prevent"]),class:"p-4 space-y-4"},[e("div",null,[s[10]||(s[10]=e("label",{class:"block text-slate-300 mb-2 font-medium"},"è€å¸« Email",-1)),$(e("input",{"onUpdate:modelValue":s[1]||(s[1]=p=>o(b).email=p),type:"email",placeholder:"teacher@example.com",class:"input-field",required:""},null,512),[[H,o(b).email]])]),e("div",null,[s[12]||(s[12]=e("label",{class:"block text-slate-300 mb-2 font-medium"},"è§’è‰²",-1)),$(e("select",{"onUpdate:modelValue":s[2]||(s[2]=p=>o(b).role=p),class:"input-field"},[...s[11]||(s[11]=[e("option",{value:"TEACHER"},"è€å¸«",-1),e("option",{value:"SUBSTITUTE"},"ä»£èª²è€å¸«",-1)])],512),[[R,o(b).role]])]),o(a)?(n(),r("div",jt,[s[13]||(s[13]=e("p",{class:"text-sm text-success-500 font-medium mb-1"},"é‚€è«‹é€£çµå·²å»ºç«‹ï¼",-1)),e("input",{value:o(a),readonly:"",class:"input-field text-xs bg-slate-800",onClick:s[3]||(s[3]=p=>p.target?.select())},null,8,Bt),s[14]||(s[14]=e("p",{class:"text-xs text-slate-400 mt-1"},"é€£çµå°‡åœ¨ 72 å°æ™‚å¾ŒéæœŸ",-1))])):C("",!0),e("div",null,[s[15]||(s[15]=e("label",{class:"block text-slate-300 mb-2 font-medium"},"é‚€è«‹è¨Šæ¯",-1)),$(e("textarea",{"onUpdate:modelValue":s[4]||(s[4]=p=>o(b).message=p),placeholder:"æ­¡è¿åŠ å…¥æˆ‘å€‘çš„ä¸­å¿ƒ...",rows:"3",class:"input-field resize-none"},null,512),[[H,o(b).message]])]),e("div",Vt,[e("button",{onClick:s[5]||(s[5]=p=>u("close")),class:"flex-1 glass-btn py-3 rounded-xl font-medium"}," å–æ¶ˆ "),e("button",{type:"submit",disabled:o(c),class:"flex-1 btn-primary"},x(o(c)?"ç™¼é€ä¸­...":"ç™¼é€é‚€è«‹"),9,Tt)])],32)])]))}}),Ht={class:"flex items-center justify-between p-4 border-b border-white/10"},St={class:"p-4 space-y-4"},It={class:"flex items-center gap-4"},Lt={class:"w-16 h-16 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center"},Ut={class:"text-2xl font-bold text-white"},At={class:"text-xl font-semibold text-slate-100"},Ft={class:"space-y-3"},Rt={class:"flex items-center gap-3 p-3 rounded-lg bg-white/5"},Et={class:"text-slate-300"},Dt={class:"flex items-center gap-3 p-3 rounded-lg bg-white/5"},qt={class:"text-slate-300"},Ot={class:"flex items-center gap-3 p-3 rounded-lg bg-white/5"},Nt={class:"text-slate-300"},Pt={key:0},Yt={class:"flex flex-wrap gap-2"},Gt={class:"flex items-center justify-between p-3 rounded-lg bg-white/5"},Jt={class:"text-lg font-semibold text-slate-100"},Qt={class:"p-4 border-t border-white/10"},Wt=I({__name:"AdminTeacherProfileModal",props:{teacher:{}},emits:["close"],setup(y,{emit:w}){const u=w;return(c,a)=>(n(),r("div",{class:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:a[3]||(a[3]=M(m=>u("close"),["self"]))},[e("div",{class:"glass-card w-full max-w-md max-h-[90vh] overflow-y-auto animate-spring",onClick:a[2]||(a[2]=M(()=>{},["stop"]))},[e("div",Ht,[a[5]||(a[5]=e("h3",{class:"text-lg font-semibold text-slate-100"}," è€å¸«æª”æ¡ˆ ",-1)),e("button",{onClick:a[0]||(a[0]=m=>u("close")),class:"p-2 rounded-lg hover:bg-white/10 transition-colors"},[...a[4]||(a[4]=[e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",St,[e("div",It,[e("div",Lt,[e("span",Ut,x(y.teacher?.name?.charAt(0)||"?"),1)]),e("div",null,[e("h4",At,x(y.teacher?.name),1),e("span",{class:L(["px-2 py-1 rounded-full text-xs font-medium",y.teacher?.is_active?"bg-success-500/20 text-success-500":"bg-warning-500/20 text-warning-500"])},x(y.teacher?.is_active?"æ´»èºä¸­":"æœªæ´»èº"),3)])]),e("div",Ft,[e("div",Rt,[a[6]||(a[6]=e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),e("span",Et,x(y.teacher?.email||"æœªè¨­å®š"),1)]),e("div",Dt,[a[7]||(a[7]=e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),e("span",qt,x(y.teacher?.phone||"æœªè¨­å®š"),1)]),e("div",Ot,[a[8]||(a[8]=e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),e("span",Nt,x(y.teacher?.city||"æœªè¨­å®š")+" "+x(y.teacher?.district||""),1)])]),y.teacher?.skills?.length>0?(n(),r("div",Pt,[a[9]||(a[9]=e("h5",{class:"text-sm font-medium text-slate-400 mb-2"},"æŠ€èƒ½å°ˆé•·",-1)),e("div",Yt,[(n(!0),r(V,null,T(y.teacher.skills,m=>(n(),r("span",{key:m.id,class:"px-3 py-1.5 rounded-full text-sm font-medium bg-primary-500/20 text-primary-500"},x(m.skill_name),1))),128))])])):C("",!0),e("div",Gt,[a[10]||(a[10]=e("div",{class:"flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})]),e("span",{class:"text-slate-300"},"æŒæœ‰è­‰ç…§")],-1)),e("span",Jt,x(y.teacher?.certificates?.length||0)+" å¼µ",1)])]),e("div",Qt,[e("button",{onClick:a[1]||(a[1]=m=>u("close")),class:"w-full glass-btn py-3 rounded-xl font-medium"}," é—œé–‰ ")])])]))}}),Kt={class:"space-y-4"},Xt={class:"flex items-center justify-between"},Zt={class:"mb-4"},es=["disabled"],ts={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ss={key:1,class:"text-center py-12 text-slate-500 glass-card"},os={key:2,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ls={class:"flex items-start justify-between mb-3"},ns={class:"flex items-center gap-3"},is={class:"w-12 h-12 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center"},as={class:"text-lg font-bold text-white"},rs={class:"text-lg font-semibold text-slate-100"},ds={class:"text-sm text-slate-400"},us=["onClick"],cs={class:"space-y-2"},ms={key:0,class:"flex flex-wrap gap-1"},vs={key:0,class:"text-xs text-slate-400"},ps={key:1,class:"text-sm text-slate-400"},fs={class:"flex items-center gap-2"},xs={key:0,class:"mt-3 pt-3 border-t border-white/10 space-y-2"},bs=["onClick"],gs=["onClick"],ws=I({__name:"TeachersTab",setup(y){const{error:w,confirm:u}=P(),c=h(!1),a=h(""),m=h({}),b=h(!1),k=h(null),l=h([]),s=Q(()=>{if(!a.value)return l.value;const d=a.value.toLowerCase();return l.value.filter(t=>t.name?.toLowerCase().includes(d)||t.email?.toLowerCase().includes(d))}),p=async()=>{b.value=!0;try{const t=await B().get("/teachers");l.value=t.datas||[]}catch(d){console.error("Failed to fetch teachers:",d),l.value=[]}finally{b.value=!1}};F(()=>{p()});const f=d=>{k.value=d,m.value[d.id]=!1},z=async d=>{if(await u(`ç¢ºå®šè¦ç§»é™¤è€å¸«ã€Œ${d.name}ã€å—ï¼Ÿæ­¤æ“ä½œå°‡åˆªé™¤è©²è€å¸«çš„å¸³è™Ÿã€‚`))try{await B().delete(`/teachers/${d.id}`),await p(),m.value[d.id]=!1}catch(t){console.error("Failed to remove teacher:",t),await w("ç§»é™¤å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}};return(d,t)=>{const g=zt,v=Wt;return n(),r("div",Kt,[e("div",Xt,[t[4]||(t[4]=e("h2",{class:"text-xl font-semibold text-slate-100"},"è€å¸«åˆ—è¡¨",-1)),e("button",{onClick:t[0]||(t[0]=i=>c.value=!0),class:"btn-primary px-4 py-2 text-sm font-medium"}," + é‚€è«‹è€å¸« ")]),e("div",Zt,[$(e("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>J(a)?a.value=i:null),type:"text",placeholder:"æœå°‹è€å¸«...",class:"input-field",disabled:o(b)},null,8,es),[[H,o(a)]])]),o(b)?(n(),r("div",ts,[(n(),r(V,null,T(6,i=>e("div",{key:i,class:"glass-card p-5"},[...t[5]||(t[5]=[E('<div class="animate-pulse"><div class="flex items-start justify-between mb-3"><div class="flex items-center gap-3"><div class="w-12 h-12 rounded-full bg-white/10"></div><div><div class="h-5 w-32 bg-white/10 rounded mb-2"></div><div class="h-4 w-48 bg-white/10 rounded"></div></div></div><div class="w-8 h-8 bg-white/10 rounded-lg"></div></div><div class="space-y-2"><div class="flex gap-2"><div class="h-6 w-16 bg-white/10 rounded-full"></div><div class="h-6 w-16 bg-white/10 rounded-full"></div><div class="h-6 w-16 bg-white/10 rounded-full"></div></div><div class="flex items-center gap-2"><div class="h-5 w-20 bg-white/10 rounded"></div></div></div></div>',1)])])),64))])):s.value.length===0?(n(),r("div",ss,[t[6]||(t[6]=e("svg",{class:"w-16 h-16 mx-auto mb-4 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20H2v-2a3 3 0 015.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),e("p",null,x(o(a)?"æ‰¾ä¸åˆ°ç¬¦åˆçš„è€å¸«":"å°šæœªæ·»åŠ è€å¸«"),1)])):(n(),r("div",os,[(n(!0),r(V,null,T(s.value,i=>(n(),r("div",{key:i.id,class:"glass-card p-5 hover:bg-white/5 transition-all"},[e("div",ls,[e("div",ns,[e("div",is,[e("span",as,x(i.name?.charAt(0)),1)]),e("div",null,[e("h3",rs,x(i.name),1),e("p",ds,x(i.email),1)])]),e("button",{onClick:j=>o(m)[i.id]=!o(m)[i.id],class:"p-2 rounded-lg hover:bg-white/10 transition-colors"},[...t[7]||(t[7]=[e("svg",{class:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 19v.01M7 5h10M7 19h10"})],-1)])],8,us)]),e("div",cs,[i.skills?(n(),r("div",ms,[(n(!0),r(V,null,T(i.skills.slice(0,3),(j,_)=>(n(),r("span",{key:_,class:"px-2 py-1 rounded-full text-xs font-medium bg-secondary-500/20 text-secondary-500"},x(j.skill_name),1))),128)),i.skills.length>3?(n(),r("span",vs," +"+x(i.skills.length-3)+" æ›´å¤š ",1)):C("",!0)])):C("",!0),i.certificates?(n(),r("div",ps,x(Array.isArray(i.certificates)?i.certificates.length:i.certificates)+" å€‹è­‰ç…§ ",1)):C("",!0),e("div",fs,[e("span",{class:L(["px-2 py-1 rounded-full text-xs font-medium",i.is_active?"bg-success-500/20 text-success-500":"bg-warning-500/20 text-warning-500"])},x(i.is_active?"æ´»èºä¸­":"æœªæ´»èº"),3)])]),o(m)[i.id]?(n(),r("div",xs,[e("button",{onClick:j=>f(i),class:"w-full glass-btn px-4 py-2 rounded-xl text-sm"}," æŸ¥çœ‹å€‹äººæª”æ¡ˆ ",8,bs),e("button",{onClick:j=>z(i),class:"w-full glass-btn px-4 py-2 rounded-xl text-sm text-red-400 hover:bg-red-500/10"}," ç§»é™¤è€å¸« ",8,gs)])):C("",!0)]))),128))])),o(c)?(n(),S(g,{key:3,onClose:t[2]||(t[2]=i=>c.value=!1),onInvited:p})):C("",!0),o(k)?(n(),S(v,{key:4,teacher:o(k),onClose:t[3]||(t[3]=i=>k.value=null)},null,8,["teacher"])):C("",!0)])}}}),hs={class:"p-4 md:p-6 max-w-7xl mx-auto"},ks={class:"mb-6 flex flex-col sm:flex-row gap-3 overflow-x-auto pb-2"},Cs=I({__name:"resources",setup(y){const w=h("rooms");return(u,c)=>(n(),r("div",hs,[c[4]||(c[4]=e("div",{class:"mb-6 md:mb-8"},[e("h1",{class:"text-2xl md:text-3xl font-bold text-slate-100 mb-2"}," è³‡æºç®¡ç† "),e("p",{class:"text-slate-400 text-sm md:text-base"}," ç®¡ç†æ•™å®¤ã€èª²ç¨‹ã€å¾…æ’èª²ç¨‹ã€è€å¸« ")],-1)),e("div",ks,[e("button",{onClick:c[0]||(c[0]=a=>w.value="rooms"),class:L(["px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-colors",o(w)==="rooms"?"bg-primary-500/30 border border-primary-500 text-primary-400":"bg-white/5 text-slate-300 hover:bg-white/10"])}," æ•™å®¤ ",2),e("button",{onClick:c[1]||(c[1]=a=>w.value="courses"),class:L(["px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-colors",o(w)==="courses"?"bg-primary-500/30 border border-primary-500 text-primary-400":"bg-white/5 text-slate-300 hover:bg-white/10"])}," èª²ç¨‹ ",2),e("button",{onClick:c[2]||(c[2]=a=>w.value="offerings"),class:L(["px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-colors",o(w)==="offerings"?"bg-primary-500/30 border border-primary-500 text-primary-400":"bg-white/5 text-slate-300 hover:bg-white/10"])}," å¾…æ’èª²ç¨‹ ",2),e("button",{onClick:c[3]||(c[3]=a=>w.value="teachers"),class:L(["px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-colors",o(w)==="teachers"?"bg-primary-500/30 border border-primary-500 text-primary-400":"bg-white/5 text-slate-300 hover:bg-white/10"])}," è€å¸« ",2)]),o(w)==="rooms"?(n(),S(ge,{key:0})):o(w)==="courses"?(n(),S(We,{key:1})):o(w)==="offerings"?(n(),S(Ct,{key:2})):o(w)==="teachers"?(n(),S(ws,{key:3})):C("",!0)]))}});export{Cs as default};
