import{W as d,r as c,B as f}from"./Blq0K2QU.js";const A=d("notification",()=>{const t=c([]),o=c(0),l=c(0);return{notifications:t,unreadCount:o,fetchNotifications:async(a=!1)=>{const s=Date.now();if(!(!a&&s-l.value<3e4&&t.value.length>0))try{const u=await f().get("/notifications?limit=50");t.value=u.datas?.notifications||[],o.value=u.datas?.unread_count||0,l.value=s}catch(n){console.error("Failed to fetch notifications:",n)}},markAsRead:async a=>{try{await f().post(`/notifications/${a}/read`,{});const n=t.value.find(u=>u.id===a);n&&(n.is_read=!0,o.value=Math.max(0,o.value-1))}catch(s){console.error("Failed to mark as read:",s)}},markAllAsRead:async()=>{try{await f().post("/notifications/read-all",{}),t.value.forEach(s=>s.is_read=!0),o.value=0}catch(a){console.error("Failed to mark all as read:",a)}},addNotification:a=>{t.value.unshift(a),o.value++}}}),e={show:c(!1),toast:c(null)};let r=null;const i=(t,o,l=3e3)=>{r&&(clearTimeout(r),r=null),e.toast.value={type:t,message:o,visible:!0},r=setTimeout(()=>{e.toast.value=null,r=null},l)},g=()=>({show:e.show,toast:e.toast,toggle:()=>{e.show.value=!e.show.value},open:()=>{e.show.value=!0},close:()=>{e.show.value=!1},success:t=>{i("success",t)},error:t=>{i("error",t)},warning:t=>{i("warning",t)},info:t=>{i("info",t)},showSuccess:t=>{i("success",t)},showError:t=>{i("error",t)}});export{A as a,g as u};
