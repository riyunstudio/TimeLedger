import{_ as ht}from"./CjGf6EYd.js";import{g as N,l as we,c as s,p as S,n as l,r as _,o as t,a as e,F as B,v as V,d as z,t as d,s as T,q as P,J as gt,E as xt,K as he,x as ie,b as U,w as q,y as W,H as ve,A as ae,m as Le,L as X,G,M as ke,z as me,N as pt,T as bt,_ as He,D as ft,B as se}from"./ZcPQy5tI.js";import{g as Ee,f as te}from"./DCA5C7h4.js";import{S as ge}from"./DUI3GfdC.js";import{u as Ne}from"./DgepazF8.js";import{u as wt,b as Oe,a as De}from"./DaFB5xze.js";import{u as kt}from"./pFv8ODIQ.js";const yt={key:0,class:"recent-searches mb-4"},$t={class:"flex flex-wrap gap-2"},_t=["onClick"],Pe="timeledger_recent_searches",Ue=5,Ct=N({__name:"RecentSearches",emits:["loadSearch","clearAll"],setup(o,{expose:L,emit:p}){const w=p,c=_([]),a=()=>{try{const b=localStorage.getItem(Pe);b&&(c.value=JSON.parse(b))}catch(b){console.error("Failed to load recent searches:",b)}},r=()=>{try{localStorage.setItem(Pe,JSON.stringify(c.value))}catch(b){console.error("Failed to save recent searches:",b)}},n=b=>{const E=new Date(b.start_time),M=`${E.getMonth()+1}/${E.getDate()}`,f=`${E.getHours()}:${E.getMinutes().toString().padStart(2,"0")}`,R=b.skills.length>0?b.skills.slice(0,2).join(", ")+(b.skills.length>2?"...":""):"無技能條件";return`${M} ${f} · ${R}`},h=b=>{w("loadSearch",b)},F=()=>{c.value=[],r(),w("clearAll")};return L({addSearch:b=>{c.value=c.value.filter(E=>!(E.start_time===b.start_time&&E.end_time===b.end_time)),c.value.unshift({...b,id:Date.now().toString(),created_at:Date.now()}),c.value.length>Ue&&(c.value=c.value.slice(0,Ue)),r()},loadFromStorage:a}),we(()=>{a()}),(b,E)=>l(c).length>0?(t(),s("div",yt,[e("div",{class:"flex items-center justify-between mb-2"},[E[0]||(E[0]=e("p",{class:"text-sm text-slate-400"},"近期搜尋",-1)),e("button",{onClick:F,class:"text-xs text-slate-500 hover:text-slate-300 transition-colors"}," 清除紀錄 ")]),e("div",$t,[(t(!0),s(B,null,V(l(c),M=>(t(),s("button",{key:M.id,onClick:f=>h(M),class:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 transition-all text-sm text-slate-300"},[E[1]||(E[1]=e("svg",{class:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),z(" "+d(n(M)),1)],8,_t))),128))])])):S("",!0)}}),St={class:"room-card-select"},Mt={class:"grid grid-cols-2 sm:grid-cols-3 gap-3 max-h-64 overflow-y-auto p-1"},Bt=["onClick"],jt={class:"flex items-center justify-between mb-2"},Vt={class:"font-medium text-white text-sm"},zt={key:0,class:"w-5 h-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Lt={class:"flex items-center gap-1 text-xs text-slate-400 mb-2"},Tt={key:0,class:"flex flex-wrap gap-1"},Ft={key:1,class:"text-xs text-slate-500"},Rt={class:"mt-3 flex items-center gap-2"},At={key:0,class:"text-xs text-slate-500"},It={key:1,class:"text-xs text-indigo-400"},Et=N({__name:"RoomCardSelect",props:{rooms:{},modelValue:{}},emits:["update:modelValue"],setup(o,{emit:L}){const p=o,w=L,c=P({get:()=>p.modelValue,set:r=>w("update:modelValue",r)}),a=r=>{c.value.indexOf(r)===-1?c.value=[...c.value,r]:c.value=c.value.filter(h=>h!==r)};return(r,n)=>(t(),s("div",St,[n[4]||(n[4]=e("label",{class:"block text-slate-300 mb-3"},"教室（可多選）",-1)),e("div",Mt,[(t(!0),s(B,null,V(o.rooms,h=>(t(),s("div",{key:h.id,class:T(["room-card p-3 rounded-lg border-2 cursor-pointer transition-all",l(c).includes(h.id)?"border-indigo-500 bg-indigo-500/10":"border-white/10 bg-white/5 hover:border-white/20"]),onClick:F=>a(h.id)},[e("div",jt,[e("span",Vt,d(h.name),1),l(c).includes(h.id)?(t(),s("svg",zt,[...n[0]||(n[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):S("",!0)]),e("div",Lt,[n[1]||(n[1]=e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),e("span",null,d(h.capacity||20)+" 人",1)]),h.equipment&&h.equipment.length>0?(t(),s("div",Tt,[(t(!0),s(B,null,V(h.equipment.slice(0,3),(F,I)=>(t(),s("span",{key:I,class:T(["px-1.5 py-0.5 rounded text-xs",l(c).includes(h.id)?"bg-indigo-500/20 text-indigo-300":"bg-white/10 text-slate-400"])},d(F),3))),128)),h.equipment.length>3?(t(),s("span",{key:0,class:T(["px-1.5 py-0.5 rounded text-xs",l(c).includes(h.id)?"bg-indigo-500/20 text-indigo-300":"bg-white/10 text-slate-400"])}," +"+d(h.equipment.length-3),3)):S("",!0)])):(t(),s("div",Ft," 基本設施 "))],10,Bt))),128))]),e("div",Rt,[l(c).length===0?(t(),s("p",At,[...n[2]||(n[2]=[e("svg",{class:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),z(" 未選擇教室，將搜尋所有可用教室 ",-1)])])):(t(),s("p",It,[n[3]||(n[3]=e("svg",{class:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),z(" 已選擇 "+d(l(c).length)+" 間教室 ",1)]))])]))}}),ne=N({__name:"BaseBadge",props:{variant:{default:"primary"},size:{default:"md"}},setup(o){const L=o,p=P(()=>({primary:"bg-primary-500/20 text-primary-300 border border-primary-500/30",secondary:"bg-secondary-500/20 text-secondary-300 border border-secondary-500/30",success:"bg-success-500/20 text-success-300 border border-success-500/30",critical:"bg-critical-500/20 text-critical-300 border border-critical-500/30",warning:"bg-warning-500/20 text-warning-300 border border-warning-500/30",info:"bg-blue-500/20 text-blue-300 border border-blue-500/30"})[L.variant]);return(w,c)=>(t(),s("span",{class:T([l(p),"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium"])},[gt(w.$slots,"default")],2))}}),Ot={class:"skill-selector"},Dt={class:"relative"},Pt=["value","onKeydown"],Ut={key:0,class:"suggestions-dropdown absolute z-50 w-full mt-1 bg-slate-800 border border-white/10 rounded-lg shadow-xl overflow-hidden"},Ht=["onClick","onMouseenter"],Nt={class:"flex items-center gap-2"},qt={class:"font-medium text-white"},Kt={class:"text-xs text-slate-400"},Jt={key:0,class:"flex flex-wrap gap-2 mt-3"},Gt=["onClick"],Qt={key:1,class:"mt-3"},Wt={class:"flex flex-wrap gap-1.5"},Xt=["onClick","disabled"],Yt=N({__name:"SkillSelector",props:{modelValue:{}},emits:["update:modelValue"],setup(o,{emit:L}){const p=o,w=L,c=_(""),a=_(!1),r=_(-1),n=_([]),h=P({get:()=>p.modelValue,set:j=>w("update:modelValue",j)}),F=()=>{const j=[];Object.entries(ge).forEach(([A,C])=>{C.skills&&C.skills.slice(0,3).forEach(g=>{j.push({id:j.length+1,name:g,category:A,teacherCount:Math.floor(Math.random()*50)+5})})}),n.value=j.slice(0,8)},I=P(()=>{if(!c.value.trim())return[];const j=c.value.toLowerCase().trim();let A=n.value.filter(C=>C.name.toLowerCase().includes(j)&&!b(C.id));return A.length<3&&Object.entries(ge).forEach(([C,g])=>{g.skills&&g.skills.forEach(u=>{u.toLowerCase().includes(j)&&!A.find(x=>x.name===u)&&!E(u)&&A.push({id:A.length+100,name:u,category:C,teacherCount:Math.floor(Math.random()*30)+1})})}),A.slice(0,8)}),b=j=>h.value.some(A=>A.id===j),E=j=>h.value.some(A=>A.name===j),M=j=>{const A=j.target;c.value=A.value,a.value=!0,r.value=-1,c.value.trim()},f=j=>{R(j),a.value=!1,c.value="",r.value=-1},R=j=>{b(j.id)||(h.value=[...h.value,j],c.value="",a.value=!1)},y=()=>{if(r.value>=0&&I.value[r.value]){f(I.value[r.value]);return}const j=c.value.trim();j&&!E(j)&&(h.value=[...h.value,{id:Date.now(),name:j,category:"其他",teacherCount:0}],c.value=""),a.value=!1},O=j=>{h.value=h.value.filter((A,C)=>C!==j)},K=()=>{c.value===""&&h.value.length>0&&(h.value=h.value.slice(0,-1))},H=j=>{j.target.closest(".skill-selector")||(a.value=!1)};return we(()=>{F(),document.addEventListener("click",H)}),xt(()=>{document.removeEventListener("click",H)}),(j,A)=>{const C=ne;return t(),s("div",Ot,[A[3]||(A[3]=e("label",{class:"block text-slate-300 mb-2"},"所需技能",-1)),e("div",Dt,[e("input",{value:l(c),type:"text",placeholder:"輸入技能名稱（如：瑜珈、鋼琴）",class:"w-full px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white placeholder-slate-500 focus:outline-none focus:border-indigo-500 transition-colors",onInput:M,onKeydown:[he(ie(y,["prevent"]),["enter"]),he(K,["backspace"])],onFocus:A[0]||(A[0]=g=>a.value=!0)},null,40,Pt),l(a)&&l(I).length>0?(t(),s("div",Ut,[(t(!0),s(B,null,V(l(I),(g,u)=>(t(),s("button",{key:g.id,class:T(["w-full px-3 py-2 text-left flex items-center justify-between hover:bg-white/5 transition-colors",l(r)===u?"bg-white/10":""]),onClick:k=>f(g),onMouseenter:k=>r.value=u},[e("div",Nt,[e("span",qt,d(g.name),1),U(C,{variant:"secondary",size:"xs"},{default:q(()=>[z(d(g.category),1)]),_:2},1024)]),e("span",Kt,d(g.teacherCount)+" 位老師 ",1)],42,Ht))),128))])):S("",!0)]),l(h).length>0?(t(),s("div",Jt,[(t(!0),s(B,null,V(l(h),(g,u)=>(t(),s("div",{key:g.id,class:"group flex items-center gap-1 px-2 py-1 rounded-lg bg-indigo-500/20 border border-indigo-500/30 text-indigo-300 text-sm"},[e("span",null,d(g.name),1),e("button",{onClick:k=>O(u),class:"ml-1 p-0.5 rounded hover:bg-indigo-500/30 transition-colors"},[...A[1]||(A[1]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Gt)]))),128))])):S("",!0),!l(a)&&l(n).length>0?(t(),s("div",Qt,[A[2]||(A[2]=e("p",{class:"text-xs text-slate-500 mb-2"},"熱門技能",-1)),e("div",Wt,[(t(!0),s(B,null,V(l(n),g=>(t(),s("button",{key:g.id,onClick:u=>R(g),disabled:b(g.id),class:T(["px-2 py-1 rounded-md text-xs transition-all",b(g.id)?"bg-indigo-500/20 text-indigo-400 cursor-not-allowed":"bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white"])}," + "+d(g.name),11,Xt))),128))])])):S("",!0)])}}}),Zt={class:"sort-controls flex flex-wrap items-center gap-4 mb-4"},es={class:"flex items-center gap-2"},ts=["title"],ss={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ls={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ns={class:"flex items-center gap-1 ml-auto border border-white/10 rounded-lg overflow-hidden"},os={key:0,class:"flex items-center gap-2"},as={class:"text-xs text-slate-400"},is=N({__name:"SortControls",props:{sortBy:{},sortOrder:{},viewMode:{},selectedCount:{}},emits:["update:sortBy","update:sortOrder","update:viewMode"],setup(o,{emit:L}){const p=o,w=L,c=P({get:()=>p.sortBy,set:r=>w("update:sortBy",r)}),a=()=>{w("update:sortOrder",p.sortOrder==="desc"?"asc":"desc")};return(r,n)=>(t(),s("div",Zt,[n[11]||(n[11]=e("span",{class:"text-sm text-slate-400"},"排序方式：",-1)),e("div",es,[W(e("select",{"onUpdate:modelValue":n[0]||(n[0]=h=>ae(c)?c.value=h:null),class:"px-3 py-1.5 rounded-lg bg-white/5 border border-white/10 text-white text-sm focus:outline-none focus:border-indigo-500"},[...n[5]||(n[5]=[e("option",{value:"score"},"媒合分數",-1),e("option",{value:"availability"},"可用性",-1),e("option",{value:"rating"},"內部評分",-1),e("option",{value:"skill-match"},"技能匹配度",-1)])],512),[[ve,l(c)]]),e("button",{onClick:a,class:T(["p-1.5 rounded-lg border transition-colors",o.sortOrder==="desc"?"bg-indigo-500/20 border-indigo-500/30 text-indigo-400":"bg-white/5 border-white/10 text-slate-400 hover:bg-white/10"]),title:o.sortOrder==="desc"?"高到低":"低到高"},[o.sortOrder==="desc"?(t(),s("svg",ss,[...n[6]||(n[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"},null,-1)])])):(t(),s("svg",ls,[...n[7]||(n[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"},null,-1)])]))],10,ts)]),e("div",ns,[e("button",{class:T(["p-1.5 transition-colors",o.viewMode==="card"?"bg-indigo-500 text-white":"bg-white/5 text-slate-400 hover:bg-white/10"]),onClick:n[1]||(n[1]=h=>r.$emit("update:viewMode","card")),title:"卡片檢視"},[...n[8]||(n[8]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)])],2),e("button",{class:T(["p-1.5 transition-colors",o.viewMode==="list"?"bg-indigo-500 text-white":"bg-white/5 text-slate-400 hover:bg-white/10"]),onClick:n[2]||(n[2]=h=>r.$emit("update:viewMode","list")),title:"列表檢視"},[...n[9]||(n[9]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1)])],2),e("button",{class:T(["p-1.5 transition-colors",o.viewMode==="compare"?"bg-indigo-500 text-white":"bg-white/5 text-slate-400 hover:bg-white/10"]),onClick:n[3]||(n[3]=h=>r.$emit("update:viewMode","compare")),title:"比較檢視"},[...n[10]||(n[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1)])],2)]),o.viewMode!=="compare"&&o.selectedCount>0?(t(),s("div",os,[e("span",as," 已選 "+d(o.selectedCount)+" 位 ",1),e("button",{onClick:n[4]||(n[4]=h=>r.$emit("update:viewMode","compare")),class:"px-3 py-1.5 rounded-lg bg-indigo-500/20 border border-indigo-500/30 text-indigo-400 hover:bg-indigo-500/30 transition-colors text-sm"}," 開始比較 ")])):S("",!0)]))}}),rs={class:"compare-mode"},ds={class:"flex items-center justify-between mb-4"},cs={class:"flex items-center gap-2"},us={class:"overflow-x-auto"},vs={class:"w-full"},ms={class:"flex flex-col items-center"},hs={class:"w-12 h-12 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center mb-2"},gs={class:"text-white font-medium"},xs={class:"text-white font-medium"},ps=["onClick"],bs={class:"p-3 text-sm text-slate-400 bg-white/5"},fs={key:0,class:"flex items-center justify-center gap-2"},ws={class:"w-20 h-2 bg-white/10 rounded-full overflow-hidden"},ks={class:"text-white font-medium"},ys={key:2,class:"flex items-center justify-center gap-1"},$s={class:"text-yellow-400"},_s={class:"text-slate-400 ml-1"},Cs={key:4,class:"text-white"},Ss={class:"border-t border-white/5"},Ms=["onClick"],Bs=N({__name:"CompareMode",props:{selectedTeachers:{}},emits:["remove","select","exit"],setup(o,{emit:L}){const p=o,w=a=>{switch(a){case"AVAILABLE":return"完全可用";case"BUFFER_CONFLICT":return"緩衝衝突";case"OVERLAP":return"時間重疊";default:return a}},c=P(()=>{if(p.selectedTeachers.length===0)return[];const a=p.selectedTeachers;return[{key:"score",label:"媒合分數",highlight:!0,getValue:n=>n.match_score,maxValue:Math.max(...a.map(n=>n.match_score))},{key:"availability",label:"可用性",highlight:!1,getValue:n=>n.availability,maxValue:""},{key:"internal_score",label:"內部評分",highlight:!0,getValue:n=>n.internal_score,maxValue:Math.max(...a.map(n=>n.internal_score))},{key:"skill_match",label:"技能匹配",highlight:!0,getValue:n=>n.skill_match,maxValue:Math.max(...a.map(n=>n.skill_match))},{key:"rating",label:"星等評分",highlight:!0,getValue:n=>n.rating||0,maxValue:Math.max(...a.map(n=>n.rating||0))},{key:"is_member",label:"中心成員",highlight:!1,getValue:n=>n.is_member,maxValue:""}]});return(a,r)=>(t(),s("div",rs,[e("div",ds,[r[3]||(r[3]=e("h3",{class:"text-lg font-semibold text-white"},"老師比較",-1)),e("div",cs,[r[2]||(r[2]=e("span",{class:"text-sm text-slate-400"}," 最多可選取 3 位老師进行比较 ",-1)),e("button",{onClick:r[0]||(r[0]=n=>a.$emit("exit")),class:"p-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white transition-colors",title:"退出比較"},[...r[1]||(r[1]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",us,[e("table",vs,[e("thead",null,[e("tr",null,[r[5]||(r[5]=e("th",{class:"w-32 p-3 text-left text-sm font-medium text-slate-400 bg-white/5 rounded-tl-lg"}," 項目 ",-1)),(t(!0),s(B,null,V(o.selectedTeachers,n=>(t(),s("th",{key:n.teacher_id,class:T(["p-3 text-center bg-white/5 min-w-[200px]",{"rounded-tr-lg":n===o.selectedTeachers[o.selectedTeachers.length-1]}])},[e("div",ms,[e("div",hs,[e("span",gs,d(n.teacher_name?.charAt(0)||"?"),1)]),e("span",xs,d(n.teacher_name),1),e("button",{onClick:h=>a.$emit("remove",n),class:"mt-2 text-xs text-slate-400 hover:text-red-400 transition-colors"}," 移除 ",8,ps)])],2))),128)),(t(!0),s(B,null,V(Math.max(0,3-o.selectedTeachers.length),n=>(t(),s("th",{key:n,class:"p-3 bg-white/5 border border-dashed border-white/10"},[...r[4]||(r[4]=[e("div",{class:"flex items-center justify-center h-full text-slate-500 text-sm"}," 選擇老師加入比較 ",-1)])]))),128))])]),e("tbody",null,[(t(!0),s(B,null,V(l(c),n=>(t(),s("tr",{key:n.key,class:"border-t border-white/5"},[e("td",bs,d(n.label),1),(t(!0),s(B,null,V(o.selectedTeachers,h=>(t(),s("td",{key:h.teacher_id,class:T(["p-3 text-center",n.highlight&&n.getValue(h)===n.maxValue?"bg-green-500/10":""])},[n.key==="score"?(t(),s("div",fs,[e("div",ws,[e("div",{class:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full",style:X({width:`${n.getValue(h)}%`})},null,4)]),e("span",ks,d(n.getValue(h))+"%",1)])):n.key==="is_member"?(t(),s("span",{key:1,class:T(n.getValue(h)?"text-green-400":"text-slate-400")},d(n.getValue(h)?"✓ 是":"✗ 否"),3)):n.key==="rating"?(t(),s("div",ys,[e("span",$s,d("★".repeat(n.getValue(h))),1),e("span",_s,d(n.getValue(h))+".0",1)])):n.key==="availability"?(t(),s("span",{key:3,class:T(["px-2 py-1 rounded text-xs font-medium",n.getValue(h)==="AVAILABLE"?"bg-green-500/20 text-green-400":n.getValue(h)==="BUFFER_CONFLICT"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"])},d(w(n.getValue(h))),3)):(t(),s("span",Cs,d(n.getValue(h)),1))],2))),128)),(t(!0),s(B,null,V(Math.max(0,3-o.selectedTeachers.length),h=>(t(),s("td",{key:h,class:"p-3 border border-dashed border-white/10"}))),128))]))),128)),e("tr",Ss,[r[6]||(r[6]=e("td",{class:"p-3 bg-white/5"},null,-1)),(t(!0),s(B,null,V(o.selectedTeachers,n=>(t(),s("td",{key:n.teacher_id,class:"p-3"},[e("button",{onClick:h=>a.$emit("select",n),class:"w-full px-4 py-2 rounded-lg bg-primary-500 text-white hover:bg-primary-600 transition-colors text-sm"}," 選擇這位老師 ",8,Ms)]))),128)),(t(!0),s(B,null,V(Math.max(0,3-o.selectedTeachers.length),n=>(t(),s("td",{key:n,class:"p-3 border border-dashed border-white/10"}))),128))])])])]),r[7]||(r[7]=Le('<div class="mt-4 flex flex-wrap items-center gap-4 text-sm"><div class="flex items-center gap-2"><div class="w-3 h-3 rounded-full bg-green-500/20 border border-green-500/30"></div><span class="text-slate-400">該項目表現最佳</span></div><div class="flex items-center gap-2"><div class="flex items-center gap-1 text-xs text-slate-500"><span class="px-1.5 py-0.5 rounded bg-green-500/20 text-green-400">✓ 是</span><span>中心成員</span></div></div><div class="flex items-center gap-1 text-xs text-slate-500"><span class="px-1.5 py-0.5 rounded bg-yellow-500/20 text-yellow-400">緩衝衝突</span><span>可_override</span></div></div>',1))]))}}),js=["checked"],Vs={class:"flex items-start gap-3 mb-4"},zs={class:"w-12 h-12 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center shrink-0"},Ls={class:"text-white font-medium"},Ts={class:"flex-1 min-w-0"},Fs={class:"flex items-center gap-2 mb-1"},Rs={class:"text-white font-medium truncate"},As={class:"flex items-center gap-2"},Is={class:"mb-4"},Es={class:"flex items-center justify-between mb-1"},Os={class:"text-lg font-bold text-primary-500"},Ds={class:"h-2 bg-white/10 rounded-full overflow-hidden"},Ps={class:"grid grid-cols-2 gap-2 mb-4"},Us={class:"flex items-center gap-2 text-xs"},Hs={class:"text-white font-medium"},Ns={class:"flex items-center gap-2 text-xs"},qs={class:"text-white font-medium"},Ks={class:"flex items-center gap-2 text-xs"},Js={class:"text-white font-medium"},Gs={class:"flex items-center gap-2 text-xs"},Qs={class:"text-white font-medium"},Ws={key:0,class:"flex flex-wrap gap-1 mb-3"},Xs={key:1,class:"text-xs text-slate-400 mb-3"},Ys={key:2,class:"text-sm font-medium text-white mb-1"},Zs={key:3,class:"text-xs text-slate-400"},el={class:"flex items-center gap-2 mt-3 pt-3 border-t border-white/10"},tl={key:0,class:"text-xs text-yellow-400"},sl={class:"text-slate-400 ml-1"},ll={class:"text-xs text-slate-400"},nl=N({__name:"EnhancedMatchCard",props:{match:{},selected:{type:Boolean},showCheckbox:{type:Boolean}},emits:["click","update:selected"],setup(o,{emit:L}){const p=o,w=_(!1),c=P(()=>{switch(p.match.availability){case"AVAILABLE":return"完全可用";case"BUFFER_CONFLICT":return"緩衝衝突";case"OVERLAP":return"時間重疊";default:return p.match.availability}});return(a,r)=>{const n=ne;return t(),s("div",{class:T(["match-card relative p-4 rounded-xl border transition-all cursor-pointer group",o.selected?"bg-indigo-500/10 border-indigo-500/30":"bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20"]),onClick:r[2]||(r[2]=h=>a.$emit("click"))},[o.showCheckbox?(t(),s("div",{key:0,class:"absolute top-3 right-3 z-10",onClick:r[1]||(r[1]=ie(()=>{},["stop"]))},[e("input",{type:"checkbox",checked:o.selected,onChange:r[0]||(r[0]=h=>a.$emit("update:selected",!o.selected)),class:"w-5 h-5 rounded border-white/20 bg-white/10 text-indigo-500 focus:ring-indigo-500 focus:ring-offset-0"},null,40,js)])):S("",!0),e("div",Vs,[e("div",zs,[e("span",Ls,d(o.match.teacher_name?.charAt(0)||"?"),1)]),e("div",Ts,[e("div",Fs,[e("h4",Rs,d(o.match.teacher_name),1),o.match.is_member?(t(),G(n,{key:0,variant:"success",size:"xs"},{default:q(()=>[...r[3]||(r[3]=[z(" 中心成員 ",-1)])]),_:1})):S("",!0)]),e("div",As,[e("span",{class:T(["px-2 py-0.5 rounded text-xs font-medium",o.match.availability==="AVAILABLE"?"bg-green-500/20 text-green-400":o.match.availability==="BUFFER_CONFLICT"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"])},d(l(c)),3)])])]),e("div",Is,[e("div",Es,[r[4]||(r[4]=e("span",{class:"text-xs text-slate-400"},"媒合分數",-1)),e("span",Os,d(o.match.match_score)+"%",1)]),e("div",Ds,[e("div",{class:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all duration-500",style:X({width:`${o.match.match_score}%`})},null,4)])]),e("div",Ps,[e("div",Us,[r[6]||(r[6]=e("div",{class:"w-6 h-6 rounded bg-green-500/20 flex items-center justify-center"},[e("svg",{class:"w-3.5 h-3.5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[r[5]||(r[5]=e("span",{class:"text-slate-400 block"},"可用性",-1)),e("span",Hs,d(o.match.availability_score)+"/40",1)])]),e("div",Ns,[r[8]||(r[8]=e("div",{class:"w-6 h-6 rounded bg-yellow-500/20 flex items-center justify-center"},[e("svg",{class:"w-3.5 h-3.5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})])],-1)),e("div",null,[r[7]||(r[7]=e("span",{class:"text-slate-400 block"},"內部評分",-1)),e("span",qs,d(o.match.internal_score)+"/40",1)])]),e("div",Ks,[r[10]||(r[10]=e("div",{class:"w-6 h-6 rounded bg-blue-500/20 flex items-center justify-center"},[e("svg",{class:"w-3.5 h-3.5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})])],-1)),e("div",null,[r[9]||(r[9]=e("span",{class:"text-slate-400 block"},"技能匹配",-1)),e("span",Js,d(o.match.skill_score)+"/10",1)])]),e("div",Gs,[r[12]||(r[12]=e("div",{class:"w-6 h-6 rounded bg-purple-500/20 flex items-center justify-center"},[e("svg",{class:"w-3.5 h-3.5 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})])],-1)),e("div",null,[r[11]||(r[11]=e("span",{class:"text-slate-400 block"},"地區匹配",-1)),e("span",Qs,d(o.match.region_score||0)+"/10",1)])])]),e("div",{class:T(["absolute inset-x-0 bottom-0 p-4 bg-slate-800/95 backdrop-blur-sm rounded-b-xl border-t border-white/10 transition-all duration-200",l(w)?"opacity-100 translate-y-0":"opacity-0 translate-y-2 pointer-events-none"])},[r[13]||(r[13]=e("h5",{class:"text-sm font-medium text-white mb-2"},"專長技能",-1)),o.match.skills?.length?(t(),s("div",Ws,[(t(!0),s(B,null,V(o.match.skills.slice(0,5),h=>(t(),G(n,{key:h.name,variant:"primary",size:"xs"},{default:q(()=>[z(d(h.name),1)]),_:2},1024))),128))])):(t(),s("p",Xs,"無技能資料")),o.match.notes?(t(),s("h5",Ys,"內部備註")):S("",!0),o.match.notes?(t(),s("p",Zs,d(o.match.notes),1)):S("",!0),e("div",el,[o.match.rating?(t(),s("span",tl,[z(d("★".repeat(o.match.rating))+d("☆".repeat(5-o.match.rating))+" ",1),e("span",sl,d(o.match.rating)+".0",1)])):S("",!0),e("span",ll," 技能匹配 "+d(o.match.skill_match)+"% ",1)])],2),e("div",{class:T(["absolute inset-x-0 bottom-0 h-8 rounded-b-xl transition-colors",l(w)?"bg-transparent":"bg-gradient-to-t from-white/5 to-transparent"])},null,2)],2)}}}),ol={class:"teacher-timeline bg-white/5 rounded-xl p-4"},al={class:"flex items-center gap-3 mb-4"},il={class:"w-10 h-10 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center shrink-0"},rl={class:"text-white font-medium"},dl={class:"flex-1"},cl={class:"text-white font-medium"},ul={class:"timeline-container relative pl-10"},vl={class:"time-axis absolute left-0 top-0 bottom-0 w-8 flex flex-col text-xs text-slate-500"},ml={class:"tracks space-y-1"},hl={class:"track relative h-10 bg-indigo-500/20 rounded-lg border border-indigo-500/30"},gl={class:"track relative h-10 bg-white/5 rounded-lg"},xl={class:"text-xs px-2 text-white truncate block"},pl={key:0,class:"conflict-indicator flex items-center gap-2 mt-2 p-2 bg-red-500/10 border border-red-500/20 rounded-lg"},bl={class:"text-sm text-red-400"},fl={key:1,class:"flex items-center gap-2 mt-2 p-2 bg-green-500/10 border border-green-500/20 rounded-lg"},wl={key:0,class:"mt-4 pt-4 border-t border-white/10"},kl={class:"space-y-2"},yl={class:"text-slate-300"},$l={class:"text-slate-500"},_l={class:"text-slate-400"},Cl=N({__name:"TeacherTimeline",props:{teacher:{},targetStart:{},targetEnd:{},existingSessions:{}},emits:["override"],setup(o,{emit:L}){const p=o,w=P(()=>{const M=[];for(let f=6;f<=22;f++)M.push(f);return M}),c=P(()=>{switch(p.teacher.availability){case"AVAILABLE":return"完全可用";case"BUFFER_CONFLICT":return"緩衝衝突";case"OVERLAP":return"時間重疊";default:return p.teacher.availability}}),a=P(()=>{switch(p.teacher.availability){case"AVAILABLE":return"success";case"BUFFER_CONFLICT":return"warning";case"OVERLAP":return"error";default:return"secondary"}}),r=P(()=>p.teacher.availability!=="AVAILABLE"),n=P(()=>p.teacher.availability==="BUFFER_CONFLICT"?"與現有課程緩衝時間衝突":"與現有課程時間重疊"),h=P(()=>{const M=[],f=new Date(p.targetStart),R=new Date(p.targetEnd);return p.existingSessions.forEach(y=>{const O=new Date(y.start_time),K=new Date(y.end_time);if(f<K&&R>O){const H=f<K&&R>O;M.push({type:H?"BUFFER_CONFLICT":"OVERLAP",course_name:y.course_name,start:F(O),end:F(K),room:y.room_name||"未指定教室"})}}),M}),F=M=>`${M.getHours().toString().padStart(2,"0")}:${M.getMinutes().toString().padStart(2,"0")}`,I=M=>{const f=new Date(M);return(f.getHours()+f.getMinutes()/60-6)/16*100},b=P(()=>{const M=I(p.targetStart),R=I(p.targetEnd)-M;return{left:`${M}%`,width:`${R}%`}}),E=M=>{const f=I(M.start_time),y=I(M.end_time)-f;return{left:`${f}%`,width:`${y}%`}};return(M,f)=>{const R=ne;return t(),s("div",ol,[e("div",al,[e("div",il,[e("span",rl,d(o.teacher.teacher_name?.charAt(0)||"?"),1)]),e("div",dl,[e("h4",cl,d(o.teacher.teacher_name),1),f[1]||(f[1]=e("p",{class:"text-xs text-slate-400"},"課表衝突檢視",-1))]),U(R,{variant:l(a),size:"sm"},{default:q(()=>[z(d(l(c)),1)]),_:1},8,["variant"])]),e("div",ul,[e("div",vl,[(t(!0),s(B,null,V(l(w),y=>(t(),s("div",{key:y,class:"h-12 flex items-center justify-end pr-1"},d(y)+":00 ",1))),128))]),e("div",ml,[e("div",hl,[e("div",{class:"absolute h-full bg-indigo-500 rounded-lg flex items-center justify-center text-white text-xs font-medium",style:X(l(b))}," 目標時段 ",4)]),e("div",gl,[(t(!0),s(B,null,V(o.existingSessions,y=>(t(),s("div",{key:y.id,class:"absolute h-8 top-1 bg-slate-600/50 rounded border-l-4 border-slate-500 overflow-hidden",style:X(E(y))},[e("span",xl,d(y.course_name),1)],4))),128))]),l(r)?(t(),s("div",pl,[f[2]||(f[2]=e("svg",{class:"w-4 h-4 text-red-400 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("span",bl,d(l(n)),1),M.availability==="BUFFER_CONFLICT"?(t(),s("button",{key:0,onClick:f[0]||(f[0]=y=>M.$emit("override")),class:"ml-auto px-3 py-1 rounded-lg bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30 text-xs transition-colors"}," 仍要安排 ")):S("",!0)])):(t(),s("div",fl,[...f[3]||(f[3]=[e("svg",{class:"w-4 h-4 text-green-400 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("span",{class:"text-sm text-green-400"},"此時段完全可用，無課程衝突",-1)])]))])]),l(h).length>0?(t(),s("div",wl,[f[4]||(f[4]=e("p",{class:"text-xs text-slate-400 mb-2"},"衝突課程：",-1)),e("div",kl,[(t(!0),s(B,null,V(l(h),(y,O)=>(t(),s("div",{key:O,class:"flex items-center gap-2 text-xs"},[e("span",{class:T(["w-2 h-2 rounded-full shrink-0",y.type==="OVERLAP"?"bg-red-500":"bg-yellow-500"])},null,2),e("span",yl,d(y.course_name),1),e("span",$l,d(y.start)+" - "+d(y.end),1),e("span",_l,d(y.room),1)]))),128))])])):S("",!0)])}}}),Sl={class:"conflict-legend flex flex-wrap items-center gap-4 p-3 bg-white/5 rounded-lg"},Ml=N({__name:"ConflictLegend",setup(o){return(L,p)=>(t(),s("div",Sl,[...p[0]||(p[0]=[Le('<span class="text-xs text-slate-400 font-medium shrink-0">圖例說明</span><div class="flex items-center gap-2"><div class="w-6 h-6 rounded bg-green-500/20 border border-green-500/30 flex items-center justify-center"><svg class="w-4 h-4 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><div class="text-xs"><span class="text-white block">完全可用</span><span class="text-slate-500">可立即安排</span></div></div><div class="w-px h-10 bg-white/10 shrink-0"></div><div class="flex items-center gap-2"><div class="w-6 h-6 rounded bg-yellow-500/20 border border-yellow-500/30 flex items-center justify-center"><svg class="w-4 h-4 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><div class="text-xs"><span class="text-white block">緩衝衝突</span><span class="text-slate-500">可選擇_override</span></div></div><div class="w-px h-10 bg-white/10 shrink-0"></div><div class="flex items-center gap-2"><div class="w-6 h-6 rounded bg-red-500/20 border border-red-500/30 flex items-center justify-center"><svg class="w-4 h-4 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></div><div class="text-xs"><span class="text-white block">時間重疊</span><span class="text-slate-500">不可排課</span></div></div><div class="w-px h-10 bg-white/10 shrink-0"></div><div class="flex items-center gap-2"><div class="w-6 h-6 rounded bg-indigo-500/20 border border-indigo-500/30 flex items-center justify-center"><div class="w-3 h-3 bg-indigo-500 rounded-sm"></div></div><div class="text-xs"><span class="text-white block">目標時段</span><span class="text-slate-500">您想安排的時間</span></div></div><div class="w-px h-10 bg-white/10 shrink-0"></div><div class="flex items-center gap-2"><div class="w-6 h-6 rounded bg-slate-600/50 border border-slate-500 flex items-center justify-center"><div class="w-4 h-2 bg-slate-400 rounded-sm"></div></div><div class="text-xs"><span class="text-white block">現有課程</span><span class="text-slate-500">老師已排課表</span></div></div>',10)])]))}}),Bl={class:"alternative-slots"},jl={class:"flex items-center justify-between mb-4"},Vl={class:"text-xs text-slate-400"},zl={class:"flex gap-2 mb-4 overflow-x-auto pb-2"},Ll=["onClick"],Tl={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2"},Fl=["disabled","onClick"],Rl={class:"flex items-center justify-between mb-1"},Al={class:"text-sm font-medium text-white"},Il={key:0,class:"text-xs text-green-400"},El={key:1,class:"text-xs text-red-400"},Ol={class:"text-xs text-slate-400"},Dl={key:0,class:"mt-2 flex flex-wrap gap-1"},Pl={key:1,class:"mt-2"},Ul={class:"text-xs text-red-400"},Hl={key:0,class:"col-span-full py-8 text-center text-slate-500"},Nl={class:"mt-4 pt-4 border-t border-white/10"},ql=N({__name:"AlternativeSlots",props:{teacherName:{},slots:{}},emits:["select","custom"],setup(o,{emit:L}){const p=o,w=L,c=P(()=>{const h=new Map;return p.slots.forEach(F=>{h.has(F.date)||h.set(F.date,F.dateLabel)}),Array.from(h.entries()).map(([F,I])=>({value:F,label:I}))}),a=P(()=>{const h=c.value[0]?.value,F=r.value||h;return p.slots.filter(I=>I.date===F)}),r=_(""),n=h=>{h.available&&w("select",h)};return(h,F)=>{const I=ne;return t(),s("div",Bl,[e("div",jl,[F[1]||(F[1]=e("h4",{class:"font-medium text-white"},"替代時段建議",-1)),e("span",Vl," 基於老師 "+d(o.teacherName)+" 的課表 ",1)]),e("div",zl,[(t(!0),s(B,null,V(l(c),b=>(t(),s("button",{key:b.value,class:T(["px-3 py-1.5 rounded-lg text-sm whitespace-nowrap transition-colors",l(r)===b.value?"bg-indigo-500 text-white":"bg-white/5 text-slate-400 hover:bg-white/10"]),onClick:E=>r.value=b.value},d(b.label),11,Ll))),128))]),e("div",Tl,[(t(!0),s(B,null,V(l(a),b=>(t(),s("button",{key:`${b.date}-${b.start}`,class:T(["slot-button p-3 rounded-lg border-2 text-left transition-all",b.available?"border-green-500/30 bg-green-500/5 hover:bg-green-500/10 hover:border-green-500":"border-white/10 bg-white/5 opacity-50 cursor-not-allowed"]),disabled:!b.available,onClick:E=>n(b)},[e("div",Rl,[e("span",Al,d(b.dateLabel),1),b.available?(t(),s("span",Il," 可安排 ")):(t(),s("span",El," 衝突 "))]),e("div",Ol,d(b.start)+" - "+d(b.end),1),b.available&&b.availableRooms.length>0?(t(),s("div",Dl,[(t(!0),s(B,null,V(b.availableRooms.slice(0,2),E=>(t(),G(I,{key:E.id,variant:"success",size:"xs"},{default:q(()=>[z(d(E.name),1)]),_:2},1024))),128)),b.availableRooms.length>2?(t(),G(I,{key:0,variant:"secondary",size:"xs"},{default:q(()=>[z(" +"+d(b.availableRooms.length-2),1)]),_:2},1024)):S("",!0)])):S("",!0),!b.available&&b.conflictReason?(t(),s("div",Pl,[e("span",Ul,d(b.conflictReason),1)])):S("",!0)],10,Fl))),128)),l(a).length===0?(t(),s("div",Hl,[...F[2]||(F[2]=[e("svg",{class:"w-12 h-12 mx-auto mb-2 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("p",null,"暫無替代時段建議",-1),e("p",{class:"text-xs text-slate-400 mt-1"},"嘗試選擇其他老師或調整時段",-1)])])):S("",!0)]),e("div",Nl,[e("button",{onClick:F[0]||(F[0]=b=>h.$emit("custom")),class:"w-full px-4 py-2 rounded-lg bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white transition-colors text-sm flex items-center justify-center gap-2"},[...F[3]||(F[3]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),z(" 自訂其他時段 ",-1)])])])])}}}),Kl={key:0,class:"absolute top-3 right-3 z-10"},Jl=["checked"],Gl={class:"flex items-start gap-3 mb-3"},Ql={class:"w-12 h-12 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center shrink-0"},Wl={class:"text-white font-medium"},Xl={class:"flex-1 min-w-0"},Yl={class:"flex items-center gap-2 mb-1"},Zl={class:"text-white font-medium truncate"},en={class:"text-xs text-slate-400 flex items-center gap-1"},tn={key:1,class:"text-sm text-slate-400 mb-3 line-clamp-2"},sn={key:2,class:"mb-3"},ln={class:"flex flex-wrap gap-1"},nn={key:0,class:"px-2 py-1 rounded-md text-xs bg-slate-500/20 text-slate-400"},on={key:3,class:"flex flex-wrap gap-1 mb-4"},an={key:4,class:"mb-3"},rn={class:"flex gap-2"},dn=["disabled"],cn={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},un={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},vn={key:1,disabled:"",class:"flex-1 px-3 py-2 rounded-lg bg-white/5 text-slate-500 text-sm flex items-center justify-center gap-1 cursor-not-allowed"},mn={key:5,class:"mt-3 pt-3 border-t border-white/10"},hn={class:"text-xs text-slate-400"},gn=N({__name:"TalentCard",props:{teacher:{},selected:{type:Boolean},showCheckbox:{type:Boolean},inviteLoading:{type:Boolean},invitationStatus:{},showContactInfo:{type:Boolean}},emits:["invite","view","compare","update:selected"],setup(o){const L=w=>ge[w]?.icon||"✨",p=w=>ge[w]?.color||"bg-slate-500/20 text-slate-400 border-slate-500/30";return(w,c)=>{const a=ne;return t(),s("div",{class:T(["talent-card relative p-4 rounded-xl border transition-all",o.selected?"bg-indigo-500/10 border-indigo-500/30":"bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20"])},[o.showCheckbox&&o.teacher.is_open_to_hiring?(t(),s("div",Kl,[e("input",{type:"checkbox",checked:o.selected,onChange:c[0]||(c[0]=r=>w.$emit("update:selected",!o.selected)),class:"w-5 h-5 rounded border-white/20 bg-white/10 text-indigo-500 focus:ring-indigo-500 focus:ring-offset-0"},null,40,Jl)])):S("",!0),e("div",Gl,[e("div",Ql,[e("span",Wl,d(o.teacher.name?.charAt(0)||"?"),1)]),e("div",Xl,[e("div",Yl,[e("h4",Zl,d(o.teacher.name),1),o.teacher.is_member?(t(),G(a,{key:0,variant:"success",size:"xs"},{default:q(()=>[...c[4]||(c[4]=[z(" 中心成員 ",-1)])]),_:1})):S("",!0),o.teacher.is_open_to_hiring?S("",!0):(t(),G(a,{key:1,variant:"secondary",size:"xs"},{default:q(()=>[...c[5]||(c[5]=[z(" 已關閉徵才 ",-1)])]),_:1}))]),e("p",en,[c[6]||(c[6]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),z(" "+d(o.teacher.city)+d(o.teacher.district),1)])])]),o.teacher.bio?(t(),s("p",tn,d(o.teacher.bio),1)):S("",!0),o.teacher.skills?.length?(t(),s("div",sn,[c[7]||(c[7]=e("p",{class:"text-xs text-slate-500 mb-2"},"專長技能",-1)),e("div",ln,[(t(!0),s(B,null,V(o.teacher.skills.slice(0,4),(r,n)=>(t(),s("span",{key:n,class:T(["inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs",p(r.category)])},[e("span",null,d(L(r.category)),1),e("span",null,d(r.name),1)],2))),128)),o.teacher.skills.length>4?(t(),s("span",nn," +"+d(o.teacher.skills.length-4),1)):S("",!0)])])):S("",!0),o.teacher.personal_hashtags?.length?(t(),s("div",on,[(t(!0),s(B,null,V(o.teacher.personal_hashtags.slice(0,5),(r,n)=>(t(),s("span",{key:n,class:"px-2 py-0.5 rounded-full text-xs bg-primary-500/20 text-primary-400"},d(r),1))),128))])):S("",!0),o.invitationStatus?(t(),s("div",an,[U(a,{variant:o.invitationStatus.variant,size:"sm"},{default:q(()=>[z(d(o.invitationStatus.text),1)]),_:1},8,["variant"])])):S("",!0),e("div",rn,[o.teacher.is_open_to_hiring?(t(),s("button",{key:0,onClick:c[1]||(c[1]=r=>w.$emit("invite",o.teacher)),disabled:o.inviteLoading||o.invitationStatus?.sent,class:"flex-1 px-3 py-2 rounded-lg bg-primary-500 text-white hover:bg-primary-600 transition-colors text-sm flex items-center justify-center gap-1 disabled:opacity-50"},[o.inviteLoading?(t(),s("svg",cn,[...c[8]||(c[8]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(t(),s("svg",un,[...c[9]||(c[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),z(" "+d(o.invitationStatus?.sent?"已邀請":"邀請合作"),1)],8,dn)):(t(),s("button",vn,[...c[10]||(c[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})],-1),z(" 已關閉徵才 ",-1)])])),e("button",{onClick:c[2]||(c[2]=r=>w.$emit("view",o.teacher)),class:"px-3 py-2 rounded-lg bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white transition-colors",title:"查看詳細資訊"},[...c[11]||(c[11]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])]),e("button",{onClick:c[3]||(c[3]=r=>w.$emit("compare",o.teacher)),class:"px-3 py-2 rounded-lg bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white transition-colors",title:"加入比較"},[...c[12]||(c[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1)])])]),o.showContactInfo&&o.teacher.public_contact_info?(t(),s("div",mn,[e("p",hn,[c[13]||(c[13]=e("span",{class:"font-medium text-slate-300"},"聯絡方式：",-1)),z(" "+d(o.teacher.public_contact_info),1)])])):S("",!0)],2)}}}),xn={key:0,class:"bulk-actions fixed bottom-0 left-0 right-0 z-50 bg-slate-900/95 backdrop-blur-lg border-t border-white/10 shadow-2xl"},pn={class:"max-w-7xl mx-auto px-4 py-4"},bn={class:"flex flex-col sm:flex-row items-center justify-between gap-4"},fn={class:"flex items-center gap-3"},wn={class:"flex items-center gap-3"},kn=["disabled"],yn=["disabled"],$n={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},_n={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Cn={key:0,class:"mt-3 flex items-center gap-2 text-sm text-slate-400"},Sn={class:"flex-1 bg-white/10 rounded-full h-1.5 overflow-hidden"},Mn=N({__name:"BulkActions",props:{selectedCount:{},bulkLoading:{type:Boolean},bulkProgress:{}},emits:["clear","compare","export","bulkInvite"],setup(o){return(L,p)=>{const w=ne;return t(),G(ke,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"translate-y-full opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition-all duration-300 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-full opacity-0"},{default:q(()=>[o.selectedCount>0?(t(),s("div",xn,[e("div",pn,[e("div",bn,[e("div",fn,[U(w,{variant:"info",size:"md"},{default:q(()=>[z(" 已選取 "+d(o.selectedCount)+" 位 ",1)]),_:1}),e("button",{onClick:p[0]||(p[0]=c=>L.$emit("clear")),class:"text-sm text-slate-400 hover:text-slate-300 transition-colors"}," 清除選取 ")]),e("div",wn,[e("button",{onClick:p[1]||(p[1]=c=>L.$emit("compare")),class:T(["px-4 py-2 rounded-lg bg-white/5 text-slate-300 hover:bg-white/10 hover:text-white transition-colors flex items-center gap-2",{"opacity-50 cursor-not-allowed":o.selectedCount<2}]),disabled:o.selectedCount<2},[...p[4]||(p[4]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),z(" 比較所選 ",-1)])],10,kn),e("button",{onClick:p[2]||(p[2]=c=>L.$emit("export")),class:"px-4 py-2 rounded-lg bg-white/5 text-slate-300 hover:bg-white/10 hover:text-white transition-colors flex items-center gap-2"},[...p[5]||(p[5]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),z(" 匯出聯絡資訊 ",-1)])]),e("button",{onClick:p[3]||(p[3]=c=>L.$emit("bulkInvite")),disabled:o.bulkLoading,class:"px-4 py-2 rounded-lg bg-primary-500 text-white hover:bg-primary-600 transition-colors flex items-center gap-2 disabled:opacity-50"},[o.bulkLoading?(t(),s("svg",$n,[...p[6]||(p[6]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(t(),s("svg",_n,[...p[7]||(p[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),z(" 批量邀請 ("+d(o.selectedCount)+") ",1)],8,yn)])]),o.bulkLoading?(t(),s("div",Cn,[e("div",Sn,[e("div",{class:"h-full bg-primary-500 transition-all duration-300",style:X({width:`${o.bulkProgress}%`})},null,4)]),e("span",null,d(o.bulkProgress)+"%",1)])):S("",!0)])])):S("",!0)]),_:1})}}}),Bn={class:"talent-filter-panel"},jn={class:"mt-4 p-4 bg-white/5 rounded-xl border border-white/10"},Vn={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},zn=["value"],Ln=["disabled"],Tn=["value"],Fn=["value"],Rn={class:"flex gap-1"},An=["onClick"],In={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 pt-4 border-t border-white/10"},En={class:"block text-slate-300 mb-2"},On={class:"text-indigo-400"},Dn={class:"flex items-center gap-3"},Pn={class:"block text-slate-300 mb-2"},Un={class:"text-indigo-400"},Hn={class:"flex items-center gap-3"},Nn={class:"flex gap-2"},qn={key:0,class:"flex flex-wrap gap-2 mt-3"},Kn={class:"glass-card w-full max-w-md max-h-[80vh] overflow-y-auto"},Jn={class:"flex items-center justify-between p-4 border-b border-white/10"},Gn={class:"p-4 space-y-4"},Qn={class:"flex gap-2"},Wn={key:0,class:"space-y-2"},Xn={class:"space-y-2 max-h-60 overflow-y-auto"},Yn=["onClick"],Zn=["onClick"],eo={key:1,class:"text-center text-slate-500 py-4"},to=N({__name:"TalentFilterPanel",emits:["apply","clear"],setup(o,{expose:L,emit:p}){const w=p,c=_(!1),a=_({city:"",district:"",skillCategory:"",hiringStatus:"",minRating:0,minSkills:0,membership:""}),r=_(["台北市","新北市","桃園市","台中市","台南市","高雄市"]),n=_(["中山區","大安區","信義區","松山區","萬華區","中正區"]),h=P(()=>Object.entries(ge).map(([g,u])=>({key:g,name:u.name||g,icon:u.icon||"✨"}))),F=_([{value:"open",label:"開放中"},{value:"closed",label:"已關閉"},{value:"",label:"全部"}]),I=P(()=>{let g=0;return a.value.city&&g++,a.value.district&&g++,a.value.skillCategory&&g++,a.value.hiringStatus&&g++,a.value.minRating>0&&g++,a.value.minSkills>0&&g++,a.value.membership&&g++,g}),b=P(()=>{const g=[];if(a.value.city&&g.push({key:"city",value:a.value.city,label:`城市: ${a.value.city}`}),a.value.district&&g.push({key:"district",value:a.value.district,label:`區域: ${a.value.district}`}),a.value.skillCategory){const u=h.value.find(k=>k.key===a.value.skillCategory);g.push({key:"skillCategory",value:a.value.skillCategory,label:`類別: ${u?.icon} ${u?.name}`})}if(a.value.hiringStatus){const u=F.value.find(k=>k.value===a.value.hiringStatus);g.push({key:"hiringStatus",value:a.value.hiringStatus,label:u?.label||""})}return a.value.minRating>0&&g.push({key:"minRating",value:String(a.value.minRating),label:`${a.value.minRating}+ 評分`}),a.value.minSkills>0&&g.push({key:"minSkills",value:String(a.value.minSkills),label:`${a.value.minSkills}+ 技能`}),a.value.membership&&g.push({key:"membership",value:a.value.membership,label:a.value.membership==="member"?"中心成員":"外部人才"}),g}),E=()=>{w("apply",{...a.value})},M=()=>{a.value={city:"",district:"",skillCategory:"",hiringStatus:"",minRating:0,minSkills:0,membership:""},w("clear")},f=(g,u)=>{switch(g){case"city":a.value.city="";break;case"district":a.value.district="";break;case"skillCategory":a.value.skillCategory="";break;case"hiringStatus":a.value.hiringStatus="";break;case"minRating":a.value.minRating=0;break;case"minSkills":a.value.minSkills=0;break;case"membership":a.value.membership="";break}w("apply",{...a.value})},R=_([]),y=_(!1),O=_(""),K=()=>{try{const g=localStorage.getItem("talentFilterPresets");g&&(R.value=JSON.parse(g))}catch(g){console.error("載入預設失敗:",g)}},H=()=>{try{localStorage.setItem("talentFilterPresets",JSON.stringify(R.value))}catch(g){console.error("儲存預設失敗:",g)}},j=()=>{if(!O.value.trim()){alert("請輸入預設名稱");return}const g={id:Date.now().toString(),name:O.value.trim(),filters:{...a.value}};R.value.push(g),H(),O.value="",y.value=!1,Ne().success(`已儲存篩選預設「${g.name}」`)},A=g=>{a.value={...g.filters},w("apply",{...a.value})},C=g=>{R.value=R.value.filter(u=>u.id!==g),H()};return K(),L({clearFilters:M,expanded:c}),(g,u)=>{const k=ne;return t(),s(B,null,[e("div",Bn,[e("button",{onClick:u[0]||(u[0]=x=>c.value=!l(c)),class:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/5 hover:bg-white/10 text-slate-300 transition-colors text-sm"},[u[14]||(u[14]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1)),u[15]||(u[15]=z(" 進階篩選 ",-1)),(t(),s("svg",{class:T(["w-4 h-4 transition-transform",{"rotate-180":l(c)}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...u[13]||(u[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2)),l(I)>0?(t(),G(k,{key:0,variant:"info",size:"xs"},{default:q(()=>[z(d(l(I)),1)]),_:1})):S("",!0)]),U(ke,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:q(()=>[W(e("div",jn,[e("div",Vn,[e("div",null,[u[17]||(u[17]=e("label",{class:"block text-slate-300 mb-2"},"城市",-1)),W(e("select",{"onUpdate:modelValue":u[1]||(u[1]=x=>l(a).city=x),class:"w-full px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white focus:outline-none focus:border-indigo-500"},[u[16]||(u[16]=e("option",{value:""},"全部城市",-1)),(t(!0),s(B,null,V(l(r),x=>(t(),s("option",{key:x,value:x},d(x),9,zn))),128))],512),[[ve,l(a).city]])]),e("div",null,[u[19]||(u[19]=e("label",{class:"block text-slate-300 mb-2"},"區域",-1)),W(e("select",{"onUpdate:modelValue":u[2]||(u[2]=x=>l(a).district=x),disabled:!l(a).city,class:"w-full px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white focus:outline-none focus:border-indigo-500 disabled:opacity-50"},[u[18]||(u[18]=e("option",{value:""},"全部區域",-1)),(t(!0),s(B,null,V(l(n),x=>(t(),s("option",{key:x,value:x},d(x),9,Tn))),128))],8,Ln),[[ve,l(a).district]])]),e("div",null,[u[21]||(u[21]=e("label",{class:"block text-slate-300 mb-2"},"技能類別",-1)),W(e("select",{"onUpdate:modelValue":u[3]||(u[3]=x=>l(a).skillCategory=x),class:"w-full px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white focus:outline-none focus:border-indigo-500"},[u[20]||(u[20]=e("option",{value:""},"全部類別",-1)),(t(!0),s(B,null,V(l(h),x=>(t(),s("option",{key:x.key,value:x.key},d(x.icon)+" "+d(x.name),9,Fn))),128))],512),[[ve,l(a).skillCategory]])]),e("div",null,[u[22]||(u[22]=e("label",{class:"block text-slate-300 mb-2"},"徵才狀態",-1)),e("div",Rn,[(t(!0),s(B,null,V(l(F),x=>(t(),s("button",{key:x.value,onClick:Q=>l(a).hiringStatus=x.value,class:T(["flex-1 px-2 py-1.5 rounded-lg text-xs transition-colors",l(a).hiringStatus===x.value?"bg-indigo-500 text-white":"bg-white/5 text-slate-400 hover:bg-white/10"])},d(x.label),11,An))),128))])])]),e("div",In,[e("div",null,[e("label",En,[u[23]||(u[23]=z(" 最低評分 ",-1)),e("span",On,d(l(a).minRating)+"+",1)]),e("div",Dn,[W(e("input",{type:"range","onUpdate:modelValue":u[4]||(u[4]=x=>l(a).minRating=x),min:"0",max:"5",step:"0.5",class:"flex-1 h-2 bg-white/10 rounded-full appearance-none cursor-pointer"},null,512),[[me,l(a).minRating,void 0,{number:!0}]]),l(a).minRating>0?(t(),s("button",{key:0,onClick:u[5]||(u[5]=x=>l(a).minRating=0),class:"text-xs text-slate-400 hover:text-slate-300"}," 清除 ")):S("",!0)])]),e("div",null,[e("label",Pn,[u[24]||(u[24]=z(" 最低技能數 ",-1)),e("span",Un,d(l(a).minSkills)+"+",1)]),e("div",Hn,[W(e("input",{type:"range","onUpdate:modelValue":u[6]||(u[6]=x=>l(a).minSkills=x),min:"0",max:"10",step:"1",class:"flex-1 h-2 bg-white/10 rounded-full appearance-none cursor-pointer"},null,512),[[me,l(a).minSkills,void 0,{number:!0}]]),l(a).minSkills>0?(t(),s("button",{key:0,onClick:u[7]||(u[7]=x=>l(a).minSkills=0),class:"text-xs text-slate-400 hover:text-slate-300"}," 清除 ")):S("",!0)])]),e("div",null,[u[25]||(u[25]=e("label",{class:"block text-slate-300 mb-2"},"會籍狀態",-1)),e("div",Nn,[e("button",{onClick:u[8]||(u[8]=x=>l(a).membership=l(a).membership==="member"?"":"member"),class:T(["flex-1 px-3 py-1.5 rounded-lg text-sm transition-colors",l(a).membership==="member"?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-white/5 text-slate-400 hover:bg-white/10"])}," 中心成員 ",2),e("button",{onClick:u[9]||(u[9]=x=>l(a).membership=l(a).membership==="external"?"":"external"),class:T(["flex-1 px-3 py-1.5 rounded-lg text-sm transition-colors",l(a).membership==="external"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-white/5 text-slate-400 hover:bg-white/10"])}," 外部人才 ",2)])])]),e("div",{class:"flex items-center gap-3 mt-4 pt-4 border-t border-white/10"},[e("button",{onClick:E,class:"px-4 py-2 rounded-lg bg-primary-500 text-white hover:bg-primary-600 transition-colors"}," 套用篩選 "),e("button",{onClick:M,class:"px-4 py-2 rounded-lg bg-white/5 text-slate-400 hover:bg-white/10 transition-colors"}," 清除全部 "),e("button",{onClick:j,class:"px-4 py-2 rounded-lg bg-white/5 text-slate-400 hover:bg-white/10 transition-colors flex items-center gap-1 ml-auto"},[...u[26]||(u[26]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})],-1),z(" 儲存為常用 ",-1)])])])],512),[[pt,l(c)]])]),_:1}),l(b).length>0?(t(),s("div",qn,[(t(!0),s(B,null,V(l(b),x=>(t(),G(k,{key:`${x.key}-${x.value}`,variant:"primary",size:"sm",removable:"",onRemove:Q=>f(x.key,x.value)},{default:q(()=>[z(d(x.label),1)]),_:2},1032,["onRemove"]))),128))])):S("",!0)]),(t(),G(bt,{to:"body"},[l(y)?(t(),s("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",onClick:u[12]||(u[12]=ie(x=>y.value=!1,["self"]))},[e("div",Kn,[e("div",Jn,[u[28]||(u[28]=e("h3",{class:"text-lg font-semibold text-white"},"儲存篩選預設",-1)),e("button",{onClick:u[10]||(u[10]=x=>y.value=!1),class:"p-2 rounded-lg hover:bg-white/10"},[...u[27]||(u[27]=[e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Gn,[e("div",Qn,[W(e("input",{"onUpdate:modelValue":u[11]||(u[11]=x=>ae(O)?O.value=x:null),type:"text",placeholder:"輸入預設名稱",class:"flex-1 px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white placeholder-slate-500 focus:outline-none focus:border-indigo-500",onKeyup:he(j,["enter"])},null,544),[[me,l(O)]]),e("button",{onClick:j,class:"px-4 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-500 text-white transition-colors"}," 儲存 ")]),l(R).length>0?(t(),s("div",Wn,[u[30]||(u[30]=e("h4",{class:"text-sm text-slate-400"},"已儲存的預設",-1)),e("div",Xn,[(t(!0),s(B,null,V(l(R),x=>(t(),s("div",{key:x.id,class:"flex items-center justify-between p-3 rounded-lg bg-white/5 hover:bg-white/10 transition-colors group"},[e("button",{onClick:Q=>A(x),class:"flex-1 text-left text-slate-300 hover:text-white transition-colors"},d(x.name),9,Yn),e("button",{onClick:Q=>C(x.id),class:"p-1 rounded hover:bg-red-500/20 text-slate-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-all"},[...u[29]||(u[29]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Zn)]))),128))])])):(t(),s("div",eo," 尚未儲存任何預設 "))])])])):S("",!0)]))],64)}}}),so=He(to,[["__scopeId","data-v-90df0d3d"]]),lo={class:"quick-filter-tags"},no={class:"flex items-center gap-2 overflow-x-auto pb-2 scrollbar-hide"},oo=["onClick"],ao=["onClick"],io={class:"flex items-center gap-1 ml-2"},ro=["onClick"],co=N({__name:"QuickFilterTags",props:{popularSkills:{},popularTags:{},activeSkills:{},activeTags:{},activeRating:{}},emits:["filterBySkill","filterByTag","filterByRating","clearAll"],setup(o){const L=o,p=[3,4,5],w=P(()=>L.activeSkills.length>0||L.activeTags.length>0||L.activeRating>0);return(c,a)=>(t(),s("div",lo,[e("div",no,[a[5]||(a[5]=e("span",{class:"text-sm text-slate-400 shrink-0"},"快速篩選：",-1)),(t(!0),s(B,null,V(o.popularSkills,r=>(t(),s("button",{key:r,onClick:n=>c.$emit("filterBySkill",r),class:T(["px-3 py-1.5 rounded-full text-sm whitespace-nowrap transition-all",o.activeSkills.includes(r)?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/25":"bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white"])},[a[1]||(a[1]=e("svg",{class:"w-3.5 h-3.5 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})],-1)),z(" "+d(r),1)],10,oo))),128)),a[6]||(a[6]=e("div",{class:"w-px h-6 bg-white/10 shrink-0"},null,-1)),(t(!0),s(B,null,V(o.popularTags,r=>(t(),s("button",{key:r,onClick:n=>c.$emit("filterByTag",r),class:T(["px-3 py-1.5 rounded-full text-sm whitespace-nowrap transition-all",o.activeTags.includes(r)?"bg-primary-500 text-white shadow-lg shadow-primary-500/25":"bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white"])},[a[2]||(a[2]=e("span",{class:"text-primary-400"},"#",-1)),z(d(r),1)],10,ao))),128)),e("div",io,[(t(),s(B,null,V(p,r=>e("button",{key:r,onClick:n=>c.$emit("filterByRating",r),class:T(["px-2 py-1 rounded-full text-xs whitespace-nowrap transition-all flex items-center gap-1",o.activeRating===r?"bg-yellow-500 text-white shadow-lg shadow-yellow-500/25":"bg-white/5 text-slate-400 hover:bg-white/10"])},[a[3]||(a[3]=e("svg",{class:"w-3 h-3 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1)),z(" "+d(r)+"+ ",1)],10,ro)),64))]),l(w)?(t(),s("button",{key:0,onClick:a[0]||(a[0]=r=>c.$emit("clearAll")),class:"px-3 py-1.5 rounded-full text-sm whitespace-nowrap bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-all ml-auto shrink-0"},[...a[4]||(a[4]=[e("svg",{class:"w-3.5 h-3.5 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),z(" 清除篩選 ",-1)])])):S("",!0)])]))}}),uo=He(co,[["__scopeId","data-v-95f0db60"]]),vo={class:"search-suggestions relative"},mo={class:"relative"},ho=["value","onKeydown"],go={key:0,class:"absolute z-50 w-full mt-2 bg-slate-800 border border-white/10 rounded-xl shadow-2xl overflow-hidden"},xo={key:0,class:"p-3 border-b border-white/10"},po={class:"flex flex-wrap gap-2"},bo=["onClick"],fo={key:1,class:"p-3"},wo={key:0,class:"text-xs text-slate-500 mb-2"},ko=["onClick"],yo={class:"flex-1"},$o={class:"text-white"},_o={key:2,class:"p-3 border-t border-white/10"},Co=["onClick"],So={class:"text-slate-300"},Mo={class:"text-xs text-slate-500 ml-auto"},Bo=N({__name:"SearchSuggestions",props:{modelValue:{}},emits:["update:modelValue","search","selectSuggestion"],setup(o,{emit:L}){const p=o,w=L,c=_(p.modelValue),a=_(!1),r=_([]),n=_([]),h=_(["瑜珈","鋼琴","舞蹈","美術","英語"]);ft(()=>p.modelValue,C=>{c.value=C});const F=C=>{const g=C.target;c.value=g.value,w("update:modelValue",c.value),c.value.length>0?I():r.value=[]},I=async()=>{const C=c.value.toLowerCase();if(C.length===0){r.value=[];return}try{const u=await se().get(`/admin/smart-matching/suggestions?q=${encodeURIComponent(C)}`);if(u.code===0&&u.datas){const k=u.datas;r.value=[],k.skills&&k.skills.forEach(x=>{r.value.push({type:"skill",value:x.value})}),k.tags&&k.tags.forEach(x=>{r.value.push({type:"tag",value:x.value})}),k.names&&k.names.forEach(x=>{r.value.push({type:"name",value:x.value})}),k.trending&&(h.value=k.trending)}r.value.length===0&&b(C)}catch(g){console.error("Failed to fetch suggestions:",g),b(C)}},b=C=>{const g=[{type:"skill",value:"瑜珈"},{type:"skill",value:"皮拉提斯"},{type:"skill",value:"有氧舞蹈"},{type:"skill",value:"鋼琴教學"},{type:"skill",value:"小提琴"}].filter(k=>k.value.toLowerCase().includes(C)),u=[{type:"tag",value:"古典"},{type:"tag",value:"兒童"},{type:"tag",value:"成人"},{type:"tag",value:"進階"},{type:"tag",value:"入門"}].filter(k=>k.value.toLowerCase().includes(C));r.value=[...g,...u].slice(0,6)},E=C=>{c.value=C.value,w("update:modelValue",C.value),w("selectSuggestion",C),a.value=!1,R(C.value)},M=()=>{c.value.trim()&&(w("search",c.value),a.value=!1,R(c.value))},f=C=>{c.value=C.query,w("update:modelValue",C.query),a.value=!1,w("search",C.query)},R=C=>{const g={id:Date.now().toString(),query:C,timestamp:Date.now()};n.value=n.value.filter(u=>u.query!==C),n.value.unshift(g),n.value.length>10&&(n.value=n.value.slice(0,10)),j()},y=()=>{n.value=[],localStorage.removeItem("talent_recent_searches")},O=()=>{c.value="",w("update:modelValue",""),r.value=[]},K=C=>{switch(C){case"skill":return"技能";case"tag":return"標籤";case"name":return"姓名";default:return""}},H=C=>{const g=Date.now()-C,u=Math.floor(g/6e4),k=Math.floor(g/36e5),x=Math.floor(g/864e5);return u<1?"剛剛":u<60?`${u} 分鐘前`:k<24?`${k} 小時前`:`${x} 天前`},j=()=>{try{localStorage.setItem("talent_recent_searches",JSON.stringify(n.value))}catch(C){console.error("Failed to save recent searches:",C)}},A=()=>{try{const C=localStorage.getItem("talent_recent_searches");C&&(n.value=JSON.parse(C))}catch(C){console.error("Failed to load recent searches:",C)}};return we(()=>{A()}),(C,g)=>(t(),s("div",vo,[e("div",mo,[e("input",{value:l(c),onInput:F,onFocus:g[0]||(g[0]=u=>a.value=!0),onKeydown:[he(ie(M,["prevent"]),["enter"]),g[1]||(g[1]=he(u=>a.value=!1,["escape"]))],type:"text",placeholder:"搜尋人才姓名、技能、標籤...",class:"w-full px-4 py-3 pl-10 rounded-xl bg-white/5 border border-white/10 text-white placeholder-slate-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all"},null,40,ho),g[4]||(g[4]=e("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),l(c)?(t(),s("button",{key:0,onClick:O,class:"absolute right-3 top-1/2 -translate-y-1/2 p-1 rounded-lg hover:bg-white/10 text-slate-400 transition-colors"},[...g[3]||(g[3]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):S("",!0)]),U(ke,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:q(()=>[l(a)&&(l(r).length>0||l(n).length>0||l(h).length>0)?(t(),s("div",go,[l(h).length>0&&!l(c)?(t(),s("div",xo,[g[5]||(g[5]=e("div",{class:"flex items-center gap-2 mb-2"},[e("svg",{class:"w-4 h-4 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})]),e("span",{class:"text-xs text-slate-400"},"熱門搜尋")],-1)),e("div",po,[(t(!0),s(B,null,V(l(h),(u,k)=>(t(),s("button",{key:k,onClick:x=>E({type:"trending",value:u}),class:"px-3 py-1 rounded-lg bg-white/5 hover:bg-white/10 text-slate-300 text-sm transition-colors"},d(u),9,bo))),128))])])):S("",!0),l(r).length>0?(t(),s("div",fo,[l(c)?(t(),s("p",wo,"搜尋建議")):S("",!0),(t(!0),s(B,null,V(l(r),u=>(t(),s("button",{key:`${u.type}-${u.value}`,onClick:k=>E(u),class:"w-full px-3 py-2 text-left flex items-center gap-3 hover:bg-white/5 rounded-lg transition-colors group"},[g[6]||(g[6]=e("div",{class:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center group-hover:bg-indigo-500/20 transition-colors"},[e("svg",{class:"w-4 h-4 text-slate-400 group-hover:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),e("div",yo,[e("span",$o,d(u.value),1),e("span",{class:T(["ml-2 px-2 py-0.5 rounded text-xs",u.type==="skill"?"bg-yellow-500/20 text-yellow-400":u.type==="tag"?"bg-primary-500/20 text-primary-400":"bg-blue-500/20 text-blue-400"])},d(K(u.type)),3)]),g[7]||(g[7]=e("svg",{class:"w-4 h-4 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,ko))),128))])):S("",!0),l(n).length>0&&!l(c)?(t(),s("div",_o,[e("div",{class:"flex items-center justify-between mb-2"},[g[8]||(g[8]=e("div",{class:"flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-xs text-slate-400"},"近期搜尋")],-1)),e("button",{onClick:y,class:"text-xs text-slate-500 hover:text-slate-300"}," 清除 ")]),(t(!0),s(B,null,V(l(n),u=>(t(),s("button",{key:u.id,onClick:k=>f(u),class:"w-full px-3 py-2 text-left flex items-center gap-3 hover:bg-white/5 rounded-lg transition-colors"},[e("span",So,d(u.query),1),e("span",Mo,d(H(u.timestamp)),1)],8,Co))),128))])):S("",!0),g[9]||(g[9]=e("div",{class:"px-3 py-2 border-t border-white/10 bg-white/5"},[e("div",{class:"flex items-center gap-4 text-xs text-slate-500"},[e("span",{class:"flex items-center gap-1"},[e("kbd",{class:"px-1.5 py-0.5 rounded bg-white/10 text-slate-400"},"Enter"),z(" 搜尋 ")]),e("span",{class:"flex items-center gap-1"},[e("kbd",{class:"px-1.5 py-0.5 rounded bg-white/10 text-slate-400"},"Esc"),z(" 關閉 ")])])],-1))])):S("",!0)]),_:1}),l(a)?(t(),s("div",{key:0,class:"fixed inset-0 z-40",onClick:g[2]||(g[2]=u=>a.value=!1)})):S("",!0)]))}}),jo={class:"talent-stats-panel"},Vo={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},zo={class:"stat-card bg-white/5 rounded-xl p-4 hover:bg-white/10 transition-colors"},Lo={class:"flex items-center justify-between mb-3"},To={class:"text-2xl font-bold text-white mb-1"},Fo={class:"mt-3 h-8 flex items-end gap-1"},Ro={class:"stat-card bg-white/5 rounded-xl p-4 hover:bg-white/10 transition-colors"},Ao={class:"flex items-center justify-between mb-3"},Io={class:"text-xs px-2 py-1 rounded-full bg-green-500/20 text-green-400"},Eo={class:"text-2xl font-bold text-white mb-1"},Oo={class:"mt-2 text-xs text-slate-500"},Do={class:"text-green-400"},Po={class:"stat-card bg-white/5 rounded-xl p-4 hover:bg-white/10 transition-colors"},Uo={class:"text-2xl font-bold text-white mb-1"},Ho={class:"mt-2 flex items-center gap-1"},No={class:"flex-1 h-1.5 bg-white/10 rounded-full overflow-hidden"},qo={class:"stat-card bg-white/5 rounded-xl p-4 hover:bg-white/10 transition-colors"},Ko={class:"flex items-center justify-between mb-3"},Jo={class:"text-xs px-2 py-1 rounded-full bg-yellow-500/20 text-yellow-400"},Go={class:"flex items-end gap-1 mb-1"},Qo={class:"text-2xl font-bold text-white"},Wo={class:"flex items-center gap-0.5 mt-2"},Xo={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4"},Yo={class:"bg-white/5 rounded-xl p-4"},Zo={class:"space-y-2"},ea={class:"text-xs text-slate-400 w-12"},ta={class:"flex-1 h-2 bg-white/10 rounded-full overflow-hidden"},sa={class:"text-xs text-slate-500 w-8 text-right"},la={class:"bg-white/5 rounded-xl p-4"},na={class:"flex flex-wrap gap-2"},oa={class:"text-xs font-medium text-white"},aa={class:"text-xs text-slate-500"},ia={class:"bg-white/5 rounded-xl p-4"},ra={class:"space-y-2"},da={class:"flex items-center justify-between text-sm"},ca={class:"text-green-400 font-medium"},ua={class:"flex items-center justify-between text-sm"},va={class:"text-yellow-400 font-medium"},ma={class:"flex items-center justify-between text-sm"},ha={class:"text-red-400 font-medium"},ga={class:"pt-2 mt-2 border-t border-white/10"},xa={class:"flex items-center justify-between text-sm"},pa={class:"text-primary-400 font-medium"},ba=N({__name:"TalentStatsPanel",props:{stats:{},cityDistribution:{},topSkills:{}},setup(o){const L=o,p=P(()=>Math.max(...L.stats.monthlyTrend,1)),w=P(()=>Math.max(...L.cityDistribution.map(r=>r.count),1)),c=P(()=>L.stats.acceptedInvites+L.stats.pendingInvites+L.stats.declinedInvites===0?0:Math.round(L.stats.acceptedInvites/(L.stats.acceptedInvites+L.stats.declinedInvites)*100)),a=r=>r>=1e3?(r/1e3).toFixed(1)+"k":r.toString();return(r,n)=>(t(),s("div",jo,[e("div",Vo,[e("div",zo,[e("div",Lo,[n[0]||(n[0]=e("div",{class:"w-10 h-10 rounded-lg bg-primary-500/20 flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("div",{class:T(["text-xs px-2 py-1 rounded-full",o.stats.monthlyChange>0?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"])},d(o.stats.monthlyChange>0?"+":"")+d(o.stats.monthlyChange)+"% ",3)]),e("div",To,d(a(o.stats.totalCount)),1),n[1]||(n[1]=e("div",{class:"text-xs text-slate-400"},"人才庫總人數",-1)),e("div",Fo,[(t(!0),s(B,null,V(o.stats.monthlyTrend,(h,F)=>(t(),s("div",{key:F,class:"flex-1 bg-gradient-to-t from-primary-500/50 to-primary-500/20 rounded-t",style:X({height:`${h/l(p)*100}%`})},null,4))),128))])]),e("div",Ro,[e("div",Ao,[n[2]||(n[2]=e("div",{class:"w-10 h-10 rounded-lg bg-green-500/20 flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Io,d((o.stats.openHiringCount/o.stats.totalCount*100).toFixed(0))+"% ",1)]),e("div",Eo,d(a(o.stats.openHiringCount)),1),n[4]||(n[4]=e("div",{class:"text-xs text-slate-400"},"開放徵才",-1)),e("div",Oo,[e("span",Do,d(o.stats.pendingInvites),1),n[3]||(n[3]=z(" 待回覆邀請 ",-1))])]),e("div",Po,[n[5]||(n[5]=e("div",{class:"flex items-center justify-between mb-3"},[e("div",{class:"w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])])],-1)),e("div",Uo,d(a(o.stats.memberCount)),1),n[6]||(n[6]=e("div",{class:"text-xs text-slate-400"},"中心成員",-1)),e("div",Ho,[e("div",No,[e("div",{class:"h-full bg-blue-500 rounded-full",style:X({width:`${o.stats.memberCount/o.stats.totalCount*100}%`})},null,4)])])]),e("div",qo,[e("div",Ko,[n[7]||(n[7]=e("div",{class:"w-10 h-10 rounded-lg bg-yellow-500/20 flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})])],-1)),e("div",Jo,d(o.stats.averageRating.toFixed(1)),1)]),e("div",Go,[e("span",Qo,d(o.stats.averageRating.toFixed(1)),1),n[8]||(n[8]=e("span",{class:"text-sm text-slate-400 mb-1"},"/ 5.0",-1))]),n[10]||(n[10]=e("div",{class:"text-xs text-slate-400"},"平均評分",-1)),e("div",Wo,[(t(),s(B,null,V(5,h=>e("svg",{key:h,class:T(["w-3 h-3",h<=Math.round(o.stats.averageRating)?"text-yellow-400":"text-slate-600"]),fill:"currentColor",viewBox:"0 0 20 20"},[...n[9]||(n[9]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.364 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"},null,-1)])],2)),64))])])]),e("div",Xo,[e("div",Yo,[n[11]||(n[11]=e("h4",{class:"text-sm font-medium text-white mb-3 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]),z(" 地區分布 ")],-1)),e("div",Zo,[(t(!0),s(B,null,V(o.cityDistribution,h=>(t(),s("div",{key:h.name,class:"flex items-center gap-2"},[e("span",ea,d(h.name),1),e("div",ta,[e("div",{class:"h-full bg-gradient-to-r from-blue-500 to-blue-400 rounded-full transition-all duration-500",style:X({width:`${h.count/l(w)*100}%`})},null,4)]),e("span",sa,d(h.count),1)]))),128))])]),e("div",la,[n[12]||(n[12]=e("h4",{class:"text-sm font-medium text-white mb-3 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})]),z(" 熱門技能 ")],-1)),e("div",na,[(t(!0),s(B,null,V(o.topSkills,(h,F)=>(t(),s("div",{key:h.name,class:"flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-white/5"},[e("span",oa,d(h.name),1),e("span",aa,d(h.count),1)]))),128))])]),e("div",ia,[n[17]||(n[17]=e("h4",{class:"text-sm font-medium text-white mb-3 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),z(" 招募狀態 ")],-1)),e("div",ra,[e("div",da,[n[13]||(n[13]=e("span",{class:"text-slate-400"},"已接受邀請",-1)),e("span",ca,d(o.stats.acceptedInvites),1)]),e("div",ua,[n[14]||(n[14]=e("span",{class:"text-slate-400"},"待回覆",-1)),e("span",va,d(o.stats.pendingInvites),1)]),e("div",ma,[n[15]||(n[15]=e("span",{class:"text-slate-400"},"已拒絕",-1)),e("span",ha,d(o.stats.declinedInvites),1)]),e("div",ga,[e("div",xa,[n[16]||(n[16]=e("span",{class:"text-slate-400"},"回覆率",-1)),e("span",pa,d(l(c))+"%",1)])])])])])]))}}),fa={class:"skills-distribution-chart bg-white/5 rounded-xl p-4"},wa={class:"flex items-center justify-between mb-4"},ka={class:"flex items-center gap-1 bg-white/5 rounded-lg p-1"},ya={key:0,class:"space-y-3"},$a={class:"flex items-center justify-between mb-1"},_a={class:"flex items-center gap-2"},Ca={class:"text-sm text-slate-300 group-hover:text-white transition-colors"},Sa={class:"flex items-center gap-2"},Ma={class:"text-xs text-slate-500"},Ba={class:"text-xs text-slate-400"},ja={class:"h-3 bg-white/10 rounded-full overflow-hidden"},Va={key:1,class:"flex items-center gap-6"},za={class:"relative w-40 h-40 shrink-0"},La={viewBox:"0 0 100 100",class:"w-full h-full -rotate-90"},Ta=["stroke","stroke-dasharray","stroke-dashoffset","onClick"],Fa={class:"absolute inset-0 flex flex-col items-center justify-center"},Ra={class:"text-2xl font-bold text-white"},Aa={class:"flex-1 grid grid-cols-2 gap-2"},Ia=["onClick"],Ea={class:"min-w-0"},Oa={class:"text-sm text-slate-300 truncate"},Da={class:"text-xs text-slate-500"},Pa={class:"mt-4 pt-4 border-t border-white/10"},Ua={class:"flex items-center justify-between text-xs"},Ha={class:"text-slate-500"},Na={class:"text-slate-400"},qa=N({__name:"SkillsDistributionChart",props:{skills:{},totalTeachers:{}},emits:["selectSkill"],setup(o,{emit:L}){const p=o,w=_("bar"),c=P(()=>Math.max(...p.skills.map(M=>M.count),1)),a=P(()=>p.skills.reduce((M,f)=>M+f.count,0)),r=P(()=>p.totalTeachers===0?0:a.value/p.totalTeachers),n=M=>(M/a.value*100).toFixed(1),h=M=>["瑜珈","鋼琴","舞蹈","美術","英語"].includes(M),F=M=>["瑜珈","鋼琴","舞蹈"].includes(M)?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-primary-500 to-secondary-500",I=M=>{const f=["#6366f1","#a855f7","#f59e0b","#10b981","#3b82f6","#ef4444","#ec4899","#14b8a6"];return f[M%f.length]},b=(M,f)=>{const R=2*Math.PI*40;return`${M/a.value*R} ${R}`},E=M=>{const f=2*Math.PI*40;let R=0;for(let y=0;y<M;y++){const O=p.skills[y].count/a.value;R-=O*f}return String(R)};return(M,f)=>{const R=ne;return t(),s("div",fa,[e("div",wa,[f[4]||(f[4]=e("h4",{class:"text-sm font-medium text-white flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]),z(" 技能分布 ")],-1)),e("div",ka,[e("button",{class:T(["p-1 rounded",l(w)==="bar"?"bg-indigo-500 text-white":"text-slate-400 hover:text-white"]),onClick:f[0]||(f[0]=y=>w.value="bar"),title:"長條圖"},[...f[2]||(f[2]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])],2),e("button",{class:T(["p-1 rounded",l(w)==="pie"?"bg-indigo-500 text-white":"text-slate-400 hover:text-white"]),onClick:f[1]||(f[1]=y=>w.value="pie"),title:"圓餅圖"},[...f[3]||(f[3]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"})],-1)])],2)])]),l(w)==="bar"?(t(),s("div",ya,[(t(!0),s(B,null,V(o.skills,y=>(t(),s("div",{key:y.name,class:"skill-bar group"},[e("div",$a,[e("div",_a,[e("span",Ca,d(y.name),1),h(y.name)?(t(),G(R,{key:0,variant:"warning",size:"xs"},{default:q(()=>[...f[5]||(f[5]=[z(" Hot ",-1)])]),_:1})):S("",!0)]),e("div",Sa,[e("span",Ma,d(y.count)+" 人",1),e("span",Ba,d(n(y.count))+"%",1)])]),e("div",ja,[e("div",{class:T(["h-full rounded-full transition-all duration-700 ease-out",F(y.name)]),style:X({width:`${y.count/l(c)*100}%`})},null,6)])]))),128))])):(t(),s("div",Va,[e("div",za,[(t(),s("svg",La,[(t(!0),s(B,null,V(o.skills,(y,O)=>(t(),s("circle",{key:y.name,cx:"50",cy:"50",r:"40",fill:"transparent",stroke:I(O),"stroke-width":"20","stroke-dasharray":b(y.count),"stroke-dashoffset":E(O),class:"transition-all duration-700 ease-out hover:opacity-80 cursor-pointer",onClick:K=>M.$emit("selectSkill",y.name)},null,8,Ta))),128))])),e("div",Fa,[e("span",Ra,d(l(a)),1),f[6]||(f[6]=e("span",{class:"text-xs text-slate-400"},"總計",-1))])]),e("div",Aa,[(t(!0),s(B,null,V(o.skills,(y,O)=>(t(),s("div",{key:y.name,class:"flex items-center gap-2 p-2 rounded-lg hover:bg-white/5 cursor-pointer transition-colors",onClick:K=>M.$emit("selectSkill",y.name)},[e("div",{class:"w-3 h-3 rounded-full shrink-0",style:X({backgroundColor:I(O)})},null,4),e("div",Ea,[e("div",Oa,d(y.name),1),e("div",Da,d(n(y.count))+"%",1)])],8,Ia))),128))])])),e("div",Pa,[e("div",Ua,[e("span",Ha,"涵蓋 "+d(o.skills.length)+" 種技能類型",1),e("span",Na,"平均每人 "+d(l(r).toFixed(1))+" 種技能",1)])])])}}}),Ka={class:"p-4 md:p-6",role:"main","aria-label":"智慧媒合系統"},Ja={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ga={class:"glass-card p-4 md:p-6",role:"region","aria-label":"搜尋條件"},Qa={class:"grid grid-cols-1 sm:grid-cols-2 gap-4",role:"group","aria-labelledby":"datetime-range-label"},Wa={class:"flex flex-col sm:flex-row gap-3 pt-4"},Xa=["disabled","aria-busy"],Ya={key:0,role:"status"},Za={key:1},ei={class:"glass-card p-4 md:p-6",role:"region","aria-label":"媒合結果"},ti={key:0,class:"text-center py-12 text-slate-500",role:"status"},si={key:1,class:"text-center py-12 text-slate-500",role:"status"},li={key:2},ni={key:3,class:"py-12"},oi={class:"max-w-md mx-auto"},ai={class:"flex items-center justify-between text-xs text-slate-500 mb-1"},ii={class:"h-2 bg-white/10 rounded-full overflow-hidden"},ri={class:"mt-6 space-y-2 max-w-sm mx-auto"},di={class:"w-5 h-5 rounded-full flex items-center justify-center"},ci={key:0,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},ui={key:1,class:"w-2 h-2 rounded-full bg-primary-500 animate-pulse"},vi={key:2,class:"w-2 h-2 rounded-full bg-slate-600"},mi={key:1,class:"grid grid-cols-1 gap-3"},hi={key:2,class:"space-y-3"},gi=["onClick"],xi={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-3"},pi={class:"flex items-center gap-3"},bi={class:"w-10 h-10 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center shrink-0"},fi={class:"text-white font-medium"},wi={class:"text-white font-medium"},ki={class:"text-sm text-slate-400"},yi={class:"flex items-center gap-3"},$i={class:"text-right"},_i={class:"text-2xl font-bold text-primary-500"},Ci=["checked","onChange"],Si={class:"flex flex-wrap items-center gap-3 text-sm text-slate-400 mb-3"},Mi={class:"flex items-center gap-1"},Bi={class:"flex items-center gap-1"},ji={key:0,class:"mb-3"},Vi={class:"flex flex-wrap gap-2"},zi={key:1,class:"text-sm text-slate-400 mb-3"},Li=["onClick"],Ti={key:3,class:"mt-6"},Fi={key:0,class:"mt-4"},Ri={class:"mt-6 glass-card p-4 md:p-6"},Ai={class:"flex items-center justify-between mb-4"},Ii={key:0,class:"mb-6"},Ei={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},Oi={class:"bg-white/5 rounded-xl p-4"},Di={class:"flex flex-wrap gap-2"},Pi=["onClick"],Ui={class:"mt-4"},Hi={key:1,class:"mt-4 flex items-center justify-between"},Ni={class:"text-sm text-slate-400"},qi={class:"text-white font-medium"},Ki={class:"flex items-center gap-2"},Ji={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Gi={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qi={key:2,class:"mt-4"},Wi={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-20"},Xi={key:3,class:"text-center py-12 text-slate-500"},or=N({__name:"matching",setup(o){const L=Ne(),{warning:p,success:w}=wt(),c=_(!1),a=_(!1),r=_(!1),n=_([]),h=_([]),{getCenterId:F}=kt(),I=_(0),b=_([{name:"取得老師清單",completed:!1,active:!1},{name:"分析可用時間",completed:!1,active:!1},{name:"計算技能匹配度",completed:!1,active:!1},{name:"評估緩衝時間",completed:!1,active:!1},{name:"產生媒合結果",completed:!1,active:!1}]),E=()=>{const m=b.value;let i=0,$=-1;for(let v=0;v<m.length;v++)m[v].completed&&(i=Math.floor((v+1)/m.length*100),$=v);i=Math.min(i,100),I.value=i,m.forEach((v,D)=>{v.active=D===$+1&&!v.completed})},M=()=>{I.value=0,b.value=[{name:"取得老師清單",completed:!1,active:!0},{name:"分析可用時間",completed:!1,active:!1},{name:"計算技能匹配度",completed:!1,active:!1},{name:"評估緩衝時間",completed:!1,active:!1},{name:"產生媒合結果",completed:!1,active:!1}]},f=m=>{m<b.value.length&&(b.value[m].completed=!0,b.value[m].active=!1,m+1<b.value.length&&(b.value[m+1].active=!0),E())},R=_(null),y=_([]),O=_("score"),K=_("desc"),H=_("card"),j=_(new Set),A=_(null),C=_([]),g=_([]),u=_(!1),k=_({start_time:"",end_time:"",room_ids:[],skills:""}),x=_({query:"",city:"",skills:"",hashtags:""}),Q=_([]),Y=_(new Set),re=_(new Map),ye=_(new Set),$e=_(!1),xe=_(0),_e=_(!1),oe=_(!1),pe=_("relevance"),be=_("desc"),Z=_([]),ee=_([]),Ce=_({totalCount:0,openHiringCount:0,memberCount:0,averageRating:0,monthlyChange:0,monthlyTrend:[],pendingInvites:0,acceptedInvites:0,declinedInvites:0}),Se=_([]),Me=_([]),Be=_([]),fe=_([]),qe=async()=>{try{const i=await se().get("/admin/smart-matching/talent/stats");if(i.code===0&&i.datas){const $=i.datas;Ce.value={totalCount:$.total_count||0,openHiringCount:$.open_hiring_count||0,memberCount:$.member_count||0,averageRating:$.average_rating||0,monthlyChange:$.monthly_change||0,monthlyTrend:$.monthly_trend||[],pendingInvites:$.pending_invites||0,acceptedInvites:$.accepted_invites||0,declinedInvites:$.declined_invites||0},$.city_distribution&&(Se.value=$.city_distribution),$.top_skills&&(Me.value=$.top_skills,Be.value=$.top_skills.slice(0,8),fe.value=$.top_skills.slice(0,6).map(v=>v.name))}}catch(m){console.error("Failed to fetch talent stats:",m),Ce.value={totalCount:0,openHiringCount:0,memberCount:0,averageRating:0,monthlyChange:0,monthlyTrend:[],pendingInvites:0,acceptedInvites:0,declinedInvites:0},Se.value=[],Me.value=[],Be.value=[],fe.value=[]}},Te=P(()=>{let m=[...Q.value];return Z.value.length>0&&(m=m.filter(i=>i.skills?.some($=>Z.value.includes($.name)))),ee.value.length>0&&(m=m.filter(i=>i.personal_hashtags?.some($=>ee.value.includes($)))),m.sort((i,$)=>{let v=0;switch(pe.value){case"name":v=i.name.localeCompare($.name);break;case"skills":const D=i.skills?.length||0,le=$.skills?.length||0;v=D-le;break;default:v=0}return be.value==="desc"?-v:v}),m}),de=P(()=>{const m=[...n.value];return m.sort((i,$)=>{let v=0;switch(O.value){case"score":v=i.match_score-$.match_score;break;case"availability":const D={AVAILABLE:0,BUFFER_CONFLICT:1,OVERLAP:2};v=(D[i.availability]||0)-(D[$.availability]||0);break;case"rating":v=(i.rating||0)-($.rating||0);break;case"skill-match":v=i.skill_match-$.skill_match;break}return K.value==="desc"?-v:v}),m}),Ke=m=>{k.value.start_time=m.start_time.slice(0,16),k.value.end_time=m.end_time.slice(0,16),k.value.room_ids=[...m.room_ids],y.value=[...m.skills]},Je=()=>{},Fe=(m,i)=>{if(i){if(j.value.size>=3){p("最多只能選取 3 位老師進行比較");return}j.value.add(m)}else j.value.delete(m)},Ge=m=>{j.value.delete(m.teacher_id)},Qe=()=>{H.value="card"},We=(m,i)=>{i?Y.value.add(m):Y.value.delete(m)},Xe=()=>{Y.value.clear()},Ye=async m=>{ye.value.add(m.id);try{const $=await se().post("/admin/smart-matching/talent/invite",{teacher_ids:[m.id],message:""});if($.code===0)re.value.set(m.id,{sent:!0,variant:"success",text:"已邀請"}),w(`已向 ${m.name} 發送合作邀請`);else throw new Error($.message||"邀請失敗")}catch(i){console.error("Failed to send invitation:",i),re.value.set(m.id,{sent:!1,variant:"error",text:"邀請失敗"}),p("邀請失敗，請稍後再試")}finally{ye.value.delete(m.id)}},Ze=async()=>{if(Y.value.size===0){await p("請先選取要邀請的人才");return}if(!await Oe(`確定要邀請選取的 ${Y.value.size} 位人才嗎？`))return;$e.value=!0,xe.value=0;const m=Array.from(Y.value);try{const $=await se().post("/admin/smart-matching/talent/invite",{teacher_ids:m,message:""});if($.code===0){const v=$.datas;m.forEach(D=>{v.failed_ids&&v.failed_ids.includes(D)?re.value.set(D,{sent:!1,variant:"error",text:"邀請失敗"}):re.value.set(D,{sent:!0,variant:"success",text:"已邀請"})}),xe.value=100,w(`已成功邀請 ${v.invited_count} 位人才，失敗 ${v.failed_count} 位`)}else throw new Error($.message||"邀請失敗")}catch(i){console.error("Failed to bulk invite:",i),p("批量邀請失敗，請稍後再試"),m.forEach($=>{re.value.set($,{sent:!1,variant:"error",text:"邀請失敗"})})}finally{$e.value=!1,xe.value=0,Y.value.clear()}},et=()=>{const m=Q.value.filter(J=>Y.value.has(J.id));if(m.length===0){p("請先選取要匯出的人才");return}const i=["姓名","城市","區域","聯絡方式","技能","標籤"],$=m.map(J=>[J.name,J.city||"",J.district||"",J.public_contact_info||"",J.skills?.map(ze=>ze.name).join(", ")||"",J.personal_hashtags?.join(", ")||""]),v=[i.join(","),...$.map(J=>J.map(ze=>`"${ze}"`).join(","))].join(`
`),D=new Blob([v],{type:"text/csv;charset=utf-8;"}),le=document.createElement("a");le.href=URL.createObjectURL(D),le.download=`人才庫匯出_${Ee()}.csv`,le.click(),URL.revokeObjectURL(le.href),w(`已匯出 ${m.length} 位人才的聯絡資訊`)},ce=async m=>{a.value=!0,_e.value=!0;try{const i=se(),$=new URLSearchParams;(m||x.value.query)&&$.append("keyword",m||x.value.query),x.value.city&&$.append("city",x.value.city),x.value.skills&&$.append("skills",x.value.skills),x.value.hashtags&&$.append("hashtags",x.value.hashtags);const v=await i.get(`/admin/smart-matching/talent/search?${$.toString()}`);Q.value=v.datas||[],oe.value=!0}catch(i){console.error("Failed to search talent:",i),Q.value=[],oe.value=!0,await De("搜尋人才失敗，請稍後再試")}finally{a.value=!1}},tt=m=>{x.value.query=m.value,m.type==="skill"?x.value.skills=m.value:m.type==="tag"&&(x.value.hashtags=m.value),ce()},Re=m=>{x.value.skills=m,Z.value=[m],ce()},st=m=>{Z.value.includes(m)?Z.value=Z.value.filter(i=>i!==m):Z.value=[...Z.value,m]},lt=m=>{ee.value.includes(m)?ee.value=ee.value.filter(i=>i!==m):ee.value=[...ee.value,m]},je=()=>{Z.value=[],ee.value=[]},nt=m=>{m.city&&(x.value.city=m.city),m.skills&&(x.value.skills=m.skills),m.hashtags&&(x.value.hashtags=m.hashtags),ce()},ot=()=>{x.value={query:"",city:"",skills:"",hashtags:""},je(),ce()},at=()=>{x.value={query:"",city:"",skills:"",hashtags:""},_e.value=!1,Q.value=[],je(),oe.value=!1},it=m=>{w(`正在查看 ${m.name} 的詳細資訊`)},rt=m=>{if(j.value.size>=3){p("最多只能選取 3 位老師進行比較");return}j.value.add(m.id),w(`已將 ${m.name} 加入比較`)},Ve=async m=>{A.value=m;try{const i=se(),$=k.value.start_time?te(new Date(k.value.start_time)):Ee(),v=k.value.end_time?te(new Date(k.value.end_time)):te(new Date(Date.now()+10080*60*1e3)),D=await i.get(`/admin/teachers/${m.teacher_id}/sessions?start_date=${$}&end_date=${v}`);if(D.code===0&&D.datas){const le=D.datas;C.value=le.sessions.map(J=>({id:J.id,course_name:J.course_name,start_time:J.start_time,end_time:J.end_time,room_name:J.room_name||"未指定教室"}))}else C.value=[]}catch(i){console.error("Failed to fetch teacher sessions:",i),C.value=[],await De("取得老師課表失敗")}await dt(m),w(`正在查看 ${m.teacher_name} 的課表`)},dt=async m=>{if(!k.value.start_time||!k.value.end_time){g.value=[];return}try{const $=await se().post("/admin/smart-matching/alternatives",{teacher_id:m.teacher_id,original_start:te(new Date(k.value.start_time)),original_end:te(new Date(k.value.end_time)),duration:90});$.code===0&&$.datas?g.value=$.datas.map(v=>({date:v.date,dateLabel:v.date_label,start:v.start,end:v.end,available:v.available,availableRooms:v.available_rooms||[],conflictReason:v.conflict_reason})):g.value=[]}catch(i){console.error("Failed to fetch alternative slots:",i),g.value=[]}},ct=m=>{k.value.start_time=`${m.date}T${m.start}`,k.value.end_time=`${m.date}T${m.end}`,w(`已選擇替代時段 ${m.dateLabel} ${m.start}-${m.end}`),Ae()},ut=async()=>{await Oe("確定要在緩衝衝突的情況下安排這位老師嗎？")&&Ie(A.value)},Ae=async()=>{if(!k.value.start_time||!k.value.end_time){await p("請填寫開始時間和結束時間");return}c.value=!0,r.value=!0,n.value=[],j.value.clear(),H.value="card",A.value=null,M();const m=async()=>{await ue(200),f(0),await ue(150),f(1),await ue(150),f(2),await ue(100),f(3),await ue(100),f(4)};try{const i=se(),[$]=await Promise.all([i.post("/admin/smart-matching/matches",{room_ids:k.value.room_ids.length>0?k.value.room_ids:void 0,start_time:te(new Date(k.value.start_time)),end_time:te(new Date(k.value.end_time)),required_skills:y.value.length>0?y.value.map(v=>v.name):k.value.skills.split(",").map(v=>v.trim()).filter(Boolean)}),m()]);n.value=$.datas||[],R.value&&R.value.addSearch({start_time:te(new Date(k.value.start_time)),end_time:te(new Date(k.value.end_time)),room_ids:[...k.value.room_ids],skills:[...y.value]}),n.value.length===0&&p("沒有找到符合條件的老師")}catch(i){console.error("Failed to find matches:",i),n.value=[],await p("搜尋失敗，請稍後再試")}finally{c.value=!1}},ue=m=>new Promise(i=>setTimeout(i,m)),Ie=m=>{w(`已選擇 ${m.teacher_name}`)},vt=()=>{k.value={start_time:"",end_time:"",room_ids:[],skills:""},y.value=[],r.value=!1,n.value=[],j.value.clear(),A.value=null,C.value=[],g.value=[]},mt=async()=>{try{const m=se(),i=F(),$=await m.get("/admin/rooms");h.value=$.datas||[]}catch(m){console.error("Failed to fetch rooms:",m)}};return we(async()=>{mt(),R.value&&R.value.loadFromStorage(),await qe()}),(m,i)=>{const $=ht;return t(),s(B,null,[e("div",Ka,[i[38]||(i[38]=e("h1",{class:"text-2xl font-bold text-white mb-6"},"智慧媒合",-1)),e("div",Ja,[e("div",Ga,[i[19]||(i[19]=e("h2",{class:"text-lg font-semibold text-white mb-4"},"搜尋條件",-1)),U(Ct,{ref_key:"recentSearchesRef",ref:R,onLoadSearch:Ke,onClearAll:Je},null,512),e("form",{onSubmit:ie(Ae,["prevent"]),class:"space-y-4","aria-label":"媒合搜尋表單"},[e("div",null,[i[17]||(i[17]=e("label",{id:"datetime-range-label",class:"block text-slate-300 mb-2"},"課程時段",-1)),e("div",Qa,[e("div",null,[i[15]||(i[15]=e("label",{for:"start-time",class:"block text-slate-400 text-sm mb-1"},"開始時間",-1)),W(e("input",{id:"start-time","onUpdate:modelValue":i[0]||(i[0]=v=>l(k).start_time=v),type:"datetime-local","aria-label":"搜尋開始時間",class:"w-full px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white"},null,512),[[me,l(k).start_time]])]),e("div",null,[i[16]||(i[16]=e("label",{for:"end-time",class:"block text-slate-400 text-sm mb-1"},"結束時間",-1)),W(e("input",{id:"end-time","onUpdate:modelValue":i[1]||(i[1]=v=>l(k).end_time=v),type:"datetime-local","aria-label":"搜尋結束時間",class:"w-full px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white"},null,512),[[me,l(k).end_time]])])])]),U(Et,{rooms:l(h),modelValue:l(k).room_ids,"onUpdate:modelValue":i[2]||(i[2]=v=>l(k).room_ids=v),role:"group","aria-label":"選擇教室"},null,8,["rooms","modelValue"]),U(Yt,{modelValue:l(y),"onUpdate:modelValue":i[3]||(i[3]=v=>ae(y)?y.value=v:null),"aria-label":"選擇技能"},null,8,["modelValue"]),e("div",Wa,[e("button",{type:"button",onClick:vt,"aria-label":"清除搜尋條件",class:"flex-1 px-4 py-2 rounded-lg bg-white/5 text-white hover:bg-white/10 transition-colors"}," 清除 "),e("button",{type:"submit",disabled:l(c),"aria-label":"開始媒合搜尋","aria-busy":l(c),class:"flex-1 px-4 py-2 rounded-lg bg-primary-500 text-white hover:bg-primary-600 transition-colors disabled:opacity-50"},[l(c)?(t(),s("span",Ya,[...i[18]||(i[18]=[e("span",{class:"animate-pulse"},"搜尋中...",-1)])])):(t(),s("span",Za,"開始媒合"))],8,Xa)])],32)]),e("div",ei,[i[27]||(i[27]=e("h2",{class:"text-lg font-semibold text-white mb-4"},"媒合結果",-1)),l(r)?l(n).length===0?(t(),s("div",si," 沒有找到符合條件的老師 ")):l(H)==="compare"?(t(),s("div",li,[U(Bs,{"selected-teachers":l(de).filter(v=>l(j).has(v.teacher_id)),onRemove:Ge,onSelect:Ie,onExit:Qe},null,8,["selected-teachers"])])):l(c)&&l(n).length===0?(t(),s("div",ni,[i[22]||(i[22]=Le('<div class="text-center mb-4"><div class="inline-flex items-center gap-3"><div class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-primary-500 animate-bounce" style="animation-delay:0ms;"></span><span class="w-3 h-3 rounded-full bg-primary-500 animate-bounce" style="animation-delay:150ms;"></span><span class="w-3 h-3 rounded-full bg-primary-500 animate-bounce" style="animation-delay:300ms;"></span></div><span class="text-slate-400">正在搜尋符合條件的老師...</span></div></div>',1)),e("div",oi,[e("div",ai,[i[20]||(i[20]=e("span",null,"正在分析老師可用性",-1)),e("span",null,d(l(I))+"%",1)]),e("div",ii,[e("div",{class:"h-full bg-gradient-to-r from-primary-500 to-secondary-500 transition-all duration-300",style:X({width:`${l(I)}%`})},null,4)])]),e("div",ri,[(t(!0),s(B,null,V(l(b),(v,D)=>(t(),s("div",{key:v.name,class:T(["flex items-center gap-3 text-sm",v.completed?"text-success-500":v.active?"text-white":"text-slate-600"])},[e("div",di,[v.completed?(t(),s("svg",ci,[...i[21]||(i[21]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):v.active?(t(),s("span",ui)):(t(),s("span",vi))]),e("span",null,d(v.name),1)],2))),128))])])):(t(),s(B,{key:4},[l(n).length>0?(t(),G(is,{key:0,"sort-by":l(O),"onUpdate:sortBy":i[4]||(i[4]=v=>ae(O)?O.value=v:null),"sort-order":l(K),"onUpdate:sortOrder":i[5]||(i[5]=v=>ae(K)?K.value=v:null),"view-mode":l(H),"onUpdate:viewMode":i[6]||(i[6]=v=>ae(H)?H.value=v:null),"selected-count":l(j).size},null,8,["sort-by","sort-order","view-mode","selected-count"])):S("",!0),l(H)==="card"?(t(),s("div",mi,[(t(!0),s(B,null,V(l(de),v=>(t(),G(nl,{key:v.teacher_id,match:v,selected:l(j).has(v.teacher_id),"show-checkbox":l(de).length>1,"onUpdate:selected":D=>Fe(v.teacher_id,D),onClick:D=>Ve(v)},null,8,["match","selected","show-checkbox","onUpdate:selected","onClick"]))),128))])):(t(),s("div",hi,[(t(!0),s(B,null,V(l(de),v=>(t(),s("div",{key:v.teacher_id,class:T(["p-4 rounded-lg transition-all cursor-pointer",l(j).has(v.teacher_id)?"bg-indigo-500/10 border border-indigo-500/30":"bg-white/5 border border-white/10 hover:bg-white/10"]),onClick:D=>Ve(v)},[e("div",xi,[e("div",pi,[e("div",bi,[e("span",fi,d(v.teacher_name?.charAt(0)||"?"),1)]),e("div",null,[e("h3",wi,d(v.teacher_name),1),e("p",ki,"匹配度 "+d(v.match_score)+"%",1)])]),e("div",yi,[e("div",$i,[e("div",_i,d(v.match_score)+"%",1)]),l(de).length>1?(t(),s("input",{key:0,type:"checkbox",checked:l(j).has(v.teacher_id),onChange:D=>Fe(v.teacher_id,!l(j).has(v.teacher_id)),onClick:i[7]||(i[7]=ie(()=>{},["stop"])),class:"w-5 h-5 rounded border-white/20 bg-white/10 text-indigo-500 focus:ring-indigo-500"},null,40,Ci)):S("",!0)])]),e("div",Si,[e("span",Mi,[i[23]||(i[23]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),z(" 技能匹配: "+d(v.skill_match)+"% ",1)]),e("span",Bi,[i[24]||(i[24]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})],-1)),z(" 評分: "+d(v.rating?.toFixed(1)||"-"),1)]),e("span",{class:T(["px-2 py-0.5 rounded text-xs",v.availability==="AVAILABLE"?"bg-green-500/20 text-green-400":v.availability==="BUFFER_CONFLICT"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"])},d(v.availability==="AVAILABLE"?"完全可用":v.availability==="BUFFER_CONFLICT"?"緩衝衝突":"時間重疊"),3)]),v.available_rooms?.length?(t(),s("div",ji,[i[25]||(i[25]=e("p",{class:"text-xs text-slate-500 mb-2"},"可授課教室：",-1)),e("div",Vi,[(t(!0),s(B,null,V(v.available_rooms,D=>(t(),s("span",{key:D.id,class:"px-2 py-1 rounded-md text-xs bg-success-500/20 text-success-500"},d(D.name),1))),128))])])):S("",!0),v.notes?(t(),s("p",zi,d(v.notes),1)):S("",!0),e("button",{onClick:ie(D=>Ve(v),["stop"]),class:"mt-2 px-3 py-1.5 rounded-lg bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white text-sm transition-colors flex items-center gap-1"},[...i[26]||(i[26]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),z(" 查看課表衝突 ",-1)])],8,Li)],10,gi))),128))])),l(A)?(t(),s("div",Ti,[U(Ml,{class:"mb-4"}),U(Cl,{teacher:l(A),"target-start":l(k).start_time,"target-end":l(k).end_time,"existing-sessions":l(C),onOverride:ut},null,8,["teacher","target-start","target-end","existing-sessions"]),l(g).length>0?(t(),s("div",Fi,[U(ql,{"teacher-name":l(A).teacher_name,slots:l(g),onSelect:ct,onCustom:i[8]||(i[8]=v=>u.value=!0)},null,8,["teacher-name","slots"])])):S("",!0)])):S("",!0)],64)):(t(),s("div",ti," 請設定搜尋條件並點擊「開始媒合」 "))])]),e("div",Ri,[e("div",Ai,[i[29]||(i[29]=e("h2",{class:"text-lg font-semibold text-white"},"人才庫搜尋",-1)),l(Q).length>0?(t(),s("button",{key:0,onClick:i[9]||(i[9]=v=>oe.value=!l(oe)),class:"text-sm text-slate-400 hover:text-white transition-colors flex items-center gap-1"},[i[28]||(i[28]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1)),z(" "+d(l(oe)?"隱藏統計":"顯示統計"),1)])):S("",!0)]),U(ke,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:q(()=>[l(oe)&&l(Q).length>0?(t(),s("div",Ii,[U(ba,{stats:l(Ce),"city-distribution":l(Se),"top-skills":l(Me)},null,8,["stats","city-distribution","top-skills"]),e("div",Ei,[U(qa,{skills:l(Be),"total-teachers":l(Q).length,onSelectSkill:Re},null,8,["skills","total-teachers"]),e("div",Oi,[i[30]||(i[30]=e("h4",{class:"text-sm font-medium text-white mb-3 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})]),z(" 熱門搜尋技能 ")],-1)),e("div",Di,[(t(!0),s(B,null,V(l(fe),v=>(t(),s("button",{key:v,onClick:D=>Re(v),class:"px-3 py-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-slate-300 hover:text-white text-sm transition-colors"},d(v),9,Pi))),128))])])])])):S("",!0)]),_:1}),U(Bo,{modelValue:l(x).query,"onUpdate:modelValue":i[10]||(i[10]=v=>l(x).query=v),onSearch:ce,onSelectSuggestion:tt},null,8,["modelValue"]),e("div",Ui,[U(so,{ref:"talentFilterRef",onApply:nt,onClear:ot},null,512)]),l(Q).length>0?(t(),G(uo,{key:0,"popular-skills":l(fe),"popular-tags":["古典","兒童","成人","入門","進階"],"active-skills":l(Z),"active-tags":l(ee),onFilterBySkill:st,onFilterByTag:lt,onClearAll:je},null,8,["popular-skills","active-skills","active-tags"])):S("",!0),l(Q).length>0?(t(),s("div",Hi,[e("span",Ni,[i[31]||(i[31]=z(" 找到 ",-1)),e("span",qi,d(l(Te).length),1),i[32]||(i[32]=z(" 位人才 ",-1))]),e("div",Ki,[W(e("select",{"onUpdate:modelValue":i[11]||(i[11]=v=>ae(pe)?pe.value=v:null),class:"px-3 py-1.5 rounded-lg bg-white/5 border border-white/10 text-white text-sm"},[...i[33]||(i[33]=[e("option",{value:"relevance"},"相關程度",-1),e("option",{value:"skills"},"技能最多",-1),e("option",{value:"name"},"姓名順序",-1)])],512),[[ve,l(pe)]]),e("button",{onClick:i[12]||(i[12]=v=>be.value=l(be)==="asc"?"desc":"asc"),class:"p-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white transition-colors"},[l(be)==="asc"?(t(),s("svg",Ji,[...i[34]||(i[34]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"},null,-1)])])):(t(),s("svg",Gi,[...i[35]||(i[35]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"},null,-1)])]))])])])):S("",!0),l(Q).length>0?(t(),s("div",Qi,[U(Mn,{"selected-count":l(Y).size,"bulk-loading":l($e),"bulk-progress":l(xe),onClear:Xe,onCompare:i[13]||(i[13]=v=>H.value="compare"),onExport:et,onBulkInvite:Ze},null,8,["selected-count","bulk-loading","bulk-progress"]),e("div",Wi,[(t(!0),s(B,null,V(l(Te),v=>(t(),G(gn,{key:v.id,teacher:v,selected:l(Y).has(v.id),"show-checkbox":v.is_open_to_hiring,"invite-loading":l(ye).has(v.id),"invitation-status":l(re).get(v.id)||null,"onUpdate:selected":D=>We(v.id,D),onInvite:Ye,onView:it,onCompare:rt},null,8,["teacher","selected","show-checkbox","invite-loading","invitation-status","onUpdate:selected"]))),128))])])):l(_e)?(t(),s("div",Xi,[i[36]||(i[36]=e("svg",{class:"w-16 h-16 mx-auto mb-4 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),i[37]||(i[37]=e("p",null,"沒有找到符合條件的人才",-1)),e("button",{onClick:at,class:"mt-4 px-4 py-2 rounded-lg bg-white/5 text-slate-400 hover:bg-white/10 transition-colors"}," 清除搜尋條件 ")])):S("",!0)])]),l(L).show.value?(t(),G($,{key:0,onClose:i[14]||(i[14]=v=>l(L).close())})):S("",!0)],64)}}});export{or as default};
