import{_ as wt}from"./Df0LH2Y8.js";import{g as N,l as _e,c as s,p as C,n as l,r as $,o as t,a as e,F as B,v as z,d as V,t as c,s as T,q as D,J as kt,E as yt,K as me,x as ce,b as U,w as q,y as Z,H as xe,A as ae,m as Ae,L as ee,G as Q,M as Ce,z as ve,N as $t,T as _t,_ as Je,D as Ct,B as le}from"./Blq0K2QU.js";import{g as Ue,f as se}from"./DCA5C7h4.js";import{S as pe}from"./DUI3GfdC.js";import{u as Ge}from"./DtFpNjUJ.js";import{u as St,a as He,b as Ne}from"./CyqcL6d0.js";import{u as Mt}from"./CnOGT6qf.js";const Bt={key:0,class:"recent-searches mb-4"},jt={class:"flex flex-wrap gap-2"},Vt=["onClick"],qe="timeledger_recent_searches",Ke=5,zt=N({__name:"RecentSearches",emits:["loadSearch","clearAll"],setup(n,{expose:L,emit:p}){const w=p,u=$([]),a=()=>{try{const b=localStorage.getItem(qe);b&&(u.value=JSON.parse(b))}catch(b){console.error("Failed to load recent searches:",b)}},d=()=>{try{localStorage.setItem(qe,JSON.stringify(u.value))}catch(b){console.error("Failed to save recent searches:",b)}},o=b=>{const O=new Date(b.start_time),M=`${O.getMonth()+1}/${O.getDate()}`,f=`${O.getHours()}:${O.getMinutes().toString().padStart(2,"0")}`,R=b.skills.length>0?b.skills.slice(0,2).join(", ")+(b.skills.length>2?"...":""):"無技能條件";return`${M} ${f} · ${R}`},h=b=>{w("loadSearch",b)},F=()=>{u.value=[],d(),w("clearAll")};return L({addSearch:b=>{u.value=u.value.filter(O=>!(O.start_time===b.start_time&&O.end_time===b.end_time)),u.value.unshift({...b,id:Date.now().toString(),created_at:Date.now()}),u.value.length>Ke&&(u.value=u.value.slice(0,Ke)),d()},loadFromStorage:a}),_e(()=>{a()}),(b,O)=>l(u).length>0?(t(),s("div",Bt,[e("div",{class:"flex items-center justify-between mb-2"},[O[0]||(O[0]=e("p",{class:"text-sm text-slate-400"},"近期搜尋",-1)),e("button",{onClick:F,class:"text-xs text-slate-500 hover:text-slate-300 transition-colors"}," 清除紀錄 ")]),e("div",jt,[(t(!0),s(B,null,z(l(u),M=>(t(),s("button",{key:M.id,onClick:f=>h(M),class:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 transition-all text-sm text-slate-300"},[O[1]||(O[1]=e("svg",{class:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),V(" "+c(o(M)),1)],8,Vt))),128))])])):C("",!0)}}),Lt={class:"room-card-select"},Tt={class:"grid grid-cols-2 sm:grid-cols-3 gap-3 max-h-64 overflow-y-auto p-1"},Ft=["onClick"],Rt={class:"flex items-center justify-between mb-2"},At={class:"font-medium text-white text-sm"},It={key:0,class:"w-5 h-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Et={class:"flex items-center gap-1 text-xs text-slate-400 mb-2"},Ot={key:0,class:"flex flex-wrap gap-1"},Pt={key:1,class:"text-xs text-slate-500"},Dt={class:"mt-3 flex items-center gap-2"},Ut={key:0,class:"text-xs text-slate-500"},Ht={key:1,class:"text-xs text-indigo-400"},Nt=N({__name:"RoomCardSelect",props:{rooms:{},modelValue:{}},emits:["update:modelValue"],setup(n,{emit:L}){const p=n,w=L,u=D({get:()=>p.modelValue,set:d=>w("update:modelValue",d)}),a=d=>{u.value.indexOf(d)===-1?u.value=[...u.value,d]:u.value=u.value.filter(h=>h!==d)};return(d,o)=>(t(),s("div",Lt,[o[4]||(o[4]=e("label",{class:"block text-slate-300 mb-3"},"教室（可多選）",-1)),e("div",Tt,[(t(!0),s(B,null,z(n.rooms,h=>(t(),s("div",{key:h.id,class:T(["room-card p-3 rounded-lg border-2 cursor-pointer transition-all",l(u).includes(h.id)?"border-indigo-500 bg-indigo-500/10":"border-white/10 bg-white/5 hover:border-white/20"]),onClick:F=>a(h.id)},[e("div",Rt,[e("span",At,c(h.name),1),l(u).includes(h.id)?(t(),s("svg",It,[...o[0]||(o[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):C("",!0)]),e("div",Et,[o[1]||(o[1]=e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),e("span",null,c(h.capacity||20)+" 人",1)]),h.equipment&&h.equipment.length>0?(t(),s("div",Ot,[(t(!0),s(B,null,z(h.equipment.slice(0,3),(F,E)=>(t(),s("span",{key:E,class:T(["px-1.5 py-0.5 rounded text-xs",l(u).includes(h.id)?"bg-indigo-500/20 text-indigo-300":"bg-white/10 text-slate-400"])},c(F),3))),128)),h.equipment.length>3?(t(),s("span",{key:0,class:T(["px-1.5 py-0.5 rounded text-xs",l(u).includes(h.id)?"bg-indigo-500/20 text-indigo-300":"bg-white/10 text-slate-400"])}," +"+c(h.equipment.length-3),3)):C("",!0)])):(t(),s("div",Pt," 基本設施 "))],10,Ft))),128))]),e("div",Dt,[l(u).length===0?(t(),s("p",Ut,[...o[2]||(o[2]=[e("svg",{class:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),V(" 未選擇教室，將搜尋所有可用教室 ",-1)])])):(t(),s("p",Ht,[o[3]||(o[3]=e("svg",{class:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),V(" 已選擇 "+c(l(u).length)+" 間教室 ",1)]))])]))}}),ie=N({__name:"BaseBadge",props:{variant:{default:"primary"},size:{default:"md"}},setup(n){const L=n,p=D(()=>({primary:"bg-primary-500/20 text-primary-300 border border-primary-500/30",secondary:"bg-secondary-500/20 text-secondary-300 border border-secondary-500/30",success:"bg-success-500/20 text-success-300 border border-success-500/30",critical:"bg-critical-500/20 text-critical-300 border border-critical-500/30",warning:"bg-warning-500/20 text-warning-300 border border-warning-500/30",info:"bg-blue-500/20 text-blue-300 border border-blue-500/30"})[L.variant]);return(w,u)=>(t(),s("span",{class:T([l(p),"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium"])},[kt(w.$slots,"default")],2))}}),qt={class:"skill-selector"},Kt={class:"relative"},Jt=["value","onKeydown"],Gt={key:0,class:"suggestions-dropdown absolute z-50 w-full mt-1 bg-slate-800 border border-white/10 rounded-lg shadow-xl overflow-hidden"},Qt=["onClick","onMouseenter"],Wt={class:"flex items-center gap-2"},Xt={class:"font-medium text-white"},Yt={class:"text-xs text-slate-400"},Zt={key:0,class:"flex flex-wrap gap-2 mt-3"},es=["onClick"],ts={key:1,class:"mt-3"},ss={class:"flex flex-wrap gap-1.5"},ls=["onClick","disabled"],os=N({__name:"SkillSelector",props:{modelValue:{}},emits:["update:modelValue"],setup(n,{emit:L}){const p=n,w=L,u=$(""),a=$(!1),d=$(-1),o=$([]),h=D({get:()=>p.modelValue,set:j=>w("update:modelValue",j)}),F=()=>{const j=[];Object.entries(pe).forEach(([A,S])=>{S.skills&&S.skills.slice(0,3).forEach(g=>{j.push({id:j.length+1,name:g,category:A,teacherCount:Math.floor(Math.random()*50)+5})})}),o.value=j.slice(0,8)},E=D(()=>{if(!u.value.trim())return[];const j=u.value.toLowerCase().trim();let A=o.value.filter(S=>S.name.toLowerCase().includes(j)&&!b(S.id));return A.length<3&&Object.entries(pe).forEach(([S,g])=>{g.skills&&g.skills.forEach(v=>{v.toLowerCase().includes(j)&&!A.find(x=>x.name===v)&&!O(v)&&A.push({id:A.length+100,name:v,category:S,teacherCount:Math.floor(Math.random()*30)+1})})}),A.slice(0,8)}),b=j=>h.value.some(A=>A.id===j),O=j=>h.value.some(A=>A.name===j),M=j=>{const A=j.target;u.value=A.value,a.value=!0,d.value=-1,u.value.trim()},f=j=>{R(j),a.value=!1,u.value="",d.value=-1},R=j=>{b(j.id)||(h.value=[...h.value,j],u.value="",a.value=!1)},y=()=>{if(d.value>=0&&E.value[d.value]){f(E.value[d.value]);return}const j=u.value.trim();j&&!O(j)&&(h.value=[...h.value,{id:Date.now(),name:j,category:"其他",teacherCount:0}],u.value=""),a.value=!1},P=j=>{h.value=h.value.filter((A,S)=>S!==j)},K=()=>{u.value===""&&h.value.length>0&&(h.value=h.value.slice(0,-1))},H=j=>{j.target.closest(".skill-selector")||(a.value=!1)};return _e(()=>{F(),document.addEventListener("click",H)}),yt(()=>{document.removeEventListener("click",H)}),(j,A)=>{const S=ie;return t(),s("div",qt,[A[3]||(A[3]=e("label",{class:"block text-slate-300 mb-2"},"所需技能",-1)),e("div",Kt,[e("input",{value:l(u),type:"text",placeholder:"輸入技能名稱（如：瑜珈、鋼琴）",class:"w-full px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white placeholder-slate-500 focus:outline-none focus:border-indigo-500 transition-colors",onInput:M,onKeydown:[me(ce(y,["prevent"]),["enter"]),me(K,["backspace"])],onFocus:A[0]||(A[0]=g=>a.value=!0)},null,40,Jt),l(a)&&l(E).length>0?(t(),s("div",Gt,[(t(!0),s(B,null,z(l(E),(g,v)=>(t(),s("button",{key:g.id,class:T(["w-full px-3 py-2 text-left flex items-center justify-between hover:bg-white/5 transition-colors",l(d)===v?"bg-white/10":""]),onClick:k=>f(g),onMouseenter:k=>d.value=v},[e("div",Wt,[e("span",Xt,c(g.name),1),U(S,{variant:"secondary",size:"xs"},{default:q(()=>[V(c(g.category),1)]),_:2},1024)]),e("span",Yt,c(g.teacherCount)+" 位老師 ",1)],42,Qt))),128))])):C("",!0)]),l(h).length>0?(t(),s("div",Zt,[(t(!0),s(B,null,z(l(h),(g,v)=>(t(),s("div",{key:g.id,class:"group flex items-center gap-1 px-2 py-1 rounded-lg bg-indigo-500/20 border border-indigo-500/30 text-indigo-300 text-sm"},[e("span",null,c(g.name),1),e("button",{onClick:k=>P(v),class:"ml-1 p-0.5 rounded hover:bg-indigo-500/30 transition-colors"},[...A[1]||(A[1]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,es)]))),128))])):C("",!0),!l(a)&&l(o).length>0?(t(),s("div",ts,[A[2]||(A[2]=e("p",{class:"text-xs text-slate-500 mb-2"},"熱門技能",-1)),e("div",ss,[(t(!0),s(B,null,z(l(o),g=>(t(),s("button",{key:g.id,onClick:v=>R(g),disabled:b(g.id),class:T(["px-2 py-1 rounded-md text-xs transition-all",b(g.id)?"bg-indigo-500/20 text-indigo-400 cursor-not-allowed":"bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white"])}," + "+c(g.name),11,ls))),128))])])):C("",!0)])}}}),ns={class:"sort-controls flex flex-wrap items-center gap-4 mb-4"},as={class:"flex items-center gap-2"},is=["title"],rs={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ds={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},cs={class:"flex items-center gap-1 ml-auto border border-white/10 rounded-lg overflow-hidden"},us={key:0,class:"flex items-center gap-2"},vs={class:"text-xs text-slate-400"},ms=N({__name:"SortControls",props:{sortBy:{},sortOrder:{},viewMode:{},selectedCount:{}},emits:["update:sortBy","update:sortOrder","update:viewMode"],setup(n,{emit:L}){const p=n,w=L,u=D({get:()=>p.sortBy,set:d=>w("update:sortBy",d)}),a=()=>{w("update:sortOrder",p.sortOrder==="desc"?"asc":"desc")};return(d,o)=>(t(),s("div",ns,[o[11]||(o[11]=e("span",{class:"text-sm text-slate-400"},"排序方式：",-1)),e("div",as,[Z(e("select",{"onUpdate:modelValue":o[0]||(o[0]=h=>ae(u)?u.value=h:null),class:"px-3 py-1.5 rounded-lg bg-white/5 border border-white/10 text-white text-sm focus:outline-none focus:border-indigo-500"},[...o[5]||(o[5]=[e("option",{value:"score"},"媒合分數",-1),e("option",{value:"availability"},"可用性",-1),e("option",{value:"rating"},"內部評分",-1),e("option",{value:"skill-match"},"技能匹配度",-1)])],512),[[xe,l(u)]]),e("button",{onClick:a,class:T(["p-1.5 rounded-lg border transition-colors",n.sortOrder==="desc"?"bg-indigo-500/20 border-indigo-500/30 text-indigo-400":"bg-white/5 border-white/10 text-slate-400 hover:bg-white/10"]),title:n.sortOrder==="desc"?"高到低":"低到高"},[n.sortOrder==="desc"?(t(),s("svg",rs,[...o[6]||(o[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"},null,-1)])])):(t(),s("svg",ds,[...o[7]||(o[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"},null,-1)])]))],10,is)]),e("div",cs,[e("button",{class:T(["p-1.5 transition-colors",n.viewMode==="card"?"bg-indigo-500 text-white":"bg-white/5 text-slate-400 hover:bg-white/10"]),onClick:o[1]||(o[1]=h=>d.$emit("update:viewMode","card")),title:"卡片檢視"},[...o[8]||(o[8]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)])],2),e("button",{class:T(["p-1.5 transition-colors",n.viewMode==="list"?"bg-indigo-500 text-white":"bg-white/5 text-slate-400 hover:bg-white/10"]),onClick:o[2]||(o[2]=h=>d.$emit("update:viewMode","list")),title:"列表檢視"},[...o[9]||(o[9]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1)])],2),e("button",{class:T(["p-1.5 transition-colors",n.viewMode==="compare"?"bg-indigo-500 text-white":"bg-white/5 text-slate-400 hover:bg-white/10"]),onClick:o[3]||(o[3]=h=>d.$emit("update:viewMode","compare")),title:"比較檢視"},[...o[10]||(o[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1)])],2)]),n.viewMode!=="compare"&&n.selectedCount>0?(t(),s("div",us,[e("span",vs," 已選 "+c(n.selectedCount)+" 位 ",1),e("button",{onClick:o[4]||(o[4]=h=>d.$emit("update:viewMode","compare")),class:"px-3 py-1.5 rounded-lg bg-indigo-500/20 border border-indigo-500/30 text-indigo-400 hover:bg-indigo-500/30 transition-colors text-sm"}," 開始比較 ")])):C("",!0)]))}}),hs={class:"compare-mode"},gs={class:"flex items-center justify-between mb-4"},xs={class:"flex items-center gap-2"},ps={class:"overflow-x-auto"},bs={class:"w-full"},fs={class:"flex flex-col items-center"},ws={class:"w-12 h-12 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center mb-2"},ks={class:"text-white font-medium"},ys={class:"text-white font-medium"},$s=["onClick"],_s={class:"p-3 text-sm text-slate-400 bg-white/5"},Cs={key:0,class:"flex items-center justify-center gap-2"},Ss={class:"w-20 h-2 bg-white/10 rounded-full overflow-hidden"},Ms={class:"text-white font-medium"},Bs={key:2,class:"flex items-center justify-center gap-1"},js={class:"text-yellow-400"},Vs={class:"text-slate-400 ml-1"},zs={key:4,class:"text-white"},Ls={class:"border-t border-white/5"},Ts=["onClick"],Fs=N({__name:"CompareMode",props:{selectedTeachers:{}},emits:["remove","select","exit"],setup(n,{emit:L}){const p=n,w=a=>{switch(a){case"AVAILABLE":return"完全可用";case"BUFFER_CONFLICT":return"緩衝衝突";case"OVERLAP":return"時間重疊";default:return a}},u=D(()=>{if(p.selectedTeachers.length===0)return[];const a=p.selectedTeachers;return[{key:"score",label:"媒合分數",highlight:!0,getValue:o=>o.match_score,maxValue:Math.max(...a.map(o=>o.match_score))},{key:"availability",label:"可用性",highlight:!1,getValue:o=>o.availability,maxValue:""},{key:"internal_score",label:"內部評分",highlight:!0,getValue:o=>o.internal_score,maxValue:Math.max(...a.map(o=>o.internal_score))},{key:"skill_match",label:"技能匹配",highlight:!0,getValue:o=>o.skill_match,maxValue:Math.max(...a.map(o=>o.skill_match))},{key:"rating",label:"星等評分",highlight:!0,getValue:o=>o.rating||0,maxValue:Math.max(...a.map(o=>o.rating||0))},{key:"is_member",label:"中心成員",highlight:!1,getValue:o=>o.is_member,maxValue:""}]});return(a,d)=>(t(),s("div",hs,[e("div",gs,[d[3]||(d[3]=e("h3",{class:"text-lg font-semibold text-white"},"老師比較",-1)),e("div",xs,[d[2]||(d[2]=e("span",{class:"text-sm text-slate-400"}," 最多可選取 3 位老師进行比较 ",-1)),e("button",{onClick:d[0]||(d[0]=o=>a.$emit("exit")),class:"p-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white transition-colors",title:"退出比較"},[...d[1]||(d[1]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",ps,[e("table",bs,[e("thead",null,[e("tr",null,[d[5]||(d[5]=e("th",{class:"w-32 p-3 text-left text-sm font-medium text-slate-400 bg-white/5 rounded-tl-lg"}," 項目 ",-1)),(t(!0),s(B,null,z(n.selectedTeachers,o=>(t(),s("th",{key:o.teacher_id,class:T(["p-3 text-center bg-white/5 min-w-[200px]",{"rounded-tr-lg":o===n.selectedTeachers[n.selectedTeachers.length-1]}])},[e("div",fs,[e("div",ws,[e("span",ks,c(o.teacher_name?.charAt(0)||"?"),1)]),e("span",ys,c(o.teacher_name),1),e("button",{onClick:h=>a.$emit("remove",o),class:"mt-2 text-xs text-slate-400 hover:text-red-400 transition-colors"}," 移除 ",8,$s)])],2))),128)),(t(!0),s(B,null,z(Math.max(0,3-n.selectedTeachers.length),o=>(t(),s("th",{key:o,class:"p-3 bg-white/5 border border-dashed border-white/10"},[...d[4]||(d[4]=[e("div",{class:"flex items-center justify-center h-full text-slate-500 text-sm"}," 選擇老師加入比較 ",-1)])]))),128))])]),e("tbody",null,[(t(!0),s(B,null,z(l(u),o=>(t(),s("tr",{key:o.key,class:"border-t border-white/5"},[e("td",_s,c(o.label),1),(t(!0),s(B,null,z(n.selectedTeachers,h=>(t(),s("td",{key:h.teacher_id,class:T(["p-3 text-center",o.highlight&&o.getValue(h)===o.maxValue?"bg-green-500/10":""])},[o.key==="score"?(t(),s("div",Cs,[e("div",Ss,[e("div",{class:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full",style:ee({width:`${o.getValue(h)}%`})},null,4)]),e("span",Ms,c(o.getValue(h))+"%",1)])):o.key==="is_member"?(t(),s("span",{key:1,class:T(o.getValue(h)?"text-green-400":"text-slate-400")},c(o.getValue(h)?"✓ 是":"✗ 否"),3)):o.key==="rating"?(t(),s("div",Bs,[e("span",js,c("★".repeat(o.getValue(h))),1),e("span",Vs,c(o.getValue(h))+".0",1)])):o.key==="availability"?(t(),s("span",{key:3,class:T(["px-2 py-1 rounded text-xs font-medium",o.getValue(h)==="AVAILABLE"?"bg-green-500/20 text-green-400":o.getValue(h)==="BUFFER_CONFLICT"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"])},c(w(o.getValue(h))),3)):(t(),s("span",zs,c(o.getValue(h)),1))],2))),128)),(t(!0),s(B,null,z(Math.max(0,3-n.selectedTeachers.length),h=>(t(),s("td",{key:h,class:"p-3 border border-dashed border-white/10"}))),128))]))),128)),e("tr",Ls,[d[6]||(d[6]=e("td",{class:"p-3 bg-white/5"},null,-1)),(t(!0),s(B,null,z(n.selectedTeachers,o=>(t(),s("td",{key:o.teacher_id,class:"p-3"},[e("button",{onClick:h=>a.$emit("select",o),class:"w-full px-4 py-2 rounded-lg bg-primary-500 text-white hover:bg-primary-600 transition-colors text-sm"}," 選擇這位老師 ",8,Ts)]))),128)),(t(!0),s(B,null,z(Math.max(0,3-n.selectedTeachers.length),o=>(t(),s("td",{key:o,class:"p-3 border border-dashed border-white/10"}))),128))])])])]),d[7]||(d[7]=Ae('<div class="mt-4 flex flex-wrap items-center gap-4 text-sm"><div class="flex items-center gap-2"><div class="w-3 h-3 rounded-full bg-green-500/20 border border-green-500/30"></div><span class="text-slate-400">該項目表現最佳</span></div><div class="flex items-center gap-2"><div class="flex items-center gap-1 text-xs text-slate-500"><span class="px-1.5 py-0.5 rounded bg-green-500/20 text-green-400">✓ 是</span><span>中心成員</span></div></div><div class="flex items-center gap-1 text-xs text-slate-500"><span class="px-1.5 py-0.5 rounded bg-yellow-500/20 text-yellow-400">緩衝衝突</span><span>可_override</span></div></div>',1))]))}}),Rs=["checked"],As={class:"flex items-start gap-3 mb-4"},Is={class:"w-12 h-12 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center shrink-0"},Es={class:"text-white font-medium"},Os={class:"flex-1 min-w-0"},Ps={class:"flex items-center gap-2 mb-1"},Ds={class:"text-white font-medium truncate"},Us={class:"flex items-center gap-2"},Hs={class:"mb-4"},Ns={class:"flex items-center justify-between mb-1"},qs={class:"text-lg font-bold text-primary-500"},Ks={class:"h-2 bg-white/10 rounded-full overflow-hidden"},Js={class:"grid grid-cols-2 gap-2 mb-4"},Gs={class:"flex items-center gap-2 text-xs"},Qs={class:"text-white font-medium"},Ws={class:"flex items-center gap-2 text-xs"},Xs={class:"text-white font-medium"},Ys={class:"flex items-center gap-2 text-xs"},Zs={class:"text-white font-medium"},el={class:"flex items-center gap-2 text-xs"},tl={class:"text-white font-medium"},sl={key:0,class:"flex flex-wrap gap-1 mb-3"},ll={key:1,class:"text-xs text-slate-400 mb-3"},ol={key:2,class:"text-sm font-medium text-white mb-1"},nl={key:3,class:"text-xs text-slate-400"},al={class:"flex items-center gap-2 mt-3 pt-3 border-t border-white/10"},il={key:0,class:"text-xs text-yellow-400"},rl={class:"text-slate-400 ml-1"},dl={class:"text-xs text-slate-400"},cl=N({__name:"EnhancedMatchCard",props:{match:{},selected:{type:Boolean},showCheckbox:{type:Boolean}},emits:["click","update:selected"],setup(n,{emit:L}){const p=n,w=$(!1),u=D(()=>{switch(p.match.availability){case"AVAILABLE":return"完全可用";case"BUFFER_CONFLICT":return"緩衝衝突";case"OVERLAP":return"時間重疊";default:return p.match.availability}});return(a,d)=>{const o=ie;return t(),s("div",{class:T(["match-card relative p-4 rounded-xl border transition-all cursor-pointer group",n.selected?"bg-indigo-500/10 border-indigo-500/30":"bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20"]),onClick:d[2]||(d[2]=h=>a.$emit("click"))},[n.showCheckbox?(t(),s("div",{key:0,class:"absolute top-3 right-3 z-10",onClick:d[1]||(d[1]=ce(()=>{},["stop"]))},[e("input",{type:"checkbox",checked:n.selected,onChange:d[0]||(d[0]=h=>a.$emit("update:selected",!n.selected)),class:"w-5 h-5 rounded border-white/20 bg-white/10 text-indigo-500 focus:ring-indigo-500 focus:ring-offset-0"},null,40,Rs)])):C("",!0),e("div",As,[e("div",Is,[e("span",Es,c(n.match.teacher_name?.charAt(0)||"?"),1)]),e("div",Os,[e("div",Ps,[e("h4",Ds,c(n.match.teacher_name),1),n.match.is_member?(t(),Q(o,{key:0,variant:"success",size:"xs"},{default:q(()=>[...d[3]||(d[3]=[V(" 中心成員 ",-1)])]),_:1})):C("",!0)]),e("div",Us,[e("span",{class:T(["px-2 py-0.5 rounded text-xs font-medium",n.match.availability==="AVAILABLE"?"bg-green-500/20 text-green-400":n.match.availability==="BUFFER_CONFLICT"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"])},c(l(u)),3)])])]),e("div",Hs,[e("div",Ns,[d[4]||(d[4]=e("span",{class:"text-xs text-slate-400"},"媒合分數",-1)),e("span",qs,c(n.match.match_score)+"%",1)]),e("div",Ks,[e("div",{class:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all duration-500",style:ee({width:`${n.match.match_score}%`})},null,4)])]),e("div",Js,[e("div",Gs,[d[6]||(d[6]=e("div",{class:"w-6 h-6 rounded bg-green-500/20 flex items-center justify-center"},[e("svg",{class:"w-3.5 h-3.5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[d[5]||(d[5]=e("span",{class:"text-slate-400 block"},"可用性",-1)),e("span",Qs,c(n.match.availability_score)+"/40",1)])]),e("div",Ws,[d[8]||(d[8]=e("div",{class:"w-6 h-6 rounded bg-yellow-500/20 flex items-center justify-center"},[e("svg",{class:"w-3.5 h-3.5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})])],-1)),e("div",null,[d[7]||(d[7]=e("span",{class:"text-slate-400 block"},"內部評分",-1)),e("span",Xs,c(n.match.internal_score)+"/40",1)])]),e("div",Ys,[d[10]||(d[10]=e("div",{class:"w-6 h-6 rounded bg-blue-500/20 flex items-center justify-center"},[e("svg",{class:"w-3.5 h-3.5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})])],-1)),e("div",null,[d[9]||(d[9]=e("span",{class:"text-slate-400 block"},"技能匹配",-1)),e("span",Zs,c(n.match.skill_score)+"/10",1)])]),e("div",el,[d[12]||(d[12]=e("div",{class:"w-6 h-6 rounded bg-purple-500/20 flex items-center justify-center"},[e("svg",{class:"w-3.5 h-3.5 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})])],-1)),e("div",null,[d[11]||(d[11]=e("span",{class:"text-slate-400 block"},"地區匹配",-1)),e("span",tl,c(n.match.region_score||0)+"/10",1)])])]),e("div",{class:T(["absolute inset-x-0 bottom-0 p-4 bg-slate-800/95 backdrop-blur-sm rounded-b-xl border-t border-white/10 transition-all duration-200",l(w)?"opacity-100 translate-y-0":"opacity-0 translate-y-2 pointer-events-none"])},[d[13]||(d[13]=e("h5",{class:"text-sm font-medium text-white mb-2"},"專長技能",-1)),n.match.skills?.length?(t(),s("div",sl,[(t(!0),s(B,null,z(n.match.skills.slice(0,5),h=>(t(),Q(o,{key:h.name,variant:"primary",size:"xs"},{default:q(()=>[V(c(h.name),1)]),_:2},1024))),128))])):(t(),s("p",ll,"無技能資料")),n.match.notes?(t(),s("h5",ol,"內部備註")):C("",!0),n.match.notes?(t(),s("p",nl,c(n.match.notes),1)):C("",!0),e("div",al,[n.match.rating?(t(),s("span",il,[V(c("★".repeat(n.match.rating))+c("☆".repeat(5-n.match.rating))+" ",1),e("span",rl,c(n.match.rating)+".0",1)])):C("",!0),e("span",dl," 技能匹配 "+c(n.match.skill_match)+"% ",1)])],2),e("div",{class:T(["absolute inset-x-0 bottom-0 h-8 rounded-b-xl transition-colors",l(w)?"bg-transparent":"bg-gradient-to-t from-white/5 to-transparent"])},null,2)],2)}}}),ul={class:"teacher-timeline bg-white/5 rounded-xl p-4"},vl={class:"flex items-center gap-3 mb-4"},ml={class:"w-10 h-10 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center shrink-0"},hl={class:"text-white font-medium"},gl={class:"flex-1"},xl={class:"text-white font-medium"},pl={class:"timeline-container relative pl-10"},bl={class:"time-axis absolute left-0 top-0 bottom-0 w-8 flex flex-col text-xs text-slate-500"},fl={class:"tracks space-y-1"},wl={class:"track relative h-10 bg-indigo-500/20 rounded-lg border border-indigo-500/30"},kl={class:"track relative h-10 bg-white/5 rounded-lg"},yl={class:"text-xs px-2 text-white truncate block"},$l={key:0,class:"conflict-indicator flex items-center gap-2 mt-2 p-2 bg-red-500/10 border border-red-500/20 rounded-lg"},_l={class:"text-sm text-red-400"},Cl={key:1,class:"flex items-center gap-2 mt-2 p-2 bg-green-500/10 border border-green-500/20 rounded-lg"},Sl={key:0,class:"mt-4 pt-4 border-t border-white/10"},Ml={class:"space-y-2"},Bl={class:"text-slate-300"},jl={class:"text-slate-500"},Vl={class:"text-slate-400"},zl=N({__name:"TeacherTimeline",props:{teacher:{},targetStart:{},targetEnd:{},existingSessions:{}},emits:["override"],setup(n,{emit:L}){const p=n,w=D(()=>{const M=[];for(let f=6;f<=22;f++)M.push(f);return M}),u=D(()=>{switch(p.teacher.availability){case"AVAILABLE":return"完全可用";case"BUFFER_CONFLICT":return"緩衝衝突";case"OVERLAP":return"時間重疊";default:return p.teacher.availability}}),a=D(()=>{switch(p.teacher.availability){case"AVAILABLE":return"success";case"BUFFER_CONFLICT":return"warning";case"OVERLAP":return"error";default:return"secondary"}}),d=D(()=>p.teacher.availability!=="AVAILABLE"),o=D(()=>p.teacher.availability==="BUFFER_CONFLICT"?"與現有課程緩衝時間衝突":"與現有課程時間重疊"),h=D(()=>{const M=[],f=new Date(p.targetStart),R=new Date(p.targetEnd);return p.existingSessions.forEach(y=>{const P=new Date(y.start_time),K=new Date(y.end_time);if(f<K&&R>P){const H=f<K&&R>P;M.push({type:H?"BUFFER_CONFLICT":"OVERLAP",course_name:y.course_name,start:F(P),end:F(K),room:y.room_name||"未指定教室"})}}),M}),F=M=>`${M.getHours().toString().padStart(2,"0")}:${M.getMinutes().toString().padStart(2,"0")}`,E=M=>{const f=new Date(M);return(f.getHours()+f.getMinutes()/60-6)/16*100},b=D(()=>{const M=E(p.targetStart),R=E(p.targetEnd)-M;return{left:`${M}%`,width:`${R}%`}}),O=M=>{const f=E(M.start_time),y=E(M.end_time)-f;return{left:`${f}%`,width:`${y}%`}};return(M,f)=>{const R=ie;return t(),s("div",ul,[e("div",vl,[e("div",ml,[e("span",hl,c(n.teacher.teacher_name?.charAt(0)||"?"),1)]),e("div",gl,[e("h4",xl,c(n.teacher.teacher_name),1),f[1]||(f[1]=e("p",{class:"text-xs text-slate-400"},"課表衝突檢視",-1))]),U(R,{variant:l(a),size:"sm"},{default:q(()=>[V(c(l(u)),1)]),_:1},8,["variant"])]),e("div",pl,[e("div",bl,[(t(!0),s(B,null,z(l(w),y=>(t(),s("div",{key:y,class:"h-12 flex items-center justify-end pr-1"},c(y)+":00 ",1))),128))]),e("div",fl,[e("div",wl,[e("div",{class:"absolute h-full bg-indigo-500 rounded-lg flex items-center justify-center text-white text-xs font-medium",style:ee(l(b))}," 目標時段 ",4)]),e("div",kl,[(t(!0),s(B,null,z(n.existingSessions,y=>(t(),s("div",{key:y.id,class:"absolute h-8 top-1 bg-slate-600/50 rounded border-l-4 border-slate-500 overflow-hidden",style:ee(O(y))},[e("span",yl,c(y.course_name),1)],4))),128))]),l(d)?(t(),s("div",$l,[f[2]||(f[2]=e("svg",{class:"w-4 h-4 text-red-400 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("span",_l,c(l(o)),1),M.availability==="BUFFER_CONFLICT"?(t(),s("button",{key:0,onClick:f[0]||(f[0]=y=>M.$emit("override")),class:"ml-auto px-3 py-1 rounded-lg bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30 text-xs transition-colors"}," 仍要安排 ")):C("",!0)])):(t(),s("div",Cl,[...f[3]||(f[3]=[e("svg",{class:"w-4 h-4 text-green-400 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("span",{class:"text-sm text-green-400"},"此時段完全可用，無課程衝突",-1)])]))])]),l(h).length>0?(t(),s("div",Sl,[f[4]||(f[4]=e("p",{class:"text-xs text-slate-400 mb-2"},"衝突課程：",-1)),e("div",Ml,[(t(!0),s(B,null,z(l(h),(y,P)=>(t(),s("div",{key:P,class:"flex items-center gap-2 text-xs"},[e("span",{class:T(["w-2 h-2 rounded-full shrink-0",y.type==="OVERLAP"?"bg-red-500":"bg-yellow-500"])},null,2),e("span",Bl,c(y.course_name),1),e("span",jl,c(y.start)+" - "+c(y.end),1),e("span",Vl,c(y.room),1)]))),128))])])):C("",!0)])}}}),Ll={class:"conflict-legend flex flex-wrap items-center gap-4 p-3 bg-white/5 rounded-lg"},Tl=N({__name:"ConflictLegend",setup(n){return(L,p)=>(t(),s("div",Ll,[...p[0]||(p[0]=[Ae('<span class="text-xs text-slate-400 font-medium shrink-0">圖例說明</span><div class="flex items-center gap-2"><div class="w-6 h-6 rounded bg-green-500/20 border border-green-500/30 flex items-center justify-center"><svg class="w-4 h-4 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><div class="text-xs"><span class="text-white block">完全可用</span><span class="text-slate-500">可立即安排</span></div></div><div class="w-px h-10 bg-white/10 shrink-0"></div><div class="flex items-center gap-2"><div class="w-6 h-6 rounded bg-yellow-500/20 border border-yellow-500/30 flex items-center justify-center"><svg class="w-4 h-4 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><div class="text-xs"><span class="text-white block">緩衝衝突</span><span class="text-slate-500">可選擇_override</span></div></div><div class="w-px h-10 bg-white/10 shrink-0"></div><div class="flex items-center gap-2"><div class="w-6 h-6 rounded bg-red-500/20 border border-red-500/30 flex items-center justify-center"><svg class="w-4 h-4 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></div><div class="text-xs"><span class="text-white block">時間重疊</span><span class="text-slate-500">不可排課</span></div></div><div class="w-px h-10 bg-white/10 shrink-0"></div><div class="flex items-center gap-2"><div class="w-6 h-6 rounded bg-indigo-500/20 border border-indigo-500/30 flex items-center justify-center"><div class="w-3 h-3 bg-indigo-500 rounded-sm"></div></div><div class="text-xs"><span class="text-white block">目標時段</span><span class="text-slate-500">您想安排的時間</span></div></div><div class="w-px h-10 bg-white/10 shrink-0"></div><div class="flex items-center gap-2"><div class="w-6 h-6 rounded bg-slate-600/50 border border-slate-500 flex items-center justify-center"><div class="w-4 h-2 bg-slate-400 rounded-sm"></div></div><div class="text-xs"><span class="text-white block">現有課程</span><span class="text-slate-500">老師已排課表</span></div></div>',10)])]))}}),Fl={class:"alternative-slots"},Rl={class:"flex items-center justify-between mb-4"},Al={class:"text-xs text-slate-400"},Il={class:"flex gap-2 mb-4 overflow-x-auto pb-2"},El=["onClick"],Ol={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2"},Pl=["disabled","onClick"],Dl={class:"flex items-center justify-between mb-1"},Ul={class:"text-sm font-medium text-white"},Hl={key:0,class:"text-xs text-green-400"},Nl={key:1,class:"text-xs text-red-400"},ql={class:"text-xs text-slate-400"},Kl={key:0,class:"mt-2 flex flex-wrap gap-1"},Jl={key:1,class:"mt-2"},Gl={class:"text-xs text-red-400"},Ql={key:0,class:"col-span-full py-8 text-center text-slate-500"},Wl={class:"mt-4 pt-4 border-t border-white/10"},Xl=N({__name:"AlternativeSlots",props:{teacherName:{},slots:{}},emits:["select","custom"],setup(n,{emit:L}){const p=n,w=L,u=D(()=>{const h=new Map;return p.slots.forEach(F=>{h.has(F.date)||h.set(F.date,F.dateLabel)}),Array.from(h.entries()).map(([F,E])=>({value:F,label:E}))}),a=D(()=>{const h=u.value[0]?.value,F=d.value||h;return p.slots.filter(E=>E.date===F)}),d=$(""),o=h=>{h.available&&w("select",h)};return(h,F)=>{const E=ie;return t(),s("div",Fl,[e("div",Rl,[F[1]||(F[1]=e("h4",{class:"font-medium text-white"},"替代時段建議",-1)),e("span",Al," 基於老師 "+c(n.teacherName)+" 的課表 ",1)]),e("div",Il,[(t(!0),s(B,null,z(l(u),b=>(t(),s("button",{key:b.value,class:T(["px-3 py-1.5 rounded-lg text-sm whitespace-nowrap transition-colors",l(d)===b.value?"bg-indigo-500 text-white":"bg-white/5 text-slate-400 hover:bg-white/10"]),onClick:O=>d.value=b.value},c(b.label),11,El))),128))]),e("div",Ol,[(t(!0),s(B,null,z(l(a),b=>(t(),s("button",{key:`${b.date}-${b.start}`,class:T(["slot-button p-3 rounded-lg border-2 text-left transition-all",b.available?"border-green-500/30 bg-green-500/5 hover:bg-green-500/10 hover:border-green-500":"border-white/10 bg-white/5 opacity-50 cursor-not-allowed"]),disabled:!b.available,onClick:O=>o(b)},[e("div",Dl,[e("span",Ul,c(b.dateLabel),1),b.available?(t(),s("span",Hl," 可安排 ")):(t(),s("span",Nl," 衝突 "))]),e("div",ql,c(b.start)+" - "+c(b.end),1),b.available&&b.availableRooms.length>0?(t(),s("div",Kl,[(t(!0),s(B,null,z(b.availableRooms.slice(0,2),O=>(t(),Q(E,{key:O.id,variant:"success",size:"xs"},{default:q(()=>[V(c(O.name),1)]),_:2},1024))),128)),b.availableRooms.length>2?(t(),Q(E,{key:0,variant:"secondary",size:"xs"},{default:q(()=>[V(" +"+c(b.availableRooms.length-2),1)]),_:2},1024)):C("",!0)])):C("",!0),!b.available&&b.conflictReason?(t(),s("div",Jl,[e("span",Gl,c(b.conflictReason),1)])):C("",!0)],10,Pl))),128)),l(a).length===0?(t(),s("div",Ql,[...F[2]||(F[2]=[e("svg",{class:"w-12 h-12 mx-auto mb-2 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("p",null,"暫無替代時段建議",-1),e("p",{class:"text-xs text-slate-400 mt-1"},"嘗試選擇其他老師或調整時段",-1)])])):C("",!0)]),e("div",Wl,[e("button",{onClick:F[0]||(F[0]=b=>h.$emit("custom")),class:"w-full px-4 py-2 rounded-lg bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white transition-colors text-sm flex items-center justify-center gap-2"},[...F[3]||(F[3]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),V(" 自訂其他時段 ",-1)])])])])}}}),Yl={key:0,class:"absolute top-3 right-3 z-10"},Zl=["checked"],eo={class:"flex items-start gap-3 mb-3"},to={class:"w-12 h-12 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center shrink-0"},so={class:"text-white font-medium"},lo={class:"flex-1 min-w-0"},oo={class:"flex items-center gap-2 mb-1"},no={class:"text-white font-medium truncate"},ao={class:"text-xs text-slate-400 flex items-center gap-1"},io={key:1,class:"text-sm text-slate-400 mb-3 line-clamp-2"},ro={key:2,class:"mb-3"},co={class:"flex flex-wrap gap-1"},uo={key:0,class:"px-2 py-1 rounded-md text-xs bg-slate-500/20 text-slate-400"},vo={key:3,class:"flex flex-wrap gap-1 mb-4"},mo={key:4,class:"mb-3"},ho={class:"flex gap-2"},go=["disabled"],xo={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},po={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},bo={key:1,disabled:"",class:"flex-1 px-3 py-2 rounded-lg bg-white/5 text-slate-500 text-sm flex items-center justify-center gap-1 cursor-not-allowed"},fo={key:5,class:"mt-3 pt-3 border-t border-white/10"},wo={class:"text-xs text-slate-400"},ko=N({__name:"TalentCard",props:{teacher:{},selected:{type:Boolean},showCheckbox:{type:Boolean},inviteLoading:{type:Boolean},invitationStatus:{},showContactInfo:{type:Boolean}},emits:["invite","view","compare","update:selected"],setup(n){const L=w=>pe[w]?.icon||"✨",p=w=>pe[w]?.color||"bg-slate-500/20 text-slate-400 border-slate-500/30";return(w,u)=>{const a=ie;return t(),s("div",{class:T(["talent-card relative p-4 rounded-xl border transition-all",n.selected?"bg-indigo-500/10 border-indigo-500/30":"bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20"])},[n.showCheckbox&&n.teacher.is_open_to_hiring?(t(),s("div",Yl,[e("input",{type:"checkbox",checked:n.selected,onChange:u[0]||(u[0]=d=>w.$emit("update:selected",!n.selected)),class:"w-5 h-5 rounded border-white/20 bg-white/10 text-indigo-500 focus:ring-indigo-500 focus:ring-offset-0"},null,40,Zl)])):C("",!0),e("div",eo,[e("div",to,[e("span",so,c(n.teacher.name?.charAt(0)||"?"),1)]),e("div",lo,[e("div",oo,[e("h4",no,c(n.teacher.name),1),n.teacher.is_member?(t(),Q(a,{key:0,variant:"success",size:"xs"},{default:q(()=>[...u[4]||(u[4]=[V(" 中心成員 ",-1)])]),_:1})):C("",!0),n.teacher.is_open_to_hiring?C("",!0):(t(),Q(a,{key:1,variant:"secondary",size:"xs"},{default:q(()=>[...u[5]||(u[5]=[V(" 已關閉徵才 ",-1)])]),_:1}))]),e("p",ao,[u[6]||(u[6]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),V(" "+c(n.teacher.city)+c(n.teacher.district),1)])])]),n.teacher.bio?(t(),s("p",io,c(n.teacher.bio),1)):C("",!0),n.teacher.skills?.length?(t(),s("div",ro,[u[7]||(u[7]=e("p",{class:"text-xs text-slate-500 mb-2"},"專長技能",-1)),e("div",co,[(t(!0),s(B,null,z(n.teacher.skills.slice(0,4),(d,o)=>(t(),s("span",{key:o,class:T(["inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs",p(d.category)])},[e("span",null,c(L(d.category)),1),e("span",null,c(d.name),1)],2))),128)),n.teacher.skills.length>4?(t(),s("span",uo," +"+c(n.teacher.skills.length-4),1)):C("",!0)])])):C("",!0),n.teacher.personal_hashtags?.length?(t(),s("div",vo,[(t(!0),s(B,null,z(n.teacher.personal_hashtags.slice(0,5),(d,o)=>(t(),s("span",{key:o,class:"px-2 py-0.5 rounded-full text-xs bg-primary-500/20 text-primary-400"},c(d),1))),128))])):C("",!0),n.invitationStatus?(t(),s("div",mo,[U(a,{variant:n.invitationStatus.variant,size:"sm"},{default:q(()=>[V(c(n.invitationStatus.text),1)]),_:1},8,["variant"])])):C("",!0),e("div",ho,[n.teacher.is_open_to_hiring?(t(),s("button",{key:0,onClick:u[1]||(u[1]=d=>w.$emit("invite",n.teacher)),disabled:n.inviteLoading||n.invitationStatus?.sent,class:"flex-1 px-3 py-2 rounded-lg bg-primary-500 text-white hover:bg-primary-600 transition-colors text-sm flex items-center justify-center gap-1 disabled:opacity-50"},[n.inviteLoading?(t(),s("svg",xo,[...u[8]||(u[8]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(t(),s("svg",po,[...u[9]||(u[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),V(" "+c(n.invitationStatus?.sent?"已邀請":"邀請合作"),1)],8,go)):(t(),s("button",bo,[...u[10]||(u[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})],-1),V(" 已關閉徵才 ",-1)])])),e("button",{onClick:u[2]||(u[2]=d=>w.$emit("view",n.teacher)),class:"px-3 py-2 rounded-lg bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white transition-colors",title:"查看詳細資訊"},[...u[11]||(u[11]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])]),e("button",{onClick:u[3]||(u[3]=d=>w.$emit("compare",n.teacher)),class:"px-3 py-2 rounded-lg bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white transition-colors",title:"加入比較"},[...u[12]||(u[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1)])])]),n.showContactInfo&&n.teacher.public_contact_info?(t(),s("div",fo,[e("p",wo,[u[13]||(u[13]=e("span",{class:"font-medium text-slate-300"},"聯絡方式：",-1)),V(" "+c(n.teacher.public_contact_info),1)])])):C("",!0)],2)}}}),yo={key:0,class:"bulk-actions fixed bottom-0 left-0 right-0 z-50 bg-slate-900/95 backdrop-blur-lg border-t border-white/10 shadow-2xl"},$o={class:"max-w-7xl mx-auto px-4 py-4"},_o={class:"flex flex-col sm:flex-row items-center justify-between gap-4"},Co={class:"flex items-center gap-3"},So={class:"flex items-center gap-3"},Mo=["disabled"],Bo=["disabled"],jo={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},Vo={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},zo={key:0,class:"mt-3 flex items-center gap-2 text-sm text-slate-400"},Lo={class:"flex-1 bg-white/10 rounded-full h-1.5 overflow-hidden"},To=N({__name:"BulkActions",props:{selectedCount:{},bulkLoading:{type:Boolean},bulkProgress:{}},emits:["clear","compare","export","bulkInvite"],setup(n){return(L,p)=>{const w=ie;return t(),Q(Ce,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"translate-y-full opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition-all duration-300 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-full opacity-0"},{default:q(()=>[n.selectedCount>0?(t(),s("div",yo,[e("div",$o,[e("div",_o,[e("div",Co,[U(w,{variant:"info",size:"md"},{default:q(()=>[V(" 已選取 "+c(n.selectedCount)+" 位 ",1)]),_:1}),e("button",{onClick:p[0]||(p[0]=u=>L.$emit("clear")),class:"text-sm text-slate-400 hover:text-slate-300 transition-colors"}," 清除選取 ")]),e("div",So,[e("button",{onClick:p[1]||(p[1]=u=>L.$emit("compare")),class:T(["px-4 py-2 rounded-lg bg-white/5 text-slate-300 hover:bg-white/10 hover:text-white transition-colors flex items-center gap-2",{"opacity-50 cursor-not-allowed":n.selectedCount<2}]),disabled:n.selectedCount<2},[...p[4]||(p[4]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),V(" 比較所選 ",-1)])],10,Mo),e("button",{onClick:p[2]||(p[2]=u=>L.$emit("export")),class:"px-4 py-2 rounded-lg bg-white/5 text-slate-300 hover:bg-white/10 hover:text-white transition-colors flex items-center gap-2"},[...p[5]||(p[5]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),V(" 匯出聯絡資訊 ",-1)])]),e("button",{onClick:p[3]||(p[3]=u=>L.$emit("bulkInvite")),disabled:n.bulkLoading,class:"px-4 py-2 rounded-lg bg-primary-500 text-white hover:bg-primary-600 transition-colors flex items-center gap-2 disabled:opacity-50"},[n.bulkLoading?(t(),s("svg",jo,[...p[6]||(p[6]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(t(),s("svg",Vo,[...p[7]||(p[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),V(" 批量邀請 ("+c(n.selectedCount)+") ",1)],8,Bo)])]),n.bulkLoading?(t(),s("div",zo,[e("div",Lo,[e("div",{class:"h-full bg-primary-500 transition-all duration-300",style:ee({width:`${n.bulkProgress}%`})},null,4)]),e("span",null,c(n.bulkProgress)+"%",1)])):C("",!0)])])):C("",!0)]),_:1})}}}),Fo={class:"talent-filter-panel"},Ro={class:"mt-4 p-4 bg-white/5 rounded-xl border border-white/10"},Ao={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Io=["value"],Eo=["disabled"],Oo=["value"],Po=["value"],Do={class:"flex gap-1"},Uo=["onClick"],Ho={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 pt-4 border-t border-white/10"},No={class:"block text-slate-300 mb-2"},qo={class:"text-indigo-400"},Ko={class:"flex items-center gap-3"},Jo={class:"block text-slate-300 mb-2"},Go={class:"text-indigo-400"},Qo={class:"flex items-center gap-3"},Wo={class:"flex gap-2"},Xo={key:0,class:"flex flex-wrap gap-2 mt-3"},Yo={class:"glass-card w-full max-w-md max-h-[80vh] overflow-y-auto"},Zo={class:"flex items-center justify-between p-4 border-b border-white/10"},en={class:"p-4 space-y-4"},tn={class:"flex gap-2"},sn={key:0,class:"space-y-2"},ln={class:"space-y-2 max-h-60 overflow-y-auto"},on=["onClick"],nn=["onClick"],an={key:1,class:"text-center text-slate-500 py-4"},rn=N({__name:"TalentFilterPanel",emits:["apply","clear"],setup(n,{expose:L,emit:p}){const w=p,u=$(!1),a=$({city:"",district:"",skillCategory:"",hiringStatus:"",minRating:0,minSkills:0,membership:""}),d=$(["台北市","新北市","桃園市","台中市","台南市","高雄市"]),o=$(["中山區","大安區","信義區","松山區","萬華區","中正區"]),h=D(()=>Object.entries(pe).map(([g,v])=>({key:g,name:v.name||g,icon:v.icon||"✨"}))),F=$([{value:"open",label:"開放中"},{value:"closed",label:"已關閉"},{value:"",label:"全部"}]),E=D(()=>{let g=0;return a.value.city&&g++,a.value.district&&g++,a.value.skillCategory&&g++,a.value.hiringStatus&&g++,a.value.minRating>0&&g++,a.value.minSkills>0&&g++,a.value.membership&&g++,g}),b=D(()=>{const g=[];if(a.value.city&&g.push({key:"city",value:a.value.city,label:`城市: ${a.value.city}`}),a.value.district&&g.push({key:"district",value:a.value.district,label:`區域: ${a.value.district}`}),a.value.skillCategory){const v=h.value.find(k=>k.key===a.value.skillCategory);g.push({key:"skillCategory",value:a.value.skillCategory,label:`類別: ${v?.icon} ${v?.name}`})}if(a.value.hiringStatus){const v=F.value.find(k=>k.value===a.value.hiringStatus);g.push({key:"hiringStatus",value:a.value.hiringStatus,label:v?.label||""})}return a.value.minRating>0&&g.push({key:"minRating",value:String(a.value.minRating),label:`${a.value.minRating}+ 評分`}),a.value.minSkills>0&&g.push({key:"minSkills",value:String(a.value.minSkills),label:`${a.value.minSkills}+ 技能`}),a.value.membership&&g.push({key:"membership",value:a.value.membership,label:a.value.membership==="member"?"中心成員":"外部人才"}),g}),O=()=>{w("apply",{...a.value})},M=()=>{a.value={city:"",district:"",skillCategory:"",hiringStatus:"",minRating:0,minSkills:0,membership:""},w("clear")},f=(g,v)=>{switch(g){case"city":a.value.city="";break;case"district":a.value.district="";break;case"skillCategory":a.value.skillCategory="";break;case"hiringStatus":a.value.hiringStatus="";break;case"minRating":a.value.minRating=0;break;case"minSkills":a.value.minSkills=0;break;case"membership":a.value.membership="";break}w("apply",{...a.value})},R=$([]),y=$(!1),P=$(""),K=()=>{try{const g=localStorage.getItem("talentFilterPresets");g&&(R.value=JSON.parse(g))}catch(g){console.error("載入預設失敗:",g)}},H=()=>{try{localStorage.setItem("talentFilterPresets",JSON.stringify(R.value))}catch(g){console.error("儲存預設失敗:",g)}},j=()=>{if(!P.value.trim()){alert("請輸入預設名稱");return}const g={id:Date.now().toString(),name:P.value.trim(),filters:{...a.value}};R.value.push(g),H(),P.value="",y.value=!1,Ge().success(`已儲存篩選預設「${g.name}」`)},A=g=>{a.value={...g.filters},w("apply",{...a.value})},S=g=>{R.value=R.value.filter(v=>v.id!==g),H()};return K(),L({clearFilters:M,expanded:u}),(g,v)=>{const k=ie;return t(),s(B,null,[e("div",Fo,[e("button",{onClick:v[0]||(v[0]=x=>u.value=!l(u)),class:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/5 hover:bg-white/10 text-slate-300 transition-colors text-sm"},[v[14]||(v[14]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1)),v[15]||(v[15]=V(" 進階篩選 ",-1)),(t(),s("svg",{class:T(["w-4 h-4 transition-transform",{"rotate-180":l(u)}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...v[13]||(v[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2)),l(E)>0?(t(),Q(k,{key:0,variant:"info",size:"xs"},{default:q(()=>[V(c(l(E)),1)]),_:1})):C("",!0)]),U(Ce,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:q(()=>[Z(e("div",Ro,[e("div",Ao,[e("div",null,[v[17]||(v[17]=e("label",{class:"block text-slate-300 mb-2"},"城市",-1)),Z(e("select",{"onUpdate:modelValue":v[1]||(v[1]=x=>l(a).city=x),class:"w-full px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white focus:outline-none focus:border-indigo-500"},[v[16]||(v[16]=e("option",{value:""},"全部城市",-1)),(t(!0),s(B,null,z(l(d),x=>(t(),s("option",{key:x,value:x},c(x),9,Io))),128))],512),[[xe,l(a).city]])]),e("div",null,[v[19]||(v[19]=e("label",{class:"block text-slate-300 mb-2"},"區域",-1)),Z(e("select",{"onUpdate:modelValue":v[2]||(v[2]=x=>l(a).district=x),disabled:!l(a).city,class:"w-full px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white focus:outline-none focus:border-indigo-500 disabled:opacity-50"},[v[18]||(v[18]=e("option",{value:""},"全部區域",-1)),(t(!0),s(B,null,z(l(o),x=>(t(),s("option",{key:x,value:x},c(x),9,Oo))),128))],8,Eo),[[xe,l(a).district]])]),e("div",null,[v[21]||(v[21]=e("label",{class:"block text-slate-300 mb-2"},"技能類別",-1)),Z(e("select",{"onUpdate:modelValue":v[3]||(v[3]=x=>l(a).skillCategory=x),class:"w-full px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white focus:outline-none focus:border-indigo-500"},[v[20]||(v[20]=e("option",{value:""},"全部類別",-1)),(t(!0),s(B,null,z(l(h),x=>(t(),s("option",{key:x.key,value:x.key},c(x.icon)+" "+c(x.name),9,Po))),128))],512),[[xe,l(a).skillCategory]])]),e("div",null,[v[22]||(v[22]=e("label",{class:"block text-slate-300 mb-2"},"徵才狀態",-1)),e("div",Do,[(t(!0),s(B,null,z(l(F),x=>(t(),s("button",{key:x.value,onClick:J=>l(a).hiringStatus=x.value,class:T(["flex-1 px-2 py-1.5 rounded-lg text-xs transition-colors",l(a).hiringStatus===x.value?"bg-indigo-500 text-white":"bg-white/5 text-slate-400 hover:bg-white/10"])},c(x.label),11,Uo))),128))])])]),e("div",Ho,[e("div",null,[e("label",No,[v[23]||(v[23]=V(" 最低評分 ",-1)),e("span",qo,c(l(a).minRating)+"+",1)]),e("div",Ko,[Z(e("input",{type:"range","onUpdate:modelValue":v[4]||(v[4]=x=>l(a).minRating=x),min:"0",max:"5",step:"0.5",class:"flex-1 h-2 bg-white/10 rounded-full appearance-none cursor-pointer"},null,512),[[ve,l(a).minRating,void 0,{number:!0}]]),l(a).minRating>0?(t(),s("button",{key:0,onClick:v[5]||(v[5]=x=>l(a).minRating=0),class:"text-xs text-slate-400 hover:text-slate-300"}," 清除 ")):C("",!0)])]),e("div",null,[e("label",Jo,[v[24]||(v[24]=V(" 最低技能數 ",-1)),e("span",Go,c(l(a).minSkills)+"+",1)]),e("div",Qo,[Z(e("input",{type:"range","onUpdate:modelValue":v[6]||(v[6]=x=>l(a).minSkills=x),min:"0",max:"10",step:"1",class:"flex-1 h-2 bg-white/10 rounded-full appearance-none cursor-pointer"},null,512),[[ve,l(a).minSkills,void 0,{number:!0}]]),l(a).minSkills>0?(t(),s("button",{key:0,onClick:v[7]||(v[7]=x=>l(a).minSkills=0),class:"text-xs text-slate-400 hover:text-slate-300"}," 清除 ")):C("",!0)])]),e("div",null,[v[25]||(v[25]=e("label",{class:"block text-slate-300 mb-2"},"會籍狀態",-1)),e("div",Wo,[e("button",{onClick:v[8]||(v[8]=x=>l(a).membership=l(a).membership==="member"?"":"member"),class:T(["flex-1 px-3 py-1.5 rounded-lg text-sm transition-colors",l(a).membership==="member"?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-white/5 text-slate-400 hover:bg-white/10"])}," 中心成員 ",2),e("button",{onClick:v[9]||(v[9]=x=>l(a).membership=l(a).membership==="external"?"":"external"),class:T(["flex-1 px-3 py-1.5 rounded-lg text-sm transition-colors",l(a).membership==="external"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-white/5 text-slate-400 hover:bg-white/10"])}," 外部人才 ",2)])])]),e("div",{class:"flex items-center gap-3 mt-4 pt-4 border-t border-white/10"},[e("button",{onClick:O,class:"px-4 py-2 rounded-lg bg-primary-500 text-white hover:bg-primary-600 transition-colors"}," 套用篩選 "),e("button",{onClick:M,class:"px-4 py-2 rounded-lg bg-white/5 text-slate-400 hover:bg-white/10 transition-colors"}," 清除全部 "),e("button",{onClick:j,class:"px-4 py-2 rounded-lg bg-white/5 text-slate-400 hover:bg-white/10 transition-colors flex items-center gap-1 ml-auto"},[...v[26]||(v[26]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})],-1),V(" 儲存為常用 ",-1)])])])],512),[[$t,l(u)]])]),_:1}),l(b).length>0?(t(),s("div",Xo,[(t(!0),s(B,null,z(l(b),x=>(t(),Q(k,{key:`${x.key}-${x.value}`,variant:"primary",size:"sm",removable:"",onRemove:J=>f(x.key,x.value)},{default:q(()=>[V(c(x.label),1)]),_:2},1032,["onRemove"]))),128))])):C("",!0)]),(t(),Q(_t,{to:"body"},[l(y)?(t(),s("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",onClick:v[12]||(v[12]=ce(x=>y.value=!1,["self"]))},[e("div",Yo,[e("div",Zo,[v[28]||(v[28]=e("h3",{class:"text-lg font-semibold text-white"},"儲存篩選預設",-1)),e("button",{onClick:v[10]||(v[10]=x=>y.value=!1),class:"p-2 rounded-lg hover:bg-white/10"},[...v[27]||(v[27]=[e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",en,[e("div",tn,[Z(e("input",{"onUpdate:modelValue":v[11]||(v[11]=x=>ae(P)?P.value=x:null),type:"text",placeholder:"輸入預設名稱",class:"flex-1 px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white placeholder-slate-500 focus:outline-none focus:border-indigo-500",onKeyup:me(j,["enter"])},null,544),[[ve,l(P)]]),e("button",{onClick:j,class:"px-4 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-500 text-white transition-colors"}," 儲存 ")]),l(R).length>0?(t(),s("div",sn,[v[30]||(v[30]=e("h4",{class:"text-sm text-slate-400"},"已儲存的預設",-1)),e("div",ln,[(t(!0),s(B,null,z(l(R),x=>(t(),s("div",{key:x.id,class:"flex items-center justify-between p-3 rounded-lg bg-white/5 hover:bg-white/10 transition-colors group"},[e("button",{onClick:J=>A(x),class:"flex-1 text-left text-slate-300 hover:text-white transition-colors"},c(x.name),9,on),e("button",{onClick:J=>S(x.id),class:"p-1 rounded hover:bg-red-500/20 text-slate-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-all"},[...v[29]||(v[29]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,nn)]))),128))])])):(t(),s("div",an," 尚未儲存任何預設 "))])])])):C("",!0)]))],64)}}}),dn=Je(rn,[["__scopeId","data-v-90df0d3d"]]),cn={class:"quick-filter-tags"},un={class:"flex items-center gap-2 overflow-x-auto pb-2 scrollbar-hide"},vn=["onClick"],mn=["onClick"],hn={class:"flex items-center gap-1 ml-2"},gn=["onClick"],xn=N({__name:"QuickFilterTags",props:{popularSkills:{},popularTags:{},activeSkills:{},activeTags:{},activeRating:{}},emits:["filterBySkill","filterByTag","filterByRating","clearAll"],setup(n){const L=n,p=[3,4,5],w=D(()=>L.activeSkills.length>0||L.activeTags.length>0||L.activeRating>0);return(u,a)=>(t(),s("div",cn,[e("div",un,[a[5]||(a[5]=e("span",{class:"text-sm text-slate-400 shrink-0"},"快速篩選：",-1)),(t(!0),s(B,null,z(n.popularSkills,d=>(t(),s("button",{key:d,onClick:o=>u.$emit("filterBySkill",d),class:T(["px-3 py-1.5 rounded-full text-sm whitespace-nowrap transition-all",n.activeSkills.includes(d)?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/25":"bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white"])},[a[1]||(a[1]=e("svg",{class:"w-3.5 h-3.5 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})],-1)),V(" "+c(d),1)],10,vn))),128)),a[6]||(a[6]=e("div",{class:"w-px h-6 bg-white/10 shrink-0"},null,-1)),(t(!0),s(B,null,z(n.popularTags,d=>(t(),s("button",{key:d,onClick:o=>u.$emit("filterByTag",d),class:T(["px-3 py-1.5 rounded-full text-sm whitespace-nowrap transition-all",n.activeTags.includes(d)?"bg-primary-500 text-white shadow-lg shadow-primary-500/25":"bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white"])},[a[2]||(a[2]=e("span",{class:"text-primary-400"},"#",-1)),V(c(d),1)],10,mn))),128)),e("div",hn,[(t(),s(B,null,z(p,d=>e("button",{key:d,onClick:o=>u.$emit("filterByRating",d),class:T(["px-2 py-1 rounded-full text-xs whitespace-nowrap transition-all flex items-center gap-1",n.activeRating===d?"bg-yellow-500 text-white shadow-lg shadow-yellow-500/25":"bg-white/5 text-slate-400 hover:bg-white/10"])},[a[3]||(a[3]=e("svg",{class:"w-3 h-3 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1)),V(" "+c(d)+"+ ",1)],10,gn)),64))]),l(w)?(t(),s("button",{key:0,onClick:a[0]||(a[0]=d=>u.$emit("clearAll")),class:"px-3 py-1.5 rounded-full text-sm whitespace-nowrap bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-all ml-auto shrink-0"},[...a[4]||(a[4]=[e("svg",{class:"w-3.5 h-3.5 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),V(" 清除篩選 ",-1)])])):C("",!0)])]))}}),pn=Je(xn,[["__scopeId","data-v-95f0db60"]]),bn={class:"search-suggestions relative"},fn={class:"relative"},wn=["value","onKeydown"],kn={key:0,class:"absolute z-50 w-full mt-2 bg-slate-800 border border-white/10 rounded-xl shadow-2xl overflow-hidden"},yn={key:0,class:"p-3 border-b border-white/10"},$n={class:"flex flex-wrap gap-2"},_n=["onClick"],Cn={key:1,class:"p-3"},Sn={key:0,class:"text-xs text-slate-500 mb-2"},Mn=["onClick"],Bn={class:"flex-1"},jn={class:"text-white"},Vn={key:2,class:"p-3 border-t border-white/10"},zn=["onClick"],Ln={class:"text-slate-300"},Tn={class:"text-xs text-slate-500 ml-auto"},Fn=N({__name:"SearchSuggestions",props:{modelValue:{}},emits:["update:modelValue","search","selectSuggestion"],setup(n,{emit:L}){const p=n,w=L,u=$(p.modelValue),a=$(!1),d=$([]),o=$([]),h=$(["瑜珈","鋼琴","舞蹈","美術","英語"]);Ct(()=>p.modelValue,S=>{u.value=S});const F=S=>{const g=S.target;u.value=g.value,w("update:modelValue",u.value),u.value.length>0?E():d.value=[]},E=async()=>{const S=u.value.toLowerCase();if(S.length===0){d.value=[];return}try{const v=await le().get(`/admin/smart-matching/suggestions?q=${encodeURIComponent(S)}`);if(v.code===0&&v.datas){const k=v.datas;d.value=[],k.skills&&k.skills.forEach(x=>{d.value.push({type:"skill",value:x.value})}),k.tags&&k.tags.forEach(x=>{d.value.push({type:"tag",value:x.value})}),k.names&&k.names.forEach(x=>{d.value.push({type:"name",value:x.value})}),k.trending&&(h.value=k.trending)}d.value.length===0&&b(S)}catch(g){console.error("Failed to fetch suggestions:",g),b(S)}},b=S=>{const g=[{type:"skill",value:"瑜珈"},{type:"skill",value:"皮拉提斯"},{type:"skill",value:"有氧舞蹈"},{type:"skill",value:"鋼琴教學"},{type:"skill",value:"小提琴"}].filter(k=>k.value.toLowerCase().includes(S)),v=[{type:"tag",value:"古典"},{type:"tag",value:"兒童"},{type:"tag",value:"成人"},{type:"tag",value:"進階"},{type:"tag",value:"入門"}].filter(k=>k.value.toLowerCase().includes(S));d.value=[...g,...v].slice(0,6)},O=S=>{u.value=S.value,w("update:modelValue",S.value),w("selectSuggestion",S),a.value=!1,R(S.value)},M=()=>{u.value.trim()&&(w("search",u.value),a.value=!1,R(u.value))},f=S=>{u.value=S.query,w("update:modelValue",S.query),a.value=!1,w("search",S.query)},R=S=>{const g={id:Date.now().toString(),query:S,timestamp:Date.now()};o.value=o.value.filter(v=>v.query!==S),o.value.unshift(g),o.value.length>10&&(o.value=o.value.slice(0,10)),j()},y=()=>{o.value=[],localStorage.removeItem("talent_recent_searches")},P=()=>{u.value="",w("update:modelValue",""),d.value=[]},K=S=>{switch(S){case"skill":return"技能";case"tag":return"標籤";case"name":return"姓名";default:return""}},H=S=>{const g=Date.now()-S,v=Math.floor(g/6e4),k=Math.floor(g/36e5),x=Math.floor(g/864e5);return v<1?"剛剛":v<60?`${v} 分鐘前`:k<24?`${k} 小時前`:`${x} 天前`},j=()=>{try{localStorage.setItem("talent_recent_searches",JSON.stringify(o.value))}catch(S){console.error("Failed to save recent searches:",S)}},A=()=>{try{const S=localStorage.getItem("talent_recent_searches");S&&(o.value=JSON.parse(S))}catch(S){console.error("Failed to load recent searches:",S)}};return _e(()=>{A()}),(S,g)=>(t(),s("div",bn,[e("div",fn,[e("input",{value:l(u),onInput:F,onFocus:g[0]||(g[0]=v=>a.value=!0),onKeydown:[me(ce(M,["prevent"]),["enter"]),g[1]||(g[1]=me(v=>a.value=!1,["escape"]))],type:"text",placeholder:"搜尋人才姓名、技能、標籤...",class:"w-full px-4 py-3 pl-10 rounded-xl bg-white/5 border border-white/10 text-white placeholder-slate-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all"},null,40,wn),g[4]||(g[4]=e("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),l(u)?(t(),s("button",{key:0,onClick:P,class:"absolute right-3 top-1/2 -translate-y-1/2 p-1 rounded-lg hover:bg-white/10 text-slate-400 transition-colors"},[...g[3]||(g[3]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):C("",!0)]),U(Ce,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:q(()=>[l(a)&&(l(d).length>0||l(o).length>0||l(h).length>0)?(t(),s("div",kn,[l(h).length>0&&!l(u)?(t(),s("div",yn,[g[5]||(g[5]=e("div",{class:"flex items-center gap-2 mb-2"},[e("svg",{class:"w-4 h-4 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})]),e("span",{class:"text-xs text-slate-400"},"熱門搜尋")],-1)),e("div",$n,[(t(!0),s(B,null,z(l(h),(v,k)=>(t(),s("button",{key:k,onClick:x=>O({type:"trending",value:v}),class:"px-3 py-1 rounded-lg bg-white/5 hover:bg-white/10 text-slate-300 text-sm transition-colors"},c(v),9,_n))),128))])])):C("",!0),l(d).length>0?(t(),s("div",Cn,[l(u)?(t(),s("p",Sn,"搜尋建議")):C("",!0),(t(!0),s(B,null,z(l(d),v=>(t(),s("button",{key:`${v.type}-${v.value}`,onClick:k=>O(v),class:"w-full px-3 py-2 text-left flex items-center gap-3 hover:bg-white/5 rounded-lg transition-colors group"},[g[6]||(g[6]=e("div",{class:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center group-hover:bg-indigo-500/20 transition-colors"},[e("svg",{class:"w-4 h-4 text-slate-400 group-hover:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),e("div",Bn,[e("span",jn,c(v.value),1),e("span",{class:T(["ml-2 px-2 py-0.5 rounded text-xs",v.type==="skill"?"bg-yellow-500/20 text-yellow-400":v.type==="tag"?"bg-primary-500/20 text-primary-400":"bg-blue-500/20 text-blue-400"])},c(K(v.type)),3)]),g[7]||(g[7]=e("svg",{class:"w-4 h-4 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,Mn))),128))])):C("",!0),l(o).length>0&&!l(u)?(t(),s("div",Vn,[e("div",{class:"flex items-center justify-between mb-2"},[g[8]||(g[8]=e("div",{class:"flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-xs text-slate-400"},"近期搜尋")],-1)),e("button",{onClick:y,class:"text-xs text-slate-500 hover:text-slate-300"}," 清除 ")]),(t(!0),s(B,null,z(l(o),v=>(t(),s("button",{key:v.id,onClick:k=>f(v),class:"w-full px-3 py-2 text-left flex items-center gap-3 hover:bg-white/5 rounded-lg transition-colors"},[e("span",Ln,c(v.query),1),e("span",Tn,c(H(v.timestamp)),1)],8,zn))),128))])):C("",!0),g[9]||(g[9]=e("div",{class:"px-3 py-2 border-t border-white/10 bg-white/5"},[e("div",{class:"flex items-center gap-4 text-xs text-slate-500"},[e("span",{class:"flex items-center gap-1"},[e("kbd",{class:"px-1.5 py-0.5 rounded bg-white/10 text-slate-400"},"Enter"),V(" 搜尋 ")]),e("span",{class:"flex items-center gap-1"},[e("kbd",{class:"px-1.5 py-0.5 rounded bg-white/10 text-slate-400"},"Esc"),V(" 關閉 ")])])],-1))])):C("",!0)]),_:1}),l(a)?(t(),s("div",{key:0,class:"fixed inset-0 z-40",onClick:g[2]||(g[2]=v=>a.value=!1)})):C("",!0)]))}}),Rn={class:"talent-stats-panel"},An={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},In={class:"stat-card bg-white/5 rounded-xl p-4 hover:bg-white/10 transition-colors"},En={class:"flex items-center justify-between mb-3"},On={class:"text-2xl font-bold text-white mb-1"},Pn={class:"mt-3 h-8 flex items-end gap-1"},Dn={class:"stat-card bg-white/5 rounded-xl p-4 hover:bg-white/10 transition-colors"},Un={class:"flex items-center justify-between mb-3"},Hn={class:"text-xs px-2 py-1 rounded-full bg-green-500/20 text-green-400"},Nn={class:"text-2xl font-bold text-white mb-1"},qn={class:"mt-2 text-xs text-slate-500"},Kn={class:"text-green-400"},Jn={class:"stat-card bg-white/5 rounded-xl p-4 hover:bg-white/10 transition-colors"},Gn={class:"text-2xl font-bold text-white mb-1"},Qn={class:"mt-2 flex items-center gap-1"},Wn={class:"flex-1 h-1.5 bg-white/10 rounded-full overflow-hidden"},Xn={class:"stat-card bg-white/5 rounded-xl p-4 hover:bg-white/10 transition-colors"},Yn={class:"flex items-center justify-between mb-3"},Zn={class:"text-xs px-2 py-1 rounded-full bg-yellow-500/20 text-yellow-400"},ea={class:"flex items-end gap-1 mb-1"},ta={class:"text-2xl font-bold text-white"},sa={class:"flex items-center gap-0.5 mt-2"},la={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4"},oa={class:"bg-white/5 rounded-xl p-4"},na={class:"space-y-2"},aa={class:"text-xs text-slate-400 w-12"},ia={class:"flex-1 h-2 bg-white/10 rounded-full overflow-hidden"},ra={class:"text-xs text-slate-500 w-8 text-right"},da={class:"bg-white/5 rounded-xl p-4"},ca={class:"flex flex-wrap gap-2"},ua={class:"text-xs font-medium text-white"},va={class:"text-xs text-slate-500"},ma={class:"bg-white/5 rounded-xl p-4"},ha={class:"space-y-2"},ga={class:"flex items-center justify-between text-sm"},xa={class:"text-green-400 font-medium"},pa={class:"flex items-center justify-between text-sm"},ba={class:"text-yellow-400 font-medium"},fa={class:"flex items-center justify-between text-sm"},wa={class:"text-red-400 font-medium"},ka={class:"pt-2 mt-2 border-t border-white/10"},ya={class:"flex items-center justify-between text-sm"},$a={class:"text-primary-400 font-medium"},_a=N({__name:"TalentStatsPanel",props:{stats:{},cityDistribution:{},topSkills:{}},setup(n){const L=n,p=D(()=>Math.max(...L.stats.monthlyTrend,1)),w=D(()=>Math.max(...L.cityDistribution.map(d=>d.count),1)),u=D(()=>L.stats.acceptedInvites+L.stats.pendingInvites+L.stats.declinedInvites===0?0:Math.round(L.stats.acceptedInvites/(L.stats.acceptedInvites+L.stats.declinedInvites)*100)),a=d=>d>=1e3?(d/1e3).toFixed(1)+"k":d.toString();return(d,o)=>(t(),s("div",Rn,[e("div",An,[e("div",In,[e("div",En,[o[0]||(o[0]=e("div",{class:"w-10 h-10 rounded-lg bg-primary-500/20 flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("div",{class:T(["text-xs px-2 py-1 rounded-full",n.stats.monthlyChange>0?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"])},c(n.stats.monthlyChange>0?"+":"")+c(n.stats.monthlyChange)+"% ",3)]),e("div",On,c(a(n.stats.totalCount)),1),o[1]||(o[1]=e("div",{class:"text-xs text-slate-400"},"人才庫總人數",-1)),e("div",Pn,[(t(!0),s(B,null,z(n.stats.monthlyTrend,(h,F)=>(t(),s("div",{key:F,class:"flex-1 bg-gradient-to-t from-primary-500/50 to-primary-500/20 rounded-t",style:ee({height:`${h/l(p)*100}%`})},null,4))),128))])]),e("div",Dn,[e("div",Un,[o[2]||(o[2]=e("div",{class:"w-10 h-10 rounded-lg bg-green-500/20 flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Hn,c((n.stats.openHiringCount/n.stats.totalCount*100).toFixed(0))+"% ",1)]),e("div",Nn,c(a(n.stats.openHiringCount)),1),o[4]||(o[4]=e("div",{class:"text-xs text-slate-400"},"開放徵才",-1)),e("div",qn,[e("span",Kn,c(n.stats.pendingInvites),1),o[3]||(o[3]=V(" 待回覆邀請 ",-1))])]),e("div",Jn,[o[5]||(o[5]=e("div",{class:"flex items-center justify-between mb-3"},[e("div",{class:"w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])])],-1)),e("div",Gn,c(a(n.stats.memberCount)),1),o[6]||(o[6]=e("div",{class:"text-xs text-slate-400"},"中心成員",-1)),e("div",Qn,[e("div",Wn,[e("div",{class:"h-full bg-blue-500 rounded-full",style:ee({width:`${n.stats.memberCount/n.stats.totalCount*100}%`})},null,4)])])]),e("div",Xn,[e("div",Yn,[o[7]||(o[7]=e("div",{class:"w-10 h-10 rounded-lg bg-yellow-500/20 flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})])],-1)),e("div",Zn,c(n.stats.averageRating.toFixed(1)),1)]),e("div",ea,[e("span",ta,c(n.stats.averageRating.toFixed(1)),1),o[8]||(o[8]=e("span",{class:"text-sm text-slate-400 mb-1"},"/ 5.0",-1))]),o[10]||(o[10]=e("div",{class:"text-xs text-slate-400"},"平均評分",-1)),e("div",sa,[(t(),s(B,null,z(5,h=>e("svg",{key:h,class:T(["w-3 h-3",h<=Math.round(n.stats.averageRating)?"text-yellow-400":"text-slate-600"]),fill:"currentColor",viewBox:"0 0 20 20"},[...o[9]||(o[9]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.364 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"},null,-1)])],2)),64))])])]),e("div",la,[e("div",oa,[o[11]||(o[11]=e("h4",{class:"text-sm font-medium text-white mb-3 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]),V(" 地區分布 ")],-1)),e("div",na,[(t(!0),s(B,null,z(n.cityDistribution,h=>(t(),s("div",{key:h.name,class:"flex items-center gap-2"},[e("span",aa,c(h.name),1),e("div",ia,[e("div",{class:"h-full bg-gradient-to-r from-blue-500 to-blue-400 rounded-full transition-all duration-500",style:ee({width:`${h.count/l(w)*100}%`})},null,4)]),e("span",ra,c(h.count),1)]))),128))])]),e("div",da,[o[12]||(o[12]=e("h4",{class:"text-sm font-medium text-white mb-3 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})]),V(" 熱門技能 ")],-1)),e("div",ca,[(t(!0),s(B,null,z(n.topSkills,(h,F)=>(t(),s("div",{key:h.name,class:"flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-white/5"},[e("span",ua,c(h.name),1),e("span",va,c(h.count),1)]))),128))])]),e("div",ma,[o[17]||(o[17]=e("h4",{class:"text-sm font-medium text-white mb-3 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),V(" 招募狀態 ")],-1)),e("div",ha,[e("div",ga,[o[13]||(o[13]=e("span",{class:"text-slate-400"},"已接受邀請",-1)),e("span",xa,c(n.stats.acceptedInvites),1)]),e("div",pa,[o[14]||(o[14]=e("span",{class:"text-slate-400"},"待回覆",-1)),e("span",ba,c(n.stats.pendingInvites),1)]),e("div",fa,[o[15]||(o[15]=e("span",{class:"text-slate-400"},"已拒絕",-1)),e("span",wa,c(n.stats.declinedInvites),1)]),e("div",ka,[e("div",ya,[o[16]||(o[16]=e("span",{class:"text-slate-400"},"回覆率",-1)),e("span",$a,c(l(u))+"%",1)])])])])])]))}}),Ca={class:"skills-distribution-chart bg-white/5 rounded-xl p-4"},Sa={class:"flex items-center justify-between mb-4"},Ma={class:"flex items-center gap-1 bg-white/5 rounded-lg p-1"},Ba={key:0,class:"space-y-3"},ja={class:"flex items-center justify-between mb-1"},Va={class:"flex items-center gap-2"},za={class:"text-sm text-slate-300 group-hover:text-white transition-colors"},La={class:"flex items-center gap-2"},Ta={class:"text-xs text-slate-500"},Fa={class:"text-xs text-slate-400"},Ra={class:"h-3 bg-white/10 rounded-full overflow-hidden"},Aa={key:1,class:"flex items-center gap-6"},Ia={class:"relative w-40 h-40 shrink-0"},Ea={viewBox:"0 0 100 100",class:"w-full h-full -rotate-90"},Oa=["stroke","stroke-dasharray","stroke-dashoffset","onClick"],Pa={class:"absolute inset-0 flex flex-col items-center justify-center"},Da={class:"text-2xl font-bold text-white"},Ua={class:"flex-1 grid grid-cols-2 gap-2"},Ha=["onClick"],Na={class:"min-w-0"},qa={class:"text-sm text-slate-300 truncate"},Ka={class:"text-xs text-slate-500"},Ja={class:"mt-4 pt-4 border-t border-white/10"},Ga={class:"flex items-center justify-between text-xs"},Qa={class:"text-slate-500"},Wa={class:"text-slate-400"},Xa=N({__name:"SkillsDistributionChart",props:{skills:{},totalTeachers:{}},emits:["selectSkill"],setup(n,{emit:L}){const p=n,w=$("bar"),u=D(()=>Math.max(...p.skills.map(M=>M.count),1)),a=D(()=>p.skills.reduce((M,f)=>M+f.count,0)),d=D(()=>p.totalTeachers===0?0:a.value/p.totalTeachers),o=M=>(M/a.value*100).toFixed(1),h=M=>["瑜珈","鋼琴","舞蹈","美術","英語"].includes(M),F=M=>["瑜珈","鋼琴","舞蹈"].includes(M)?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-primary-500 to-secondary-500",E=M=>{const f=["#6366f1","#a855f7","#f59e0b","#10b981","#3b82f6","#ef4444","#ec4899","#14b8a6"];return f[M%f.length]},b=(M,f)=>{const R=2*Math.PI*40;return`${M/a.value*R} ${R}`},O=M=>{const f=2*Math.PI*40;let R=0;for(let y=0;y<M;y++){const P=p.skills[y].count/a.value;R-=P*f}return String(R)};return(M,f)=>{const R=ie;return t(),s("div",Ca,[e("div",Sa,[f[4]||(f[4]=e("h4",{class:"text-sm font-medium text-white flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]),V(" 技能分布 ")],-1)),e("div",Ma,[e("button",{class:T(["p-1 rounded",l(w)==="bar"?"bg-indigo-500 text-white":"text-slate-400 hover:text-white"]),onClick:f[0]||(f[0]=y=>w.value="bar"),title:"長條圖"},[...f[2]||(f[2]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])],2),e("button",{class:T(["p-1 rounded",l(w)==="pie"?"bg-indigo-500 text-white":"text-slate-400 hover:text-white"]),onClick:f[1]||(f[1]=y=>w.value="pie"),title:"圓餅圖"},[...f[3]||(f[3]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"})],-1)])],2)])]),l(w)==="bar"?(t(),s("div",Ba,[(t(!0),s(B,null,z(n.skills,y=>(t(),s("div",{key:y.name,class:"skill-bar group"},[e("div",ja,[e("div",Va,[e("span",za,c(y.name),1),h(y.name)?(t(),Q(R,{key:0,variant:"warning",size:"xs"},{default:q(()=>[...f[5]||(f[5]=[V(" Hot ",-1)])]),_:1})):C("",!0)]),e("div",La,[e("span",Ta,c(y.count)+" 人",1),e("span",Fa,c(o(y.count))+"%",1)])]),e("div",Ra,[e("div",{class:T(["h-full rounded-full transition-all duration-700 ease-out",F(y.name)]),style:ee({width:`${y.count/l(u)*100}%`})},null,6)])]))),128))])):(t(),s("div",Aa,[e("div",Ia,[(t(),s("svg",Ea,[(t(!0),s(B,null,z(n.skills,(y,P)=>(t(),s("circle",{key:y.name,cx:"50",cy:"50",r:"40",fill:"transparent",stroke:E(P),"stroke-width":"20","stroke-dasharray":b(y.count),"stroke-dashoffset":O(P),class:"transition-all duration-700 ease-out hover:opacity-80 cursor-pointer",onClick:K=>M.$emit("selectSkill",y.name)},null,8,Oa))),128))])),e("div",Pa,[e("span",Da,c(l(a)),1),f[6]||(f[6]=e("span",{class:"text-xs text-slate-400"},"總計",-1))])]),e("div",Ua,[(t(!0),s(B,null,z(n.skills,(y,P)=>(t(),s("div",{key:y.name,class:"flex items-center gap-2 p-2 rounded-lg hover:bg-white/5 cursor-pointer transition-colors",onClick:K=>M.$emit("selectSkill",y.name)},[e("div",{class:"w-3 h-3 rounded-full shrink-0",style:ee({backgroundColor:E(P)})},null,4),e("div",Na,[e("div",qa,c(y.name),1),e("div",Ka,c(o(y.count))+"%",1)])],8,Ha))),128))])])),e("div",Ja,[e("div",Ga,[e("span",Qa,"涵蓋 "+c(n.skills.length)+" 種技能類型",1),e("span",Wa,"平均每人 "+c(l(d).toFixed(1))+" 種技能",1)])])])}}}),Ya={class:"p-4 md:p-6",role:"main","aria-label":"智慧媒合系統"},Za={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ei={class:"glass-card p-4 md:p-6",role:"region","aria-label":"搜尋條件"},ti={class:"grid grid-cols-1 sm:grid-cols-2 gap-4",role:"group","aria-labelledby":"datetime-range-label"},si={class:"flex flex-col sm:flex-row gap-3 pt-4"},li=["disabled","aria-busy"],oi={key:0,role:"status"},ni={key:1},ai={class:"glass-card p-4 md:p-6",role:"region","aria-label":"媒合結果"},ii={key:0,class:"text-center py-12 text-slate-500",role:"status"},ri={key:1,class:"text-center py-12 text-slate-500",role:"status"},di={key:2},ci={key:3,class:"py-12"},ui={class:"max-w-md mx-auto"},vi={class:"flex items-center justify-between text-xs text-slate-500 mb-1"},mi={class:"h-2 bg-white/10 rounded-full overflow-hidden"},hi={class:"mt-6 space-y-2 max-w-sm mx-auto"},gi={class:"w-5 h-5 rounded-full flex items-center justify-center"},xi={key:0,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},pi={key:1,class:"w-2 h-2 rounded-full bg-primary-500 animate-pulse"},bi={key:2,class:"w-2 h-2 rounded-full bg-slate-600"},fi={key:1,class:"grid grid-cols-1 gap-3"},wi={key:2,class:"space-y-3"},ki=["onClick"],yi={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-3"},$i={class:"flex items-center gap-3"},_i={class:"w-10 h-10 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center shrink-0"},Ci={class:"text-white font-medium"},Si={class:"text-white font-medium"},Mi={class:"text-sm text-slate-400"},Bi={class:"flex items-center gap-3"},ji={class:"text-right"},Vi={class:"text-2xl font-bold text-primary-500"},zi=["checked","onChange"],Li={class:"flex flex-wrap items-center gap-3 text-sm text-slate-400 mb-3"},Ti={class:"flex items-center gap-1"},Fi={class:"flex items-center gap-1"},Ri={key:0,class:"mb-3"},Ai={class:"flex flex-wrap gap-2"},Ii={key:1,class:"text-sm text-slate-400 mb-3"},Ei=["onClick"],Oi={key:3,class:"mt-6"},Pi={key:0,class:"mt-4"},Di={class:"mt-6 glass-card p-4 md:p-6"},Ui={class:"flex items-center justify-between mb-4"},Hi={key:0,class:"mb-6"},Ni={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},qi={class:"bg-white/5 rounded-xl p-4"},Ki={class:"flex flex-wrap gap-2"},Ji=["onClick"],Gi={class:"mt-4"},Qi={key:1,class:"mt-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Wi={class:"text-sm text-slate-400"},Xi={class:"text-white font-medium"},Yi={class:"text-slate-500 ml-2"},Zi={class:"flex items-center gap-2"},er={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},tr={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},sr={key:2,class:"mt-4 flex items-center justify-center gap-2"},lr=["disabled"],or={class:"flex items-center gap-1"},nr=["onClick"],ar=["disabled"],ir={class:"text-xs text-slate-500 ml-2"},rr=["max"],dr={key:3,class:"mt-4"},cr={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-20"},ur={key:4,class:"text-center py-12 text-slate-500"},fr=N({__name:"matching",setup(n){const L=Ge(),{warning:p,success:w}=St(),u=$(!1),a=$(!1),d=$(!1),o=$([]),h=$([]),{getCenterId:F}=Mt(),E=$(0),b=$([{name:"取得老師清單",completed:!1,active:!1},{name:"分析可用時間",completed:!1,active:!1},{name:"計算技能匹配度",completed:!1,active:!1},{name:"評估緩衝時間",completed:!1,active:!1},{name:"產生媒合結果",completed:!1,active:!1}]),O=()=>{const m=b.value;let i=0,_=-1;for(let r=0;r<m.length;r++)m[r].completed&&(i=Math.floor((r+1)/m.length*100),_=r);i=Math.min(i,100),E.value=i,m.forEach((r,I)=>{r.active=I===_+1&&!r.completed})},M=()=>{E.value=0,b.value=[{name:"取得老師清單",completed:!1,active:!0},{name:"分析可用時間",completed:!1,active:!1},{name:"計算技能匹配度",completed:!1,active:!1},{name:"評估緩衝時間",completed:!1,active:!1},{name:"產生媒合結果",completed:!1,active:!1}]},f=m=>{m<b.value.length&&(b.value[m].completed=!0,b.value[m].active=!1,m+1<b.value.length&&(b.value[m+1].active=!0),O())},R=$(null),y=$([]),P=$("score"),K=$("desc"),H=$("card"),j=$(new Set),A=$(null),S=$([]),g=$([]),v=$(!1),k=$({start_time:"",end_time:"",room_ids:[],skills:""}),x=$({query:"",city:"",skills:"",hashtags:""}),J=$([]),te=$(new Set),ue=$(new Map),Se=$(new Set),Me=$(!1),be=$(0),Be=$(!1),re=$(!1),fe=$("name"),we=$("asc"),oe=$([]),de=$([]),W=$(1),Ie=$(20),ke=$(0),Y=$(0),je=$({totalCount:0,openHiringCount:0,memberCount:0,averageRating:0,monthlyChange:0,monthlyTrend:[],pendingInvites:0,acceptedInvites:0,declinedInvites:0}),Ve=$([]),ze=$([]),Le=$([]),ye=$([]),Qe=async()=>{try{const i=await le().get("/admin/smart-matching/talent/stats");if(i.code===0&&i.datas){const _=i.datas;je.value={totalCount:_.total_count||0,openHiringCount:_.open_hiring_count||0,memberCount:_.member_count||0,averageRating:_.average_rating||0,monthlyChange:_.monthly_change||0,monthlyTrend:_.monthly_trend||[],pendingInvites:_.pending_invites||0,acceptedInvites:_.accepted_invites||0,declinedInvites:_.declined_invites||0},_.city_distribution&&(Ve.value=_.city_distribution),_.top_skills&&(ze.value=_.top_skills,Le.value=_.top_skills.slice(0,8),ye.value=_.top_skills.slice(0,6).map(r=>r.name))}}catch(m){console.error("Failed to fetch talent stats:",m),je.value={totalCount:0,openHiringCount:0,memberCount:0,averageRating:0,monthlyChange:0,monthlyTrend:[],pendingInvites:0,acceptedInvites:0,declinedInvites:0},Ve.value=[],ze.value=[],Le.value=[],ye.value=[]}},We=D(()=>J.value),Xe=D(()=>{const m=[];if(Y.value<=5)for(let _=1;_<=Y.value;_++)m.push(_);else{let _=Math.max(1,W.value-Math.floor(2.5)),r=_+5-1;r>Y.value&&(r=Y.value,_=Math.max(1,r-5+1));for(let I=_;I<=r;I++)m.push(I)}return m}),he=D(()=>{const m=[...o.value];return m.sort((i,_)=>{let r=0;switch(P.value){case"score":r=i.match_score-_.match_score;break;case"availability":const I={AVAILABLE:0,BUFFER_CONFLICT:1,OVERLAP:2};r=(I[i.availability]||0)-(I[_.availability]||0);break;case"rating":r=(i.rating||0)-(_.rating||0);break;case"skill-match":r=i.skill_match-_.skill_match;break}return K.value==="desc"?-r:r}),m}),Ye=m=>{k.value.start_time=m.start_time.slice(0,16),k.value.end_time=m.end_time.slice(0,16),k.value.room_ids=[...m.room_ids],y.value=[...m.skills]},Ze=()=>{},Ee=(m,i)=>{if(i){if(j.value.size>=3){p("最多只能選取 3 位老師進行比較");return}j.value.add(m)}else j.value.delete(m)},et=m=>{j.value.delete(m.teacher_id)},tt=()=>{H.value="card"},st=(m,i)=>{i?te.value.add(m):te.value.delete(m)},lt=()=>{te.value.clear()},ot=async m=>{Se.value.add(m.id);try{const _=await le().post("/admin/smart-matching/talent/invite",{teacher_ids:[m.id],message:""});if(_.code===0)ue.value.set(m.id,{sent:!0,variant:"success",text:"已邀請"}),w(`已向 ${m.name} 發送合作邀請`);else throw new Error(_.message||"邀請失敗")}catch(i){console.error("Failed to send invitation:",i),ue.value.set(m.id,{sent:!1,variant:"error",text:"邀請失敗"}),p("邀請失敗，請稍後再試")}finally{Se.value.delete(m.id)}},nt=async()=>{if(te.value.size===0){await p("請先選取要邀請的人才");return}if(!await Ne(`確定要邀請選取的 ${te.value.size} 位人才嗎？`))return;Me.value=!0,be.value=0;const m=Array.from(te.value);try{const _=await le().post("/admin/smart-matching/talent/invite",{teacher_ids:m,message:""});if(_.code===0){const r=_.datas;m.forEach(I=>{r.failed_ids&&r.failed_ids.includes(I)?ue.value.set(I,{sent:!1,variant:"error",text:"邀請失敗"}):ue.value.set(I,{sent:!0,variant:"success",text:"已邀請"})}),be.value=100,w(`已成功邀請 ${r.invited_count} 位人才，失敗 ${r.failed_count} 位`)}else throw new Error(_.message||"邀請失敗")}catch(i){console.error("Failed to bulk invite:",i),p("批量邀請失敗，請稍後再試"),m.forEach(_=>{ue.value.set(_,{sent:!1,variant:"error",text:"邀請失敗"})})}finally{Me.value=!1,be.value=0,te.value.clear()}},at=()=>{const m=J.value.filter(G=>te.value.has(G.id));if(m.length===0){p("請先選取要匯出的人才");return}const i=["姓名","城市","區域","聯絡方式","技能","標籤"],_=m.map(G=>[G.name,G.city||"",G.district||"",G.public_contact_info||"",G.skills?.map(Re=>Re.name).join(", ")||"",G.personal_hashtags?.join(", ")||""]),r=[i.join(","),..._.map(G=>G.map(Re=>`"${Re}"`).join(","))].join(`
`),I=new Blob([r],{type:"text/csv;charset=utf-8;"}),X=document.createElement("a");X.href=URL.createObjectURL(I),X.download=`人才庫匯出_${Ue()}.csv`,X.click(),URL.revokeObjectURL(X.href),w(`已匯出 ${m.length} 位人才的聯絡資訊`)},ne=async(m,i=1)=>{a.value=!0,Be.value=!0;try{const _=le(),r=new URLSearchParams;(m||x.value.query)&&r.append("keyword",m||x.value.query),x.value.city&&r.append("city",x.value.city),x.value.skills&&r.append("skills",x.value.skills),x.value.hashtags&&r.append("hashtags",x.value.hashtags),r.append("page",i.toString()),r.append("limit",Ie.value.toString()),r.append("sort_by",fe.value),r.append("sort_order",we.value);const I=await _.get(`/admin/smart-matching/talent/search?${r.toString()}`);if(I.code===0&&I.datas){const X=I.datas;J.value=X.talents||[],X.pagination&&(W.value=X.pagination.page,Ie.value=X.pagination.limit,ke.value=X.pagination.total,Y.value=X.pagination.total_pages)}else J.value=[],ke.value=0,Y.value=0;re.value=!0}catch(_){console.error("Failed to search talent:",_),J.value=[],ke.value=0,Y.value=0,re.value=!0,await He("搜尋人才失敗，請稍後再試")}finally{a.value=!1}},$e=m=>{m>=1&&m<=Y.value&&(W.value=m,ne(void 0,m),window.scrollTo({top:0,behavior:"smooth"}))},it=m=>{x.value.query=m.value,m.type==="skill"?x.value.skills=m.value:m.type==="tag"&&(x.value.hashtags=m.value),ne()},Oe=m=>{x.value.skills=m,oe.value=[m],ne()},rt=m=>{oe.value.includes(m)?oe.value=oe.value.filter(i=>i!==m):oe.value=[...oe.value,m]},dt=m=>{de.value.includes(m)?de.value=de.value.filter(i=>i!==m):de.value=[...de.value,m]},Te=()=>{oe.value=[],de.value=[]},ct=m=>{m.city&&(x.value.city=m.city),m.skills&&(x.value.skills=m.skills),m.hashtags&&(x.value.hashtags=m.hashtags),ne()},ut=()=>{x.value={query:"",city:"",skills:"",hashtags:""},Te(),ne()},vt=()=>{x.value={query:"",city:"",skills:"",hashtags:""},Be.value=!1,J.value=[],Te(),re.value=!1},mt=m=>{w(`正在查看 ${m.name} 的詳細資訊`)},ht=m=>{if(j.value.size>=3){p("最多只能選取 3 位老師進行比較");return}j.value.add(m.id),w(`已將 ${m.name} 加入比較`)},Fe=async m=>{A.value=m;try{const i=le(),_=k.value.start_time?se(new Date(k.value.start_time)):Ue(),r=k.value.end_time?se(new Date(k.value.end_time)):se(new Date(Date.now()+10080*60*1e3)),I=await i.get(`/admin/teachers/${m.teacher_id}/sessions?start_date=${_}&end_date=${r}`);if(I.code===0&&I.datas){const X=I.datas;S.value=X.sessions.map(G=>({id:G.id,course_name:G.course_name,start_time:G.start_time,end_time:G.end_time,room_name:G.room_name||"未指定教室"}))}else S.value=[]}catch(i){console.error("Failed to fetch teacher sessions:",i),S.value=[],await He("取得老師課表失敗")}await gt(m),w(`正在查看 ${m.teacher_name} 的課表`)},gt=async m=>{if(!k.value.start_time||!k.value.end_time){g.value=[];return}try{const _=await le().post("/admin/smart-matching/alternatives",{teacher_id:m.teacher_id,original_start:se(new Date(k.value.start_time)),original_end:se(new Date(k.value.end_time)),duration:90});_.code===0&&_.datas?g.value=_.datas.map(r=>({date:r.date,dateLabel:r.date_label,start:r.start,end:r.end,available:r.available,availableRooms:r.available_rooms||[],conflictReason:r.conflict_reason})):g.value=[]}catch(i){console.error("Failed to fetch alternative slots:",i),g.value=[]}},xt=m=>{k.value.start_time=`${m.date}T${m.start}`,k.value.end_time=`${m.date}T${m.end}`,w(`已選擇替代時段 ${m.dateLabel} ${m.start}-${m.end}`),Pe()},pt=async()=>{await Ne("確定要在緩衝衝突的情況下安排這位老師嗎？")&&De(A.value)},Pe=async()=>{if(!k.value.start_time||!k.value.end_time){await p("請填寫開始時間和結束時間");return}u.value=!0,d.value=!0,o.value=[],j.value.clear(),H.value="card",A.value=null,M();const m=async()=>{await ge(200),f(0),await ge(150),f(1),await ge(150),f(2),await ge(100),f(3),await ge(100),f(4)};try{const i=le(),[_]=await Promise.all([i.post("/admin/smart-matching/matches",{room_ids:k.value.room_ids.length>0?k.value.room_ids:void 0,start_time:se(new Date(k.value.start_time)),end_time:se(new Date(k.value.end_time)),required_skills:y.value.length>0?y.value.map(r=>r.name):k.value.skills.split(",").map(r=>r.trim()).filter(Boolean)}),m()]);o.value=_.datas||[],R.value&&R.value.addSearch({start_time:se(new Date(k.value.start_time)),end_time:se(new Date(k.value.end_time)),room_ids:[...k.value.room_ids],skills:[...y.value]}),o.value.length===0&&p("沒有找到符合條件的老師")}catch(i){console.error("Failed to find matches:",i),o.value=[],await p("搜尋失敗，請稍後再試")}finally{u.value=!1}},ge=m=>new Promise(i=>setTimeout(i,m)),De=m=>{w(`已選擇 ${m.teacher_name}`)},bt=()=>{k.value={start_time:"",end_time:"",room_ids:[],skills:""},y.value=[],d.value=!1,o.value=[],j.value.clear(),A.value=null,S.value=[],g.value=[]},ft=async()=>{try{const m=le(),i=F(),_=await m.get("/admin/rooms");h.value=_.datas||[]}catch(m){console.error("Failed to fetch rooms:",m)}};return _e(async()=>{ft(),R.value&&R.value.loadFromStorage(),await Qe()}),(m,i)=>{const _=wt;return t(),s(B,null,[e("div",Ya,[i[45]||(i[45]=e("h1",{class:"text-2xl font-bold text-white mb-6"},"智慧媒合",-1)),e("div",Za,[e("div",ei,[i[24]||(i[24]=e("h2",{class:"text-lg font-semibold text-white mb-4"},"搜尋條件",-1)),U(zt,{ref_key:"recentSearchesRef",ref:R,onLoadSearch:Ye,onClearAll:Ze},null,512),e("form",{onSubmit:ce(Pe,["prevent"]),class:"space-y-4","aria-label":"媒合搜尋表單"},[e("div",null,[i[22]||(i[22]=e("label",{id:"datetime-range-label",class:"block text-slate-300 mb-2"},"課程時段",-1)),e("div",ti,[e("div",null,[i[20]||(i[20]=e("label",{for:"start-time",class:"block text-slate-400 text-sm mb-1"},"開始時間",-1)),Z(e("input",{id:"start-time","onUpdate:modelValue":i[0]||(i[0]=r=>l(k).start_time=r),type:"datetime-local","aria-label":"搜尋開始時間",class:"w-full px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white"},null,512),[[ve,l(k).start_time]])]),e("div",null,[i[21]||(i[21]=e("label",{for:"end-time",class:"block text-slate-400 text-sm mb-1"},"結束時間",-1)),Z(e("input",{id:"end-time","onUpdate:modelValue":i[1]||(i[1]=r=>l(k).end_time=r),type:"datetime-local","aria-label":"搜尋結束時間",class:"w-full px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white"},null,512),[[ve,l(k).end_time]])])])]),U(Nt,{rooms:l(h),modelValue:l(k).room_ids,"onUpdate:modelValue":i[2]||(i[2]=r=>l(k).room_ids=r),role:"group","aria-label":"選擇教室"},null,8,["rooms","modelValue"]),U(os,{modelValue:l(y),"onUpdate:modelValue":i[3]||(i[3]=r=>ae(y)?y.value=r:null),"aria-label":"選擇技能"},null,8,["modelValue"]),e("div",si,[e("button",{type:"button",onClick:bt,"aria-label":"清除搜尋條件",class:"flex-1 px-4 py-2 rounded-lg bg-white/5 text-white hover:bg-white/10 transition-colors"}," 清除 "),e("button",{type:"submit",disabled:l(u),"aria-label":"開始媒合搜尋","aria-busy":l(u),class:"flex-1 px-4 py-2 rounded-lg bg-primary-500 text-white hover:bg-primary-600 transition-colors disabled:opacity-50"},[l(u)?(t(),s("span",oi,[...i[23]||(i[23]=[e("span",{class:"animate-pulse"},"搜尋中...",-1)])])):(t(),s("span",ni,"開始媒合"))],8,li)])],32)]),e("div",ai,[i[32]||(i[32]=e("h2",{class:"text-lg font-semibold text-white mb-4"},"媒合結果",-1)),l(d)?l(o).length===0?(t(),s("div",ri," 沒有找到符合條件的老師 ")):l(H)==="compare"?(t(),s("div",di,[U(Fs,{"selected-teachers":l(he).filter(r=>l(j).has(r.teacher_id)),onRemove:et,onSelect:De,onExit:tt},null,8,["selected-teachers"])])):l(u)&&l(o).length===0?(t(),s("div",ci,[i[27]||(i[27]=Ae('<div class="text-center mb-4"><div class="inline-flex items-center gap-3"><div class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-primary-500 animate-bounce" style="animation-delay:0ms;"></span><span class="w-3 h-3 rounded-full bg-primary-500 animate-bounce" style="animation-delay:150ms;"></span><span class="w-3 h-3 rounded-full bg-primary-500 animate-bounce" style="animation-delay:300ms;"></span></div><span class="text-slate-400">正在搜尋符合條件的老師...</span></div></div>',1)),e("div",ui,[e("div",vi,[i[25]||(i[25]=e("span",null,"正在分析老師可用性",-1)),e("span",null,c(l(E))+"%",1)]),e("div",mi,[e("div",{class:"h-full bg-gradient-to-r from-primary-500 to-secondary-500 transition-all duration-300",style:ee({width:`${l(E)}%`})},null,4)])]),e("div",hi,[(t(!0),s(B,null,z(l(b),(r,I)=>(t(),s("div",{key:r.name,class:T(["flex items-center gap-3 text-sm",r.completed?"text-success-500":r.active?"text-white":"text-slate-600"])},[e("div",gi,[r.completed?(t(),s("svg",xi,[...i[26]||(i[26]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):r.active?(t(),s("span",pi)):(t(),s("span",bi))]),e("span",null,c(r.name),1)],2))),128))])])):(t(),s(B,{key:4},[l(o).length>0?(t(),Q(ms,{key:0,"sort-by":l(P),"onUpdate:sortBy":i[4]||(i[4]=r=>ae(P)?P.value=r:null),"sort-order":l(K),"onUpdate:sortOrder":i[5]||(i[5]=r=>ae(K)?K.value=r:null),"view-mode":l(H),"onUpdate:viewMode":i[6]||(i[6]=r=>ae(H)?H.value=r:null),"selected-count":l(j).size},null,8,["sort-by","sort-order","view-mode","selected-count"])):C("",!0),l(H)==="card"?(t(),s("div",fi,[(t(!0),s(B,null,z(l(he),r=>(t(),Q(cl,{key:r.teacher_id,match:r,selected:l(j).has(r.teacher_id),"show-checkbox":l(he).length>1,"onUpdate:selected":I=>Ee(r.teacher_id,I),onClick:I=>Fe(r)},null,8,["match","selected","show-checkbox","onUpdate:selected","onClick"]))),128))])):(t(),s("div",wi,[(t(!0),s(B,null,z(l(he),r=>(t(),s("div",{key:r.teacher_id,class:T(["p-4 rounded-lg transition-all cursor-pointer",l(j).has(r.teacher_id)?"bg-indigo-500/10 border border-indigo-500/30":"bg-white/5 border border-white/10 hover:bg-white/10"]),onClick:I=>Fe(r)},[e("div",yi,[e("div",$i,[e("div",_i,[e("span",Ci,c(r.teacher_name?.charAt(0)||"?"),1)]),e("div",null,[e("h3",Si,c(r.teacher_name),1),e("p",Mi,"匹配度 "+c(r.match_score)+"%",1)])]),e("div",Bi,[e("div",ji,[e("div",Vi,c(r.match_score)+"%",1)]),l(he).length>1?(t(),s("input",{key:0,type:"checkbox",checked:l(j).has(r.teacher_id),onChange:I=>Ee(r.teacher_id,!l(j).has(r.teacher_id)),onClick:i[7]||(i[7]=ce(()=>{},["stop"])),class:"w-5 h-5 rounded border-white/20 bg-white/10 text-indigo-500 focus:ring-indigo-500"},null,40,zi)):C("",!0)])]),e("div",Li,[e("span",Ti,[i[28]||(i[28]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),V(" 技能匹配: "+c(r.skill_match)+"% ",1)]),e("span",Fi,[i[29]||(i[29]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})],-1)),V(" 評分: "+c(r.rating?.toFixed(1)||"-"),1)]),e("span",{class:T(["px-2 py-0.5 rounded text-xs",r.availability==="AVAILABLE"?"bg-green-500/20 text-green-400":r.availability==="BUFFER_CONFLICT"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"])},c(r.availability==="AVAILABLE"?"完全可用":r.availability==="BUFFER_CONFLICT"?"緩衝衝突":"時間重疊"),3)]),r.available_rooms?.length?(t(),s("div",Ri,[i[30]||(i[30]=e("p",{class:"text-xs text-slate-500 mb-2"},"可授課教室：",-1)),e("div",Ai,[(t(!0),s(B,null,z(r.available_rooms,I=>(t(),s("span",{key:I.id,class:"px-2 py-1 rounded-md text-xs bg-success-500/20 text-success-500"},c(I.name),1))),128))])])):C("",!0),r.notes?(t(),s("p",Ii,c(r.notes),1)):C("",!0),e("button",{onClick:ce(I=>Fe(r),["stop"]),class:"mt-2 px-3 py-1.5 rounded-lg bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white text-sm transition-colors flex items-center gap-1"},[...i[31]||(i[31]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),V(" 查看課表衝突 ",-1)])],8,Ei)],10,ki))),128))])),l(A)?(t(),s("div",Oi,[U(Tl,{class:"mb-4"}),U(zl,{teacher:l(A),"target-start":l(k).start_time,"target-end":l(k).end_time,"existing-sessions":l(S),onOverride:pt},null,8,["teacher","target-start","target-end","existing-sessions"]),l(g).length>0?(t(),s("div",Pi,[U(Xl,{"teacher-name":l(A).teacher_name,slots:l(g),onSelect:xt,onCustom:i[8]||(i[8]=r=>v.value=!0)},null,8,["teacher-name","slots"])])):C("",!0)])):C("",!0)],64)):(t(),s("div",ii," 請設定搜尋條件並點擊「開始媒合」 "))])]),e("div",Di,[e("div",Ui,[i[34]||(i[34]=e("h2",{class:"text-lg font-semibold text-white"},"人才庫搜尋",-1)),l(J).length>0?(t(),s("button",{key:0,onClick:i[9]||(i[9]=r=>re.value=!l(re)),class:"text-sm text-slate-400 hover:text-white transition-colors flex items-center gap-1"},[i[33]||(i[33]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1)),V(" "+c(l(re)?"隱藏統計":"顯示統計"),1)])):C("",!0)]),U(Ce,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:q(()=>[l(re)&&l(J).length>0?(t(),s("div",Hi,[U(_a,{stats:l(je),"city-distribution":l(Ve),"top-skills":l(ze)},null,8,["stats","city-distribution","top-skills"]),e("div",Ni,[U(Xa,{skills:l(Le),"total-teachers":l(J).length,onSelectSkill:Oe},null,8,["skills","total-teachers"]),e("div",qi,[i[35]||(i[35]=e("h4",{class:"text-sm font-medium text-white mb-3 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})]),V(" 熱門搜尋技能 ")],-1)),e("div",Ki,[(t(!0),s(B,null,z(l(ye),r=>(t(),s("button",{key:r,onClick:I=>Oe(r),class:"px-3 py-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-slate-300 hover:text-white text-sm transition-colors"},c(r),9,Ji))),128))])])])])):C("",!0)]),_:1}),U(Fn,{modelValue:l(x).query,"onUpdate:modelValue":i[10]||(i[10]=r=>l(x).query=r),onSearch:ne,onSelectSuggestion:it},null,8,["modelValue"]),e("div",Gi,[U(dn,{ref:"talentFilterRef",onApply:ct,onClear:ut},null,512)]),l(J).length>0?(t(),Q(pn,{key:0,"popular-skills":l(ye),"popular-tags":["古典","兒童","成人","入門","進階"],"active-skills":l(oe),"active-tags":l(de),onFilterBySkill:rt,onFilterByTag:dt,onClearAll:Te},null,8,["popular-skills","active-skills","active-tags"])):C("",!0),l(J).length>0?(t(),s("div",Qi,[e("span",Wi,[i[36]||(i[36]=V(" 找到 ",-1)),e("span",Xi,c(l(ke)),1),i[37]||(i[37]=V(" 位人才 ",-1)),e("span",Yi,"(第 "+c(l(W))+"/"+c(l(Y))+" 頁)",1)]),e("div",Zi,[Z(e("select",{"onUpdate:modelValue":i[11]||(i[11]=r=>ae(fe)?fe.value=r:null),onChange:i[12]||(i[12]=r=>ne(void 0,1)),class:"px-3 py-1.5 rounded-lg bg-white/5 border border-white/10 text-white text-sm"},[...i[38]||(i[38]=[e("option",{value:"name"},"姓名",-1),e("option",{value:"skills"},"技能數",-1),e("option",{value:"rating"},"評分",-1),e("option",{value:"city"},"地區",-1)])],544),[[xe,l(fe)]]),e("button",{onClick:i[13]||(i[13]=r=>{we.value=l(we)==="asc"?"desc":"asc",ne(void 0,1)}),class:"p-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white transition-colors",title:"切換排序順序"},[l(we)==="asc"?(t(),s("svg",er,[...i[39]||(i[39]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"},null,-1)])])):(t(),s("svg",tr,[...i[40]||(i[40]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"},null,-1)])]))])])])):C("",!0),l(Y)>1?(t(),s("div",sr,[e("button",{onClick:i[14]||(i[14]=r=>$e(l(W)-1)),disabled:l(W)<=1,class:"px-3 py-1.5 rounded-lg bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed transition-colors text-sm"}," 上一頁 ",8,lr),e("div",or,[(t(!0),s(B,null,z(l(Xe),r=>(t(),s("button",{key:r,onClick:I=>$e(r),class:T(["w-8 h-8 rounded-lg text-sm transition-colors",r===l(W)?"bg-primary-500 text-white":"bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white"])},c(r),11,nr))),128))]),e("button",{onClick:i[15]||(i[15]=r=>$e(l(W)+1)),disabled:l(W)>=l(Y),class:"px-3 py-1.5 rounded-lg bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed transition-colors text-sm"}," 下一頁 ",8,ar),e("span",ir,[i[41]||(i[41]=V(" 跳至第 ",-1)),Z(e("input",{type:"number",min:"1",max:l(Y),"onUpdate:modelValue":i[16]||(i[16]=r=>ae(W)?W.value=r:null),onKeyup:i[17]||(i[17]=me(r=>$e(l(W)),["enter"])),class:"w-12 px-2 py-1 mx-1 rounded bg-white/5 border border-white/10 text-white text-center text-sm"},null,40,rr),[[ve,l(W),void 0,{number:!0}]]),i[42]||(i[42]=V(" 頁 ",-1))])])):C("",!0),l(J).length>0?(t(),s("div",dr,[U(To,{"selected-count":l(te).size,"bulk-loading":l(Me),"bulk-progress":l(be),onClear:lt,onCompare:i[18]||(i[18]=r=>H.value="compare"),onExport:at,onBulkInvite:nt},null,8,["selected-count","bulk-loading","bulk-progress"]),e("div",cr,[(t(!0),s(B,null,z(l(We),r=>(t(),Q(ko,{key:r.id,teacher:r,selected:l(te).has(r.id),"show-checkbox":r.is_open_to_hiring,"invite-loading":l(Se).has(r.id),"invitation-status":l(ue).get(r.id)||null,"onUpdate:selected":I=>st(r.id,I),onInvite:ot,onView:mt,onCompare:ht},null,8,["teacher","selected","show-checkbox","invite-loading","invitation-status","onUpdate:selected"]))),128))])])):l(Be)?(t(),s("div",ur,[i[43]||(i[43]=e("svg",{class:"w-16 h-16 mx-auto mb-4 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),i[44]||(i[44]=e("p",null,"沒有找到符合條件的人才",-1)),e("button",{onClick:vt,class:"mt-4 px-4 py-2 rounded-lg bg-white/5 text-slate-400 hover:bg-white/10 transition-colors"}," 清除搜尋條件 ")])):C("",!0)])]),l(L).show.value?(t(),Q(_,{key:0,onClose:i[19]||(i[19]=r=>l(L).close())})):C("",!0)],64)}}});export{fr as default};
