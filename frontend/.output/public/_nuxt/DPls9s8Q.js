import{g as q,k as J,r as _,D as lt,l as X,c as d,a as t,x as V,t as b,n as e,y as z,z as F,H as tt,F as I,v as L,d as H,p as M,K,A as st,B as U,o as i,q as N,s as B,G as R,j as ot,L as Y,P as nt,O as G,m as W}from"./ZcPQy5tI.js";import{a as O,c as at,b as et}from"./DaFB5xze.js";import{S as Q}from"./DUI3GfdC.js";import{u as Z,_ as it}from"./Cv6fucyu.js";import{f as rt}from"./DCA5C7h4.js";import{_ as dt}from"./CjGf6EYd.js";import{u as ut}from"./C0b8RNVV.js";import{u as ct}from"./DgepazF8.js";import"./C0JfvJ3S.js";const mt={class:"flex items-center justify-between p-4 border-b border-white/10 sticky top-0 bg-slate-900/95 backdrop-blur-sm z-10"},pt={class:"text-center pt-2"},xt={class:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center mx-auto mb-3"},ft={class:"text-3xl sm:text-4xl font-bold text-white"},vt={class:"grid grid-cols-2 gap-3"},bt=["disabled"],gt=["value"],ht=["disabled"],kt=["value"],wt={class:"space-y-3"},yt={class:"flex items-center gap-3"},_t={class:"flex items-center gap-3"},$t={class:"flex items-center gap-3"},Ct={class:"flex items-center gap-3"},Mt={class:"flex flex-wrap gap-2 mb-2"},jt=["onClick"],St={class:"relative"},Vt=["onKeydown","disabled"],Bt={key:0,class:"absolute z-10 w-full mt-1 bg-slate-800 border border-white/10 rounded-lg shadow-lg max-h-40 overflow-y-auto"},Tt=["onClick"],zt={class:"text-xs text-slate-500"},Et={class:"flex gap-3 pt-2"},It=["disabled"],At=q({__name:"ProfileModal",emits:["close"],setup(S,{emit:E}){const w=E,h=J(),C=_(!1),f=_(""),k=_([]);let $=null;const v=a=>{if(!a)return{instagram:"",youtube:"",website:"",other:""};if(typeof a=="string")try{return JSON.parse(a)}catch{return{instagram:"",youtube:"",website:"",other:""}}return{instagram:a.instagram||"",youtube:a.youtube||"",website:a.website||"",other:a.other||""}},x=a=>{if(!a)return"";if(typeof a=="string")return a;if(typeof a=="object"){if(a.hashtag&&typeof a.hashtag=="object")return a.hashtag.name||"";if(a.name)return a.name}return""},r=_({name:h.user?.name||"",email:h.user?.email||"",bio:h.user?.bio||"",city:h.user?.city||"",district:h.user?.district||"",public_contact_info:v(h.user?.public_contact_info),personal_hashtags:(h.user?.personal_hashtags||[]).map(a=>x(a)).filter(a=>a)}),D=_([]),g=_(!1),T=N(()=>D.value.map(a=>a.name)),o=N(()=>D.value.find(s=>s.name===r.value.city)?.districts.map(s=>s.name)||[]),c=async()=>{try{g.value=!0;const s=await U().get("/geo/cities");s.code===0&&s.datas&&(D.value=s.datas)}catch(a){console.error("Failed to fetch cities:",a),D.value=[]}finally{g.value=!1}},n=N(()=>r.value.name.trim()!==""&&r.value.email.trim()!==""&&r.value.personal_hashtags.length<=5);lt(()=>r.value.city,()=>{r.value.district=""});const A=()=>{let a=f.value.trim();if(a&&(a=a.replace(/^#+/,""),!(a.length<2))){if(r.value.personal_hashtags.includes(a)){f.value="",k.value=[];return}r.value.personal_hashtags.length<5&&r.value.personal_hashtags.push(a),f.value="",k.value=[]}},j=a=>{r.value.personal_hashtags.splice(a,1)},y=()=>{f.value===""&&r.value.personal_hashtags.length>0&&r.value.personal_hashtags.pop()},p=()=>{$&&clearTimeout($);const a=f.value.replace(/^#+/,"").trim();if(a.length<1){k.value=[];return}$=setTimeout(async()=>{try{const m=await U().get("/hashtags/search",{q:a});k.value=m.datas||[]}catch{k.value=[]}},300)},l=a=>{const s=a.name;!r.value.personal_hashtags.includes(s)&&r.value.personal_hashtags.length<5&&r.value.personal_hashtags.push(s),f.value="",k.value=[]},u=async()=>{if(!n.value){await O("請填寫完整資訊");return}C.value=!0;try{await U().put("/teacher/me/profile",{name:r.value.name,email:r.value.email,bio:r.value.bio,city:r.value.city,district:r.value.district,public_contact_info:JSON.stringify(r.value.public_contact_info),personal_hashtags:r.value.personal_hashtags});const s={...h.user,name:r.value.name,email:r.value.email,bio:r.value.bio,city:r.value.city,district:r.value.district,public_contact_info:JSON.stringify(r.value.public_contact_info),personal_hashtags:r.value.personal_hashtags};h.user=s,localStorage.setItem("teacher_user",JSON.stringify(s)),w("close")}catch(a){console.error("Failed to update profile:",a),await O("儲存失敗，請稍後再試")}finally{C.value=!1}};return X(()=>{c()}),(a,s)=>(i(),d("div",{class:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:s[13]||(s[13]=V(m=>w("close"),["self"]))},[t("div",{class:"glass-card w-full max-w-lg max-h-[90vh] overflow-y-auto animate-spring",onClick:s[12]||(s[12]=V(()=>{},["stop"]))},[t("div",mt,[s[15]||(s[15]=t("h3",{class:"text-lg font-semibold text-slate-100"}," 編輯個人檔案 ",-1)),t("button",{onClick:s[0]||(s[0]=m=>w("close")),class:"p-2 rounded-lg hover:bg-white/10 transition-colors"},[...s[14]||(s[14]=[t("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("form",{onSubmit:V(u,["prevent"]),class:"p-4 space-y-4"},[t("div",pt,[t("div",xt,[t("span",ft,b(e(r).name?.charAt(0)||"T"),1)]),s[16]||(s[16]=t("p",{class:"text-xs sm:text-sm text-slate-400"},"點擊頭像更換照片",-1))]),t("div",null,[s[17]||(s[17]=t("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},"姓名",-1)),z(t("input",{"onUpdate:modelValue":s[1]||(s[1]=m=>e(r).name=m),type:"text",class:"input-field text-sm sm:text-base",required:""},null,512),[[F,e(r).name]])]),t("div",null,[s[18]||(s[18]=t("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},"Email",-1)),z(t("input",{"onUpdate:modelValue":s[2]||(s[2]=m=>e(r).email=m),type:"email",class:"input-field text-sm sm:text-base",required:""},null,512),[[F,e(r).email]])]),t("div",null,[s[19]||(s[19]=t("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},"Bio",-1)),z(t("textarea",{"onUpdate:modelValue":s[3]||(s[3]=m=>e(r).bio=m),placeholder:"簡短介紹自己...",rows:"3",class:"input-field resize-none text-sm sm:text-base"},null,512),[[F,e(r).bio]])]),t("div",vt,[t("div",null,[s[21]||(s[21]=t("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},"縣市",-1)),z(t("select",{"onUpdate:modelValue":s[4]||(s[4]=m=>e(r).city=m),class:"input-field text-sm sm:text-base",disabled:e(g)},[s[20]||(s[20]=t("option",{value:""},"請選擇",-1)),(i(!0),d(I,null,L(e(T),m=>(i(),d("option",{key:m,value:m},b(m),9,gt))),128))],8,bt),[[tt,e(r).city]])]),t("div",null,[s[23]||(s[23]=t("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},"區域",-1)),z(t("select",{"onUpdate:modelValue":s[5]||(s[5]=m=>e(r).district=m),class:"input-field text-sm sm:text-base",disabled:e(g)||!e(r).city},[s[22]||(s[22]=t("option",{value:""},"請選擇",-1)),(i(!0),d(I,null,L(e(o),m=>(i(),d("option",{key:m,value:m},b(m),9,kt))),128))],8,ht),[[tt,e(r).district]])])]),t("div",null,[s[28]||(s[28]=t("label",{class:"block text-slate-300 mb-3 font-medium text-sm sm:text-base"},"專業連結",-1)),t("div",wt,[t("div",yt,[s[24]||(s[24]=t("div",{class:"flex-shrink-0 w-10 h-10 rounded-xl bg-pink-500/20 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-pink-500",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})])],-1)),z(t("input",{"onUpdate:modelValue":s[6]||(s[6]=m=>e(r).public_contact_info.instagram=m),type:"text",placeholder:"Instagram 帳號",class:"input-field text-sm sm:text-base flex-1"},null,512),[[F,e(r).public_contact_info.instagram]])]),t("div",_t,[s[25]||(s[25]=t("div",{class:"flex-shrink-0 w-10 h-10 rounded-xl bg-red-500/20 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})])],-1)),z(t("input",{"onUpdate:modelValue":s[7]||(s[7]=m=>e(r).public_contact_info.youtube=m),type:"text",placeholder:"YouTube 頻道",class:"input-field text-sm sm:text-base flex-1"},null,512),[[F,e(r).public_contact_info.youtube]])]),t("div",$t,[s[26]||(s[26]=t("div",{class:"flex-shrink-0 w-10 h-10 rounded-xl bg-primary-500/20 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})])],-1)),z(t("input",{"onUpdate:modelValue":s[8]||(s[8]=m=>e(r).public_contact_info.website=m),type:"text",placeholder:"個人網站",class:"input-field text-sm sm:text-base flex-1"},null,512),[[F,e(r).public_contact_info.website]])]),t("div",Ct,[s[27]||(s[27]=t("div",{class:"flex-shrink-0 w-10 h-10 rounded-xl bg-slate-500/20 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})])],-1)),z(t("input",{"onUpdate:modelValue":s[9]||(s[9]=m=>e(r).public_contact_info.other=m),type:"text",placeholder:"其他連結",class:"input-field text-sm sm:text-base flex-1"},null,512),[[F,e(r).public_contact_info.other]])])])]),t("div",null,[s[30]||(s[30]=t("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},[H(" 個人品牌標籤 "),t("span",{class:"text-xs text-slate-500 font-normal ml-2"},"(3-5 個標籤)")],-1)),t("div",Mt,[(i(!0),d(I,null,L(e(r).personal_hashtags,(m,P)=>(i(),d("span",{key:P,class:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm bg-primary-500/20 text-primary-400"},[H(b(m.startsWith("#")?m:"#"+m)+" ",1),t("button",{type:"button",onClick:Ds=>j(P),class:"hover:text-primary-300"},[...s[29]||(s[29]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,jt)]))),128))]),t("div",St,[z(t("input",{"onUpdate:modelValue":s[10]||(s[10]=m=>st(f)?f.value=m:null),onKeydown:[K(V(A,["prevent"]),["enter"]),K(V(A,["prevent"]),["comma"]),K(y,["backspace"])],onInput:p,type:"text",placeholder:"輸入標籤後按 Enter...",class:"input-field text-sm sm:text-base w-full",disabled:e(r).personal_hashtags.length>=5},null,40,Vt),[[F,e(f)]]),e(k).length>0?(i(),d("div",Bt,[(i(!0),d(I,null,L(e(k),m=>(i(),d("button",{key:m.id,type:"button",onClick:P=>l(m),class:"w-full px-3 py-2 text-left text-sm text-slate-300 hover:bg-white/5 flex items-center justify-between"},[t("span",null,b(m.name.startsWith("#")?m.name:"#"+m.name),1),t("span",zt,b(m.usage_count)+" 次使用",1)],8,Tt))),128))])):M("",!0)])]),t("div",Et,[t("button",{type:"button",onClick:s[11]||(s[11]=m=>w("close")),class:"flex-1 glass-btn py-2.5 sm:py-3 rounded-xl font-medium text-sm sm:text-base"}," 取消 "),t("button",{type:"submit",disabled:e(C)||!e(n),class:"flex-1 btn-primary py-2.5 sm:py-3 rounded-xl font-medium text-sm sm:text-base"},b(e(C)?"儲存中...":"儲存"),9,It)])],32)])]))}}),Lt={class:"flex items-center justify-between p-4 border-b border-white/10 sticky top-0 bg-slate-900/95 backdrop-blur-sm z-10"},Dt={class:"p-4 space-y-6"},Ft={class:"flex items-center justify-between mb-2"},Nt=["disabled"],Ht={class:"flex gap-3"},Ut=["disabled"],Pt=q({__name:"HiringModal",emits:["close"],setup(S,{emit:E}){const w=E,h=J(),C=_(!1),f=_({is_open_to_hiring:!1,public_contact_info:""}),k=async()=>{try{const x=await U().get("/teacher/me/profile");x.datas&&(f.value.is_open_to_hiring=x.datas.is_open_to_hiring||!1,f.value.public_contact_info=x.datas.public_contact_info||"")}catch(v){console.error("Failed to load hiring settings:",v)}},$=async()=>{C.value=!0;try{await U().put("/teacher/me/profile",f.value),h.user={...h.user,...f.value},localStorage.setItem("teacher_user",JSON.stringify(h.user)),w("close")}catch(v){console.error("Failed to update hiring settings:",v),await O("儲存失敗，請稍後再試")}finally{C.value=!1}};return X(()=>{k()}),(v,x)=>(i(),d("div",{class:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:x[5]||(x[5]=V(r=>w("close"),["self"]))},[t("div",{class:"glass-card w-full max-w-lg max-h-[90vh] overflow-y-auto animate-spring",onClick:x[4]||(x[4]=V(()=>{},["stop"]))},[t("div",Lt,[x[7]||(x[7]=t("h3",{class:"text-lg font-semibold text-slate-100"}," 求職設定 ",-1)),t("button",{onClick:x[0]||(x[0]=r=>w("close")),class:"p-2 rounded-lg hover:bg-white/10 transition-colors"},[...x[6]||(x[6]=[t("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",Dt,[t("div",null,[t("div",Ft,[x[8]||(x[8]=t("label",{class:"text-slate-300 font-medium"},"開放中心搜尋我的檔案",-1)),t("button",{onClick:x[1]||(x[1]=r=>e(f).is_open_to_hiring=!e(f).is_open_to_hiring),class:B(["relative w-14 h-7 rounded-full transition-colors duration-300",e(f).is_open_to_hiring?"bg-success-500":"bg-slate-700"])},[t("span",{class:B(["absolute top-1 left-1 w-5 h-5 rounded-full bg-white transition-transform duration-300",{"translate-x-7":e(f).is_open_to_hiring}])},null,2)],2)]),x[9]||(x[9]=t("p",{class:"text-sm text-slate-400"}," 開啟後，中心可以透過智慧媒合系統找到您 ",-1))]),t("div",null,[x[10]||(x[10]=t("label",{class:"block text-slate-300 mb-2 font-medium"}," 公開聯繫方式 ",-1)),z(t("textarea",{"onUpdate:modelValue":x[2]||(x[2]=r=>e(f).public_contact_info=r),placeholder:"例：LINE ID: @yourline 或 電話: 0912345678",rows:"3",disabled:!e(f).is_open_to_hiring,class:B(["input-field resize-none",{"opacity-50":!e(f).is_open_to_hiring}])},null,10,Nt),[[F,e(f).public_contact_info]]),x[11]||(x[11]=t("p",{class:"text-xs text-slate-500 mt-2"}," 此資訊僅在您開啟求職時，對媒合您的中心可見 ",-1))]),x[12]||(x[12]=t("div",{class:"flex items-start gap-3 p-4 rounded-xl bg-primary-500/10 border border-primary-500/30"},[t("svg",{class:"w-5 h-5 text-primary-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 9h.01"})]),t("p",{class:"text-sm text-slate-400"}," 開啟求職後，您的技能與證照將自動對媒合中心可見（唯讀）。您可以隨時關閉此設定。 ")],-1)),t("div",Ht,[t("button",{onClick:x[3]||(x[3]=r=>w("close")),class:"flex-1 glass-btn py-3 rounded-xl font-medium"}," 取消 "),t("button",{onClick:$,disabled:e(C),class:"flex-1 btn-primary"},b(e(C)?"儲存中...":"儲存"),9,Ut)])])])]))}}),Rt={class:"flex items-center justify-between p-4 border-b border-white/10 sticky top-0 bg-slate-900/95 backdrop-blur-sm z-10"},Ot={class:"text-lg font-semibold text-slate-100"},qt=["value"],Wt={key:0,class:"mt-2 p-2 rounded-lg bg-warning-500/20 border border-warning-500/30 flex items-center gap-2"},Kt={class:"flex flex-wrap gap-2 mb-2"},Gt=["onClick"],Jt={class:"relative"},Qt=["onKeydown","disabled"],Yt={key:0,class:"absolute z-10 w-full mt-1 bg-slate-800 border border-white/10 rounded-lg shadow-lg max-h-40 overflow-y-auto"},Xt=["onClick"],Zt={class:"text-xs text-slate-500"},te={class:"flex gap-3 pt-2"},ee=["disabled"],se=q({__name:"AddSkillModal",props:{skill:{},existingSkills:{}},emits:["close","added","updated"],setup(S,{emit:E}){const w=S,h=E,C=Z(),f=_(!1),k=_(""),$=_([]);let v=null;const x=N(()=>!!w.skill),r=Object.entries(Q).map(([l,u])=>({value:l,...u})),D=l=>{if(!l)return"";if(typeof l=="string")return l;if(typeof l=="object"){if(l.hashtag&&typeof l.hashtag=="object"&&l.hashtag.name)return l.hashtag.name;if(l.name)return l.name}return""},g=_({category:w.skill?.category||"",skill_name:w.skill?.skill_name||"",hashtags:(w.skill?.hashtags||[]).map(l=>D(l)).filter(Boolean).slice(0,3)}),T=N(()=>{if(!g.value.skill_name||!w.existingSkills)return!1;const l=g.value.skill_name.toLowerCase().trim();return w.existingSkills.some(u=>x.value&&u.id===w.skill.id?!1:u.skill_name.toLowerCase().trim()===l)}),o=()=>{},c=()=>{let l=k.value.trim();if(l&&(l=l.replace(/^#+/,""),!(l.length<2))){if(g.value.hashtags.includes(l)){k.value="",$.value=[];return}g.value.hashtags.length<5&&g.value.hashtags.push(l),k.value="",$.value=[]}},n=l=>{g.value.hashtags.splice(l,1)},A=()=>{k.value===""&&g.value.hashtags.length>0&&g.value.hashtags.pop()},j=()=>{v&&clearTimeout(v);const l=k.value.replace(/^#+/,"").trim();if(l.length<1){$.value=[];return}v=setTimeout(async()=>{try{const a=await U().get("/hashtags/search",{q:l});$.value=a.datas||[]}catch{$.value=[]}},300)},y=l=>{const u=l.name;!g.value.hashtags.includes(u)&&g.value.hashtags.length<5&&g.value.hashtags.push(u),k.value="",$.value=[]},p=async()=>{if(!(T.value||!g.value.category||!g.value.skill_name)){f.value=!0;try{if(x.value)await C.updateSkill(w.skill.id,{category:g.value.category,skill_name:g.value.skill_name,hashtags:g.value.hashtags}),h("updated");else{const l=[];for(const u of g.value.hashtags)try{const a=U(),m=(await a.get("/hashtags/search",{q:u})).datas?.find(P=>P.name===u||P.name==="#"+u);if(m)l.push(m.id);else{const P=await a.post("/hashtags",{name:"#"+u});P.datas?.id&&l.push(P.datas.id)}}catch(a){console.error("Failed to process hashtag:",u,a)}await C.createSkill({category:g.value.category,skill_name:g.value.skill_name,hashtag_ids:l}),h("added")}h("close")}catch(l){console.error("Failed to save skill:",l),await O(l?.message||"儲存失敗，請稍後再試")}finally{f.value=!1}}};return(l,u)=>(i(),d("div",{class:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:u[6]||(u[6]=V(a=>h("close"),["self"]))},[t("div",{class:"glass-card w-full max-w-md sm:max-w-lg max-h-[90vh] overflow-y-auto animate-spring",onClick:u[5]||(u[5]=V(()=>{},["stop"]))},[t("div",Rt,[t("h3",Ot,b(e(x)?"編輯技能":"新增技能"),1),t("button",{onClick:u[0]||(u[0]=a=>h("close")),class:"p-2 rounded-lg hover:bg-white/10 transition-colors"},[...u[7]||(u[7]=[t("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("form",{onSubmit:V(p,["prevent"]),class:"p-4 space-y-4"},[t("div",null,[u[9]||(u[9]=t("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},"技能類別",-1)),z(t("select",{"onUpdate:modelValue":u[1]||(u[1]=a=>e(g).category=a),class:"input-field text-sm sm:text-base",required:""},[u[8]||(u[8]=t("option",{value:""},"請選擇類別",-1)),(i(!0),d(I,null,L(e(r),a=>(i(),d("option",{key:a.value,value:a.value},b(a.icon)+" "+b(a.label),9,qt))),128))],512),[[tt,e(g).category]])]),t("div",null,[u[11]||(u[11]=t("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},"技能名稱",-1)),z(t("input",{"onUpdate:modelValue":u[2]||(u[2]=a=>e(g).skill_name=a),onInput:o,type:"text",placeholder:"例：鋼琴、小提琴、吉他...",class:"input-field text-sm sm:text-base",required:""},null,544),[[F,e(g).skill_name]]),e(T)?(i(),d("div",Wt,[...u[10]||(u[10]=[t("svg",{class:"w-4 h-4 text-warning-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1),t("span",{class:"text-sm text-warning-500"},"此技能已存在",-1)])])):M("",!0)]),t("div",null,[u[13]||(u[13]=t("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},[H(" 技能標籤 "),t("span",{class:"text-xs text-slate-500 font-normal ml-2"},"(選填，最多 3 個)")],-1)),t("div",Kt,[(i(!0),d(I,null,L(e(g).hashtags,(a,s)=>(i(),d("span",{key:s,class:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs bg-primary-500/20 text-primary-400"},[H(b(a.startsWith("#")?a:"#"+a)+" ",1),t("button",{type:"button",onClick:m=>n(s),class:"hover:text-primary-300"},[...u[12]||(u[12]=[t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Gt)]))),128))]),t("div",Jt,[z(t("input",{"onUpdate:modelValue":u[3]||(u[3]=a=>st(k)?k.value=a:null),onKeydown:[K(V(c,["prevent"]),["enter"]),K(V(c,["prevent"]),["comma"]),K(A,["backspace"])],onInput:j,type:"text",placeholder:"輸入標籤後按 Enter...",class:"input-field text-sm sm:text-base w-full",disabled:e(g).hashtags.length>=5},null,40,Qt),[[F,e(k)]]),e($).length>0?(i(),d("div",Yt,[(i(!0),d(I,null,L(e($),a=>(i(),d("button",{key:a.id,type:"button",onClick:s=>y(a),class:"w-full px-3 py-2 text-left text-sm text-slate-300 hover:bg-white/5 flex items-center justify-between"},[t("span",null,b(a.name.startsWith("#")?a.name:"#"+a.name),1),t("span",Zt,b(a.usage_count)+" 次使用",1)],8,Xt))),128))])):M("",!0)])]),t("div",te,[t("button",{type:"button",onClick:u[4]||(u[4]=a=>h("close")),class:"flex-1 glass-btn py-2.5 sm:py-3 rounded-xl font-medium text-sm sm:text-base"}," 取消 "),t("button",{type:"submit",disabled:e(f)||e(T)||!e(g).category||!e(g).skill_name,class:"flex-1 btn-primary py-2.5 sm:py-3 rounded-xl font-medium text-sm sm:text-base"},b(e(f)?e(x)?"儲存中...":"新增中...":e(x)?"儲存":"新增"),9,ee)])],32)])]))}}),le={class:"flex items-center justify-between p-4 border-b border-white/10 sticky top-0 bg-slate-900/95 backdrop-blur-sm z-10"},oe={key:0,class:"w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-3 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ne={key:1,class:"text-slate-400 text-sm sm:text-base"},ae={key:2,class:"text-slate-100 text-sm sm:text-base"},ie={class:"flex gap-3 pt-2"},re=["disabled"],de=q({__name:"AddCertificateModal",emits:["close","added"],setup(S,{emit:E}){const w=E,h=Z(),C=U(),f=_(!1),k=_(!1),$=_(),v=_(""),x=_(null),r=_({name:"",issued_at:""}),D=c=>{if(!c)return"";const n=new Date(c);return rt(n)},g=()=>{$.value?.click()},T=c=>{const n=c.target;n.files&&n.files.length>0&&(x.value=n.files[0],v.value=n.files[0].name)},o=async()=>{if(!r.value.name){await O("請輸入證照名稱");return}f.value=!0,k.value=!0;try{let c;if(x.value){const n=await C.upload("/teacher/me/certificates/upload",x.value);if(n.code===0)c=n.datas.file_url;else throw new Error(n.message||"上傳失敗")}await h.createCertificate({name:r.value.name,file_url:c,issued_at:D(r.value.issued_at)}),await h.fetchCertificates(),await at("證照新增成功"),w("added"),w("close")}catch(c){console.error("Failed to add certificate:",c),await O(c.message||"新增失敗，請稍後再試")}finally{f.value=!1,k.value=!1}};return(c,n)=>(i(),d("div",{class:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:n[5]||(n[5]=V(A=>w("close"),["self"]))},[t("div",{class:"glass-card w-full max-w-md sm:max-w-lg max-h-[90vh] overflow-y-auto animate-spring",onClick:n[4]||(n[4]=V(()=>{},["stop"]))},[t("div",le,[n[7]||(n[7]=t("h3",{class:"text-lg font-semibold text-slate-100"}," 新增證照 ",-1)),t("button",{onClick:n[0]||(n[0]=A=>w("close")),class:"p-2 rounded-lg hover:bg-white/10 transition-colors"},[...n[6]||(n[6]=[t("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("form",{onSubmit:V(o,["prevent"]),class:"p-4 space-y-4"},[t("div",null,[n[8]||(n[8]=t("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},"證照名稱",-1)),z(t("input",{"onUpdate:modelValue":n[1]||(n[1]=A=>e(r).name=A),type:"text",placeholder:"例：ABRSM Grade 8",class:"input-field text-sm sm:text-base",required:""},null,512),[[F,e(r).name]])]),t("div",null,[n[9]||(n[9]=t("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},"發證日期",-1)),z(t("input",{"onUpdate:modelValue":n[2]||(n[2]=A=>e(r).issued_at=A),type:"datetime-local",class:"input-field text-sm sm:text-base"},null,512),[[F,e(r).issued_at]])]),t("div",null,[n[11]||(n[11]=t("label",{class:"block text-slate-300 mb-2 font-medium text-sm sm:text-base"},"上傳證照檔案",-1)),t("div",{class:"border-2 border-dashed border-slate-700 rounded-xl p-6 sm:p-8 text-center hover:border-primary-500 transition-colors cursor-pointer",onClick:g},[t("input",{ref_key:"fileInput",ref:$,type:"file",accept:".pdf,.jpg,.jpeg,.png",class:"hidden",onChange:T},null,544),e(v)?M("",!0):(i(),d("svg",oe,[...n[10]||(n[10]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"},null,-1)])])),e(v)?(i(),d("p",ae,b(e(v)),1)):(i(),d("p",ne,"點擊或拖曳檔案至此"))])]),t("div",ie,[t("button",{type:"button",onClick:n[3]||(n[3]=A=>w("close")),class:"flex-1 glass-btn py-2.5 sm:py-3 rounded-xl font-medium text-sm sm:text-base"}," 取消 "),t("button",{type:"submit",disabled:e(f)||e(k),class:"flex-1 btn-primary py-2.5 sm:py-3 rounded-xl font-medium text-sm sm:text-base"},b(e(k)?"上傳中...":e(f)?"儲存中...":"新增"),9,re)])],32)])]))}}),ue={class:"flex items-center justify-between p-4 border-b border-white/10 sticky top-0 bg-slate-900/95 backdrop-blur-sm z-10"},ce={class:"p-4 flex-1 overflow-y-auto space-y-6"},me={key:0,class:"text-center py-8 text-slate-500"},pe={key:1,class:"grid gap-2"},xe=["onClick"],fe={class:"flex items-center justify-between"},ve={class:"flex items-center gap-3"},be={class:"font-medium text-slate-100 text-sm sm:text-base"},ge={key:0,class:"text-xs text-slate-500 mt-1"},he={class:"flex items-center gap-2"},ke=["onClick"],we={class:"flex items-center justify-between mb-3"},ye={key:0,class:"text-center py-8 text-slate-500"},_e={key:1,class:"grid grid-cols-2 gap-3"},$e=["onClick"],Ce=["src","alt"],Me={class:"flex items-start justify-between"},je={class:"min-w-0 flex-1"},Se={class:"font-medium text-slate-100 text-sm truncate"},Ve={key:0,class:"text-xs text-slate-400 truncate"},Be={key:1,class:"text-xs text-slate-500 mt-1"},Te=["onClick"],ze=["src","alt"],Ee={class:"mt-4 text-center"},Ie={class:"text-lg font-semibold text-white"},Ae={key:0,class:"text-sm text-slate-400 mt-1"},Le={key:1,class:"text-sm text-slate-500"},De=q({__name:"SkillsModal",emits:["close"],setup(S,{emit:E}){const w=E;J();const h=_([]),C=_([]),f=_(!1),k=_(!1),$=_(null),v=_(null),x=p=>Q[p]?.label||p,r=p=>Q[p]?.icon||"✨",D=p=>Q[p]?.color||"bg-slate-500/20 text-slate-400 border-slate-500/30",g=async()=>{try{const p=U(),[l,u]=await Promise.all([p.get("/teacher/me/skills"),p.get("/teacher/me/certificates")]);h.value=(l.datas||[]).map(a=>({...a,hashtags:(a.hashtags||[]).map(s=>typeof s=="string"?s:s.hashtag&&typeof s.hashtag=="object"?s.hashtag.name||"":s.name?s.name:"").filter(s=>typeof s=="string"&&s.length>0)})),C.value=u.datas||[]}catch(p){console.error("Failed to fetch skills and certificates:",p)}},T=()=>{$.value=null,f.value=!0},o=p=>{$.value=p,f.value=!0},c=()=>{f.value=!1,$.value=null},n=p=>{v.value=p},A=async p=>{if(await et("確定要刪除此技能？"))try{await U().delete(`/teacher/me/skills/${p}`),await g()}catch(l){console.error("Failed to delete skill:",l),await O("刪除失敗")}},j=async p=>{if(await et("確定要刪除此證照？"))try{await U().delete(`/teacher/me/certificates/${p}`),await g()}catch(l){console.error("Failed to delete certificate:",l),await O("刪除失敗")}},y=p=>new Date(p).toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric"});return X(()=>{g()}),(p,l)=>{const u=se,a=de;return i(),d("div",{class:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:l[8]||(l[8]=V(s=>w("close"),["self"]))},[t("div",{class:"glass-card w-full max-w-lg sm:max-w-xl max-h-[90vh] overflow-visible flex flex-col animate-spring",onClick:l[7]||(l[7]=V(()=>{},["stop"]))},[t("div",ue,[l[10]||(l[10]=t("h3",{class:"text-lg font-semibold text-slate-100"}," 技能與證照 ",-1)),t("button",{onClick:l[0]||(l[0]=s=>w("close")),class:"p-2 rounded-lg hover:bg-white/10 transition-colors"},[...l[9]||(l[9]=[t("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",ce,[t("div",null,[t("div",{class:"flex items-center justify-between mb-3"},[l[12]||(l[12]=t("h4",{class:"font-medium text-slate-100 text-base sm:text-lg"},"技能",-1)),t("button",{onClick:T,class:"text-sm text-primary-500 hover:text-primary-400 font-medium flex items-center gap-1"},[...l[11]||(l[11]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),H(" 新增技能 ",-1)])])]),e(h).length===0?(i(),d("div",me,[...l[13]||(l[13]=[t("svg",{class:"w-12 h-12 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})],-1),H(" 尚未添加技能 ",-1)])])):(i(),d("div",pe,[(i(!0),d(I,null,L(e(h),s=>(i(),d("div",{key:s.id,class:"glass p-3 rounded-xl hover:bg-white/5 transition-colors cursor-pointer group",onClick:m=>o(s)},[t("div",fe,[t("div",ve,[t("span",{class:B(["px-2 py-1 rounded-lg text-xs font-medium border",D(s.category)])},b(r(s.category))+" "+b(x(s.category)),3),t("div",null,[t("h5",be,b(s.skill_name),1),s.hashtags&&s.hashtags.length>0?(i(),d("p",ge,b(s.hashtags.filter(m=>m&&typeof m=="string").map(m=>m.startsWith("#")?m:"#"+m).join(" ")),1)):M("",!0)])]),t("div",he,[l[15]||(l[15]=t("span",{class:"text-xs text-slate-600 group-hover:text-slate-400 transition-colors"}," 點擊編輯 ",-1)),t("button",{onClick:V(m=>A(s.id),["stop"]),class:"p-2 rounded-lg hover:bg-critical-500/20 text-critical-500 transition-colors opacity-60 hover:opacity-100"},[...l[14]||(l[14]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ke)])])],8,xe))),128))]))]),t("div",null,[t("div",we,[l[17]||(l[17]=t("h4",{class:"font-medium text-slate-100 text-base sm:text-lg"},"證照",-1)),t("button",{onClick:l[1]||(l[1]=s=>k.value=!0),class:"text-sm text-primary-500 hover:text-primary-400 font-medium flex items-center gap-1"},[...l[16]||(l[16]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),H(" 新增證照 ",-1)])])]),e(C).length===0?(i(),d("div",ye,[...l[18]||(l[18]=[t("svg",{class:"w-12 h-12 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})],-1),H(" 尚未添加證照 ",-1)])])):(i(),d("div",_e,[(i(!0),d(I,null,L(e(C),s=>(i(),d("div",{key:s.id,class:"glass p-3 rounded-xl"},[s.file_url?(i(),d("div",{key:0,class:"aspect-video rounded-lg bg-slate-800 mb-2 overflow-hidden cursor-pointer hover:ring-2 ring-primary-500 transition-all",onClick:m=>n(s)},[t("img",{src:s.file_url,alt:s.certificate_name,class:"w-full h-full object-cover",onError:l[2]||(l[2]=m=>m.target.style.display="none")},null,40,Ce)],8,$e)):M("",!0),t("div",Me,[t("div",je,[t("h5",Se,b(s.certificate_name),1),s.issued_by?(i(),d("p",Ve,b(s.issued_by),1)):M("",!0),s.issued_date?(i(),d("p",Be,b(y(s.issued_date)),1)):M("",!0)]),t("button",{onClick:m=>j(s.id),class:"p-1.5 rounded-lg hover:bg-critical-500/20 text-critical-500 transition-colors ml-2 flex-shrink-0"},[...l[19]||(l[19]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Te)])]))),128))]))])]),e(f)||e($)?(i(),R(u,{key:0,skill:e($),"existing-skills":e(h),onClose:c,onAdded:g,onUpdated:g},null,8,["skill","existing-skills"])):M("",!0),e(k)?(i(),R(a,{key:1,onClose:l[3]||(l[3]=s=>k.value=!1),onAdded:g})):M("",!0),e(v)?(i(),d("div",{key:2,class:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:l[6]||(l[6]=s=>v.value=null)},[t("div",{class:"relative max-w-3xl w-full",onClick:l[5]||(l[5]=V(()=>{},["stop"]))},[t("button",{onClick:l[4]||(l[4]=s=>v.value=null),class:"absolute -top-10 right-0 text-white hover:text-primary-400 transition-colors"},[...l[20]||(l[20]=[t("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),e(v).file_url?(i(),d("img",{key:0,src:e(v).file_url,alt:e(v).certificate_name,class:"w-full h-auto rounded-lg shadow-2xl"},null,8,ze)):M("",!0),t("div",Ee,[t("h4",Ie,b(e(v).certificate_name),1),e(v).issued_by?(i(),d("p",Ae," 發證機構："+b(e(v).issued_by),1)):M("",!0),e(v).issued_date?(i(),d("p",Le," 發證日期："+b(y(e(v).issued_date)),1)):M("",!0)])])])):M("",!0)])])}}}),Fe={class:"flex items-center justify-between p-4 border-b border-white/10 sticky top-0 bg-slate-900/95 backdrop-blur-sm z-10"},Ne={class:"flex gap-2"},He={class:"flex-1 overflow-auto p-6 flex justify-center"},Ue={class:"flex flex-wrap gap-1 justify-center"},Pe={class:"text-center mb-1.5"},Re={class:"text-white/60 text-xs"},Oe={class:"space-y-1"},qe={key:0,class:"text-white/90 text-xs mb-0.5"},We={key:0,class:"text-center text-white/50 text-xs py-1"},Ke={key:1,class:"text-center py-2 text-white/40 text-xs"},Ge={key:2,class:"space-y-3"},Je={class:"flex items-center justify-between mb-1"},Qe={class:"text-white/70 text-xs"},Ye={class:"space-y-1.5"},Xe={key:0,class:"text-white/90 text-xs mb-0.5"},Ze={key:0,class:"text-center py-2 text-white/50 text-xs"},ts=q({__name:"ExportPreviewModal",props:{theme:{},options:{},format:{},view:{}},emits:["close"],setup(S,{emit:E}){const w=ot(),h=S,C=E,f=J(),k=_(),$=Z(),v=N(()=>h.options.compactMode?h.view==="grid"?4:8:h.view==="grid"?3:5),x=N(()=>(h.options.showFullWeek?7:3)===7?"grid-cols-7":"grid-cols-3"),r=N(()=>({padding:h.options.compactMode?"p-4":"p-6"})),D=N(()=>({background:h.theme?.preview||"linear-gradient(135deg, #1e3a8a 0%, #6366F1 25%, #A855F7 50%, #1e3a8a 75%, #0f172a 100%)"})),g=j=>{const y=v.value;return j.length<=y?j:j.slice(0,y)},T=N(()=>{const j=h.options.showFullWeek?7:3;return $.schedule?.days?.slice(0,j)||[]}),o=j=>{const y=new Date(j),p=new Date;p.setHours(0,0,0,0);const l=Math.floor((y.getTime()-p.getTime())/(1e3*60*60*24));return l===0?"今天":l===1?"明天":y.toLocaleDateString("zh-TW",{month:"long",day:"numeric",weekday:"short"})},c=j=>new Date(j).toLocaleDateString("zh-TW",{month:"numeric",day:"numeric",weekday:"short"}),n=()=>{k.value&&nt(async()=>{const{default:j}=await import("./DXEQVQnt.js");return{default:j}},[],import.meta.url).then(({default:j})=>{j(k.value,{backgroundColor:null,scale:2}).then(y=>{const p=document.createElement("a");p.download=`timeledger-schedule-${Date.now()}.png`,p.href=y.toDataURL("image/png"),p.click()})})},A=async()=>{if(k.value&&(await n(),navigator.share))try{await navigator.share({title:"我的課表 - TimeLedger",text:"查看我的課表！"})}catch(j){console.log("Share failed:",j)}};return(j,y)=>(i(),d("div",{class:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:y[3]||(y[3]=V(p=>C("close"),["self"]))},[t("div",{class:"glass-card w-full max-w-2xl max-h-[90vh] overflow-hidden animate-spring flex flex-col",onClick:y[2]||(y[2]=V(()=>{},["stop"]))},[t("div",Fe,[y[8]||(y[8]=t("h3",{class:"text-lg font-semibold text-slate-100"}," 課表預覽 ",-1)),t("div",Ne,[t("button",{onClick:y[0]||(y[0]=p=>e(w).push("/teacher/export")),class:"px-4 py-2 rounded-lg glass-btn flex items-center gap-2"},[...y[4]||(y[4]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})],-1),H(" 全版面 ",-1)])]),t("button",{onClick:A,class:"px-4 py-2 rounded-lg glass-btn flex items-center gap-2"},[...y[5]||(y[5]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8"}),t("polyline",{points:"16 6 12 2 8 6"}),t("line",{x1:"12",y1:"2",x2:"12",y2:"15"})],-1),H(" 分享 ",-1)])]),t("button",{onClick:n,class:"px-4 py-2 rounded-lg glass-btn flex items-center gap-2"},[...y[6]||(y[6]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),H(" 下載 ",-1)])]),t("button",{onClick:y[1]||(y[1]=p=>C("close")),class:"p-2 rounded-lg hover:bg-white/10 transition-colors"},[...y[7]||(y[7]=[t("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),t("div",He,[t("div",{ref_key:"scheduleRef",ref:k,class:"rounded-3xl shadow-2xl",style:Y([e(D),e(r)])},[S.options.showPersonalInfo?(i(),d("div",{key:0,class:B(["text-center pb-4 border-b border-white/20",S.options.compactMode?"mb-3":"mb-6"])},[t("div",{class:B(["rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center mx-auto mb-2",S.options.compactMode?"w-12 h-12":"w-20 h-20"])},[t("span",{class:B([S.options.compactMode?"text-lg font-bold":"text-2xl font-bold","text-white"])},b(e(f).user?.name?.charAt(0)||"T"),3)],2),t("h2",{class:B([S.options.compactMode?"text-base font-bold":"text-xl font-bold","text-white mb-2"])},b(e(f).user?.name),3),t("div",Ue,[(i(),d(I,null,L(3,p=>t("span",{key:p,class:"px-2 py-0.5 rounded-full text-xs bg-white/20 text-white"}," #"+b(["鋼琴","古典","樂理"][p-1]),1)),64))])],2)):M("",!0),S.view==="grid"?(i(),d("div",{key:1,class:B(["grid gap-2",e(x)])},[(i(!0),d(I,null,L(e(T),p=>(i(),d("div",{key:p.date,class:"rounded-xl p-2 bg-white/10"},[t("div",Pe,[t("h4",{class:B([S.options.compactMode?"text-xs":"text-sm","font-semibold text-white"])},b(c(p.date)),3),t("span",Re,b(p.items.length)+" 課 ",1)]),t("div",Oe,[(i(!0),d(I,null,L(g(p.items),l=>(i(),d("div",{key:l.id,class:B(["rounded-lg p-1.5 bg-white/20",S.options.privacyMode&&l.type==="PERSONAL_EVENT"?"bg-white/10":"bg-white/20"])},[S.options.showTime?(i(),d("div",qe,b(l.start_time),1)):M("",!0),t("h5",{class:B([S.options.compactMode?"text-xs":"text-sm","font-medium text-white truncate"])},b(l.type==="PERSONAL_EVENT"&&S.options.privacyMode?"已保留":l.title),3)],2))),128)),p.items.length>e(v)?(i(),d("div",We," +"+b(p.items.length-e(v))+" 更多 ",1)):M("",!0),p.items.length===0?(i(),d("div",Ke," 休息 ")):M("",!0)])]))),128))],2)):(i(),d("div",Ge,[(i(!0),d(I,null,L(e(T),p=>(i(),d("div",{key:p.date},[t("div",Je,[t("h4",{class:B([S.options.compactMode?"text-sm":"text-base","font-semibold text-white"])},b(o(p.date)),3),t("span",Qe,b(p.items.length)+" 個課程 ",1)]),t("div",Ye,[(i(!0),d(I,null,L(p.items,l=>(i(),d("div",{key:l.id,class:B(["rounded-lg p-2",S.options.privacyMode&&l.type==="PERSONAL_EVENT"?"bg-white/10":"bg-white/20"])},[S.options.showTime?(i(),d("div",Xe,b(l.start_time)+" - "+b(l.end_time),1)):M("",!0),t("h5",{class:B([S.options.compactMode?"text-xs":"text-sm","font-medium text-white"])},b(l.type==="PERSONAL_EVENT"&&S.options.privacyMode?"已保留":l.title),3)],2))),128))]),p.items.length===0?(i(),d("div",Ze," 無行程 ")):M("",!0)]))),128))])),y[9]||(y[9]=t("div",{class:"text-center pt-3 border-t border-white/20"},[t("p",{class:"text-white/60 text-xs"},"TimeLedger")],-1))],4)])])]))}}),es={class:"flex items-center justify-between p-4 border-b border-white/10 sticky top-0 bg-slate-900/95 backdrop-blur-sm z-10"},ss={class:"p-4 space-y-6"},ls={class:"grid grid-cols-3 gap-3"},os=["onClick"],ns={class:"grid grid-cols-2 gap-3"},as={class:"text-center"},is={class:"grid grid-cols-3 gap-1 w-12 mx-auto mb-2"},rs={class:"text-center"},ds={class:"space-y-1 w-12 mx-auto mb-2"},us={class:"space-y-3"},cs={class:"flex items-center gap-3 cursor-pointer"},ms={class:"flex items-center gap-3 cursor-pointer"},ps={class:"flex items-center gap-3 cursor-pointer"},xs={class:"flex items-center gap-3 cursor-pointer"},fs={class:"flex items-center gap-3 cursor-pointer"},vs={class:"grid grid-cols-2 gap-3"},bs={class:"flex gap-3"},gs=["disabled"],hs=["disabled"],ks=q({__name:"ExportModal",emits:["close"],setup(S,{emit:E}){const w=E,h=_(!1),C=_("midnight"),f=_("story"),k=_("grid"),$=_(!1),v=_({showPersonalInfo:!0,compactMode:!1,showTime:!0,privacyMode:!1,showFullWeek:!1}),x=[{id:"midnight",name:"Midnight Glow",preview:"linear-gradient(135deg, #1e3a8a 0%, #6366F1 25%, #A855F7 50%, #1e3a8a 75%, #0f172a 100%)",textColor:"#ffffff"},{id:"emerald",name:"Emerald Mist",preview:"linear-gradient(135deg, #064e3b 0%, #10B981 25%, #34D399 50%, #064e3b 75%, #022c22 100%)",textColor:"#ffffff"},{id:"sunset",name:"Sunset Quartz",preview:"linear-gradient(135deg, #78350f 0%, #F59E0B 25%, #FBBF24 50%, #78350f 75%, #451a03 100%)",textColor:"#ffffff"}],r=T=>x.find(o=>o.id===T),D=()=>{$.value=!0},g=async()=>{h.value=!0;try{$.value=!0,await new Promise(T=>setTimeout(T,2e3)),alert("圖片已生成！請點擊分享按鈕分享到 LINE 或其他平台。")}catch(T){console.error("Export failed:",T),alert("匯出失敗，請稍後再試")}finally{h.value=!1}};return(T,o)=>{const c=ts;return i(),d("div",{class:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:o[12]||(o[12]=V(n=>w("close"),["self"]))},[t("div",{class:"glass-card w-full max-w-lg sm:max-w-xl max-h-[90vh] overflow-y-auto animate-spring",onClick:o[10]||(o[10]=V(()=>{},["stop"]))},[t("div",es,[o[14]||(o[14]=t("h3",{class:"text-lg font-semibold text-slate-100"}," 匯出課表圖片 ",-1)),t("button",{onClick:o[0]||(o[0]=n=>w("close")),class:"p-2 rounded-lg hover:bg-white/10 transition-colors"},[...o[13]||(o[13]=[t("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",ss,[t("div",null,[o[15]||(o[15]=t("label",{class:"block text-slate-300 mb-3 font-medium"},"主題選擇",-1)),t("div",ls,[(i(),d(I,null,L(x,n=>t("button",{key:n.id,type:"button",onClick:A=>C.value=n.id,class:B(["aspect-square rounded-xl p-3 transition-all duration-300 hover:scale-105",e(C)===n.id?"ring-2 ring-white":""]),style:Y({background:n.preview})},[t("span",{class:"text-sm font-medium",style:Y({color:n.textColor})},b(n.name),5)],14,os)),64))])]),t("div",null,[o[18]||(o[18]=t("label",{class:"block text-slate-300 mb-3 font-medium"},"顯示模式",-1)),t("div",ns,[t("button",{type:"button",onClick:o[1]||(o[1]=n=>k.value="grid"),class:B(["p-4 rounded-xl glass-btn transition-all duration-300",e(k)==="grid"?"bg-primary-500/30 border-primary-500":""])},[t("div",as,[t("div",is,[(i(),d(I,null,L(6,n=>t("div",{key:n,class:"aspect-square bg-slate-600/50 rounded"})),64))]),o[16]||(o[16]=t("span",{class:"text-sm font-medium text-slate-100"},"網格",-1))])],2),t("button",{type:"button",onClick:o[2]||(o[2]=n=>k.value="list"),class:B(["p-4 rounded-xl glass-btn transition-all duration-300",e(k)==="list"?"bg-primary-500/30 border-primary-500":""])},[t("div",rs,[t("div",ds,[(i(),d(I,null,L(3,n=>t("div",{key:n,class:"h-3 bg-slate-600/50 rounded"})),64))]),o[17]||(o[17]=t("span",{class:"text-sm font-medium text-slate-100"},"列表",-1))])],2)])]),t("div",null,[o[24]||(o[24]=t("label",{class:"block text-slate-300 mb-3 font-medium"},"內容選項",-1)),t("div",us,[t("label",cs,[z(t("input",{"onUpdate:modelValue":o[3]||(o[3]=n=>e(v).showPersonalInfo=n),type:"checkbox",class:"w-5 h-5 rounded accent-primary-500"},null,512),[[G,e(v).showPersonalInfo]]),o[19]||(o[19]=t("span",{class:"text-slate-100"},"顯示個人品牌資訊（頭像、姓名、標籤）",-1))]),t("label",ms,[z(t("input",{"onUpdate:modelValue":o[4]||(o[4]=n=>e(v).compactMode=n),type:"checkbox",class:"w-5 h-5 rounded accent-primary-500"},null,512),[[G,e(v).compactMode]]),o[20]||(o[20]=t("span",{class:"text-slate-100"},"精簡模式（縮小字體與間距，放更多課程）",-1))]),t("label",ps,[z(t("input",{"onUpdate:modelValue":o[5]||(o[5]=n=>e(v).showTime=n),type:"checkbox",class:"w-5 h-5 rounded accent-primary-500"},null,512),[[G,e(v).showTime]]),o[21]||(o[21]=t("span",{class:"text-slate-100"},"顯示課程時間",-1))]),t("label",xs,[z(t("input",{"onUpdate:modelValue":o[6]||(o[6]=n=>e(v).privacyMode=n),type:"checkbox",class:"w-5 h-5 rounded accent-primary-500"},null,512),[[G,e(v).privacyMode]]),o[22]||(o[22]=t("span",{class:"text-slate-100"},"隱私模式（個人行程僅顯示「已保留」）",-1))]),t("label",fs,[z(t("input",{"onUpdate:modelValue":o[7]||(o[7]=n=>e(v).showFullWeek=n),type:"checkbox",class:"w-5 h-5 rounded accent-primary-500"},null,512),[[G,e(v).showFullWeek]]),o[23]||(o[23]=t("span",{class:"text-slate-100"},"顯示完整週（預設：3 天）",-1))])])]),t("div",null,[o[27]||(o[27]=t("label",{class:"block text-slate-300 mb-3 font-medium"},"格式",-1)),t("div",vs,[t("button",{type:"button",onClick:o[8]||(o[8]=n=>f.value="story"),class:B(["p-4 rounded-xl glass-btn transition-all duration-300",e(f)==="story"?"bg-primary-500/30 border-primary-500":""])},[...o[25]||(o[25]=[W('<div class="text-center"><div class="aspect-[9/16] w-16 mx-auto mb-2 rounded-lg bg-slate-700 flex items-center justify-center"><svg class="w-6 h-6 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg></div><span class="text-sm font-medium text-slate-100">IG Story</span><p class="text-xs text-slate-400">9:16</p></div>',1)])],2),t("button",{type:"button",onClick:o[9]||(o[9]=n=>f.value="post"),class:B(["p-4 rounded-xl glass-btn transition-all duration-300",e(f)==="post"?"bg-primary-500/30 border-primary-500":""])},[...o[26]||(o[26]=[W('<div class="text-center"><div class="aspect-[4/3] w-16 mx-auto mb-2 rounded-lg bg-slate-700 flex items-center justify-center"><svg class="w-6 h-6 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg></div><span class="text-sm font-medium text-slate-100">貼文</span><p class="text-xs text-slate-400">4:3</p></div>',1)])],2)])]),t("div",bs,[t("button",{onClick:D,disabled:e(h),class:"flex-1 glass-btn py-3 rounded-xl font-medium"},b(e(h)?"生成中...":"預覽"),9,gs),t("button",{onClick:g,disabled:e(h),class:"flex-1 btn-primary"},b(e(h)?"生成中...":"下載並分享"),9,hs)])])]),e($)?(i(),R(c,{key:0,theme:r(e(C)),options:e(v),format:e(f),view:e(k),onClose:o[11]||(o[11]=n=>$.value=!1)},null,8,["theme","options","format","view"])):M("",!0)])}}}),ws={class:"text-center mb-8"},ys={class:"w-24 h-24 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center mx-auto mb-4"},_s={class:"text-4xl font-bold text-white"},$s={class:"text-2xl font-bold text-slate-100 mb-1"},Cs={key:0,class:"text-slate-400"},Ms={class:"mt-4 max-w-xs mx-auto"},js={class:"flex items-center justify-between text-xs text-slate-400 mb-1"},Ss={class:"text-white font-medium"},Vs={class:"h-2 bg-white/10 rounded-full overflow-hidden"},Bs={class:"text-xs text-slate-500 mt-1"},Ts={class:"space-y-4"},zs={class:"mt-8"},Es={key:0,class:"space-y-3"},Is={class:"flex items-center justify-between"},As={class:"font-medium text-slate-100"},Ls={key:1,class:"text-center py-8 text-slate-500"},Ks=q({__name:"profile",setup(S){const E=J(),w=Z(),h=ut(),C=ct(),f=_(!1),k=_(!1),$=_(!1),v=_(!1),x=N(()=>{let o=0;const c=E.user,n=w.centers.length>0?w.centers[0]:null;return c?.name&&(o+=10),c?.email&&(o+=10),c?.phone&&(o+=10),c?.bio&&c.bio.length>=10&&(o+=20),n?.skills&&n.skills.length>0&&(o+=Math.min(n.skills.length*10,30)),n?.certificates&&n.certificates.length>0&&(o+=Math.min(n.certificates.length*5,20)),Math.min(o,100)}),r=()=>{const o=x.value;return o>=80?"bg-success-500":o>=50?"bg-warning-500":"bg-critical-500"},D=()=>{const o=x.value;return o>=100?"太棒了！您的檔案已經完整":o>=80?"很不錯！再完善一些就能獲得更好的曝光":o>=50?"請補完基本資料和技能，讓更多人認識您":"建議您先填寫基本資料和簡介"},g=o=>{switch(o){case"ACTIVE":return"bg-success-500/20 text-success-500";case"INVITED":return"bg-warning-500/20 text-warning-500";case"INACTIVE":return"bg-slate-500/20 text-slate-400";default:return"bg-slate-500/20 text-slate-400"}},T=o=>{switch(o){case"ACTIVE":return"已加入";case"INVITED":return"邀請中";case"INACTIVE":return"已離開";default:return o}};return X(()=>{w.fetchCenters()}),(o,c)=>{const n=At,A=Pt,j=De,y=ks,p=dt,l=it;return i(),d(I,null,[t("div",ws,[t("div",ys,[t("span",_s,b(e(E).user?.name?.charAt(0)||"T"),1)]),t("h1",$s,b(e(E).user?.name),1),e(E).user?.bio?(i(),d("p",Cs,b(e(E).user?.bio),1)):M("",!0),t("div",Ms,[t("div",js,[c[10]||(c[10]=t("span",null,"檔案完整度",-1)),t("span",Ss,b(e(x))+"%",1)]),t("div",Vs,[t("div",{class:B(["h-full rounded-full transition-all duration-500",r()]),style:Y({width:`${e(x)}%`})},null,6)]),t("p",Bs,b(D()),1)])]),t("div",Ts,[t("button",{onClick:c[0]||(c[0]=u=>f.value=!0),class:"glass-card w-full p-4 flex items-center gap-4 hover:bg-white/5 transition-colors"},[...c[11]||(c[11]=[W('<div class="p-3 rounded-xl bg-primary-500/20"><svg class="w-6 h-6 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div><div class="flex-1 text-left"><h3 class="font-medium text-slate-100">個人檔案</h3><p class="text-sm text-slate-400">編輯基本資料</p></div><svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>',3)])]),t("button",{onClick:c[1]||(c[1]=u=>k.value=!0),class:"glass-card w-full p-4 flex items-center gap-4 hover:bg-white/5 transition-colors"},[...c[12]||(c[12]=[W('<div class="p-3 rounded-xl bg-secondary-500/20"><svg class="w-6 h-6 text-secondary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div><div class="flex-1 text-left"><h3 class="font-medium text-slate-100">求職設定</h3><p class="text-sm text-slate-400">開放媒合狀態</p></div><svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>',3)])]),t("button",{onClick:c[2]||(c[2]=u=>$.value=!0),class:"glass-card w-full p-4 flex items-center gap-4 hover:bg-white/5 transition-colors"},[...c[13]||(c[13]=[W('<div class="p-3 rounded-xl bg-success-500/20"><svg class="w-6 h-6 text-success-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div><div class="flex-1 text-left"><h3 class="font-medium text-slate-100">技能與證照</h3><p class="text-sm text-slate-400">管理教學專長</p></div><svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>',3)])]),t("button",{onClick:c[3]||(c[3]=u=>v.value=!0),class:"glass-card w-full p-4 flex items-center gap-4 hover:bg-white/5 transition-colors"},[...c[14]||(c[14]=[W('<div class="p-3 rounded-xl bg-warning-500/20"><svg class="w-6 h-6 text-warning-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg></div><div class="flex-1 text-left"><h3 class="font-medium text-slate-100">匯出課表</h3><p class="text-sm text-slate-400">精美圖片分享</p></div><svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>',3)])])]),t("div",zs,[c[15]||(c[15]=t("h2",{class:"text-lg font-semibold text-slate-100 mb-4"},"我的中心",-1)),e(w).centers.length>0?(i(),d("div",Es,[(i(!0),d(I,null,L(e(w).centers,u=>(i(),d("div",{key:u.id,class:"glass-card p-4"},[t("div",Is,[t("div",null,[t("h3",As,b(u.center_name||"未知中心"),1)]),t("span",{class:B(["px-3 py-1 rounded-full text-sm font-medium",g(u.status)])},b(T(u.status)),3)])]))),128))])):(i(),d("div",Ls," 尚未加入任何中心 "))]),e(f)?(i(),R(n,{key:0,onClose:c[4]||(c[4]=u=>f.value=!1)})):M("",!0),e(k)?(i(),R(A,{key:1,onClose:c[5]||(c[5]=u=>k.value=!1)})):M("",!0),e($)?(i(),R(j,{key:2,onClose:c[6]||(c[6]=u=>$.value=!1)})):M("",!0),e(v)?(i(),R(y,{key:3,onClose:c[7]||(c[7]=u=>v.value=!1)})):M("",!0),e(C).show.value?(i(),R(p,{key:4,onClose:c[8]||(c[8]=u=>e(C).close())})):M("",!0),e(h).isOpen.value?(i(),R(l,{key:5,onClose:c[9]||(c[9]=u=>e(h).close())})):M("",!0)],64)}}});export{Ks as default};
