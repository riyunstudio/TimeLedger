=== RUN   TestAdminUserService_GetLINEBindingStatus
=== RUN   TestAdminUserService_GetLINEBindingStatus/GetStatus_NotBound
=== RUN   TestAdminUserService_GetLINEBindingStatus/GetStatus_IsBound
=== RUN   TestAdminUserService_GetLINEBindingStatus/GetStatus_AdminNotFound

2026/02/07 15:04:34 [31;1mD:/project/TimeLedger/app/repositories/generic.go:92 [35;1mrecord not found
[0m[33m[315.591ms] [34;1m[rows:0][0m SELECT * FROM `admin_users` WHERE id = 99999 AND `admin_users`.`deleted_at` IS NULL ORDER BY `admin_users`.`id` LIMIT 1
--- PASS: TestAdminUserService_GetLINEBindingStatus (0.63s)
    --- PASS: TestAdminUserService_GetLINEBindingStatus/GetStatus_NotBound (0.16s)
    --- PASS: TestAdminUserService_GetLINEBindingStatus/GetStatus_IsBound (0.13s)
    --- PASS: TestAdminUserService_GetLINEBindingStatus/GetStatus_AdminNotFound (0.34s)
=== RUN   TestAdminUserService_InitLINEBinding
=== RUN   TestAdminUserService_InitLINEBinding/Init_Success
=== RUN   TestAdminUserService_InitLINEBinding/Init_AlreadyBound
=== RUN   TestAdminUserService_InitLINEBinding/Init_AdminNotFound

2026/02/07 15:04:34 [31;1mD:/project/TimeLedger/app/repositories/generic.go:92 [35;1mrecord not found
[0m[33m[1.047ms] [34;1m[rows:0][0m SELECT * FROM `admin_users` WHERE id = 99999 AND `admin_users`.`deleted_at` IS NULL ORDER BY `admin_users`.`id` LIMIT 1
--- PASS: TestAdminUserService_InitLINEBinding (0.31s)
    --- PASS: TestAdminUserService_InitLINEBinding/Init_Success (0.16s)
    --- PASS: TestAdminUserService_InitLINEBinding/Init_AlreadyBound (0.12s)
    --- PASS: TestAdminUserService_InitLINEBinding/Init_AdminNotFound (0.03s)
=== RUN   TestAdminUserService_VerifyLINEBinding
=== RUN   TestAdminUserService_VerifyLINEBinding/Verify_Success
=== RUN   TestAdminUserService_VerifyLINEBinding/Verify_InvalidCode

2026/02/07 15:04:34 [31;1mD:/project/TimeLedger/app/services/admin_user.go:157 [35;1mrecord not found
[0m[33m[2.254ms] [34;1m[rows:0][0m SELECT * FROM `admin_users` WHERE line_binding_code = 'INVALID' AND line_binding_expires > '2026-02-07 15:04:34.673' AND `admin_users`.`deleted_at` IS NULL ORDER BY `admin_users`.`id` LIMIT 1
=== RUN   TestAdminUserService_VerifyLINEBinding/Verify_ExpiredCode

2026/02/07 15:04:34 [31;1mD:/project/TimeLedger/app/services/admin_user.go:157 [35;1mrecord not found
[0m[33m[1.556ms] [34;1m[rows:0][0m SELECT * FROM `admin_users` WHERE line_binding_code = 'EXPIRED' AND line_binding_expires > '2026-02-07 15:04:34.824' AND `admin_users`.`deleted_at` IS NULL ORDER BY `admin_users`.`id` LIMIT 1
--- PASS: TestAdminUserService_VerifyLINEBinding (0.46s)
    --- PASS: TestAdminUserService_VerifyLINEBinding/Verify_Success (0.17s)
    --- PASS: TestAdminUserService_VerifyLINEBinding/Verify_InvalidCode (0.14s)
    --- PASS: TestAdminUserService_VerifyLINEBinding/Verify_ExpiredCode (0.15s)
=== RUN   TestAdminUserService_UnbindLINE
=== RUN   TestAdminUserService_UnbindLINE/Unbind_Success

2026/02/07 15:04:35 [32mD:/project/TimeLedger/testing/test/admin_user_test.go:31 [33mSLOW SQL >= 200ms
[0m[31;1m[209.920ms] [33m[rows:-][35m SELECT * FROM `centers` LIMIT 1[0m
=== RUN   TestAdminUserService_UnbindLINE/Unbind_NotBound
--- PASS: TestAdminUserService_UnbindLINE (0.46s)
    --- PASS: TestAdminUserService_UnbindLINE/Unbind_Success (0.34s)
    --- PASS: TestAdminUserService_UnbindLINE/Unbind_NotBound (0.12s)
=== RUN   TestAdminUserService_UpdateLINENotifySettings
=== RUN   TestAdminUserService_UpdateLINENotifySettings/UpdateNotify_Success
=== RUN   TestAdminUserService_UpdateLINENotifySettings/UpdateNotify_NotBound
--- PASS: TestAdminUserService_UpdateLINENotifySettings (0.30s)
    --- PASS: TestAdminUserService_UpdateLINENotifySettings/UpdateNotify_Success (0.17s)
    --- PASS: TestAdminUserService_UpdateLINENotifySettings/UpdateNotify_NotBound (0.13s)
=== RUN   TestAdminUserService_GenerateBindingCode
=== RUN   TestAdminUserService_GenerateBindingCode/Generate_CodeFormat
=== RUN   TestAdminUserService_GenerateBindingCode/Generate_Uniqueness
--- PASS: TestAdminUserService_GenerateBindingCode (0.00s)
    --- PASS: TestAdminUserService_GenerateBindingCode/Generate_CodeFormat (0.00s)
    --- PASS: TestAdminUserService_GenerateBindingCode/Generate_Uniqueness (0.00s)
=== RUN   TestAuthController_AdminLogin_Success
--- PASS: TestAuthController_AdminLogin_Success (0.24s)
=== RUN   TestAuthController_AdminLogin_InvalidPassword
--- PASS: TestAuthController_AdminLogin_InvalidPassword (0.24s)
=== RUN   TestAuthController_AdminLogin_AdminNotFound

2026/02/07 15:04:36 [31;1mD:/project/TimeLedger/app/repositories/generic.go:126 [35;1mrecord not found
[0m[33m[1.000ms] [34;1m[rows:0][0m SELECT * FROM `admin_users` WHERE email = 'nonexistent@test.com' AND `admin_users`.`deleted_at` IS NULL ORDER BY `admin_users`.`id` LIMIT 1
--- PASS: TestAuthController_AdminLogin_AdminNotFound (0.10s)
=== RUN   TestAuthController_TeacherLineLogin_Success
    auth_test.go:208: TeacherLineLogin failed: &{130001 Please login first}
--- FAIL: TestAuthController_TeacherLineLogin_Success (0.19s)
=== RUN   TestAuthController_TeacherLineLogin_TeacherNotFound
--- PASS: TestAuthController_TeacherLineLogin_TeacherNotFound (0.14s)
=== RUN   TestAuthController_RefreshToken_Success
    auth_test.go:245: TeacherLineLogin failed: &{130001 Please login first}
--- FAIL: TestAuthController_RefreshToken_Success (0.17s)
=== RUN   TestAuthController_RefreshToken_InvalidToken
--- PASS: TestAuthController_RefreshToken_InvalidToken (0.07s)
=== RUN   TestAuthController_Logout_Success
--- PASS: TestAuthController_Logout_Success (0.07s)
=== RUN   TestAuthController_TokenValidation
    auth_test.go:294: TeacherLineLogin failed: &{130001 Please login first}
--- FAIL: TestAuthController_TokenValidation (0.16s)
=== RUN   TestAuthController_AdminTokenValidation
--- PASS: TestAuthController_AdminTokenValidation (0.33s)
=== RUN   TestAuthService_AdminLogin_SuccessRecordsHistory
--- PASS: TestAuthService_AdminLogin_SuccessRecordsHistory (0.52s)
=== RUN   TestAuthService_AdminLogin_FailedPasswordRecordsHistory
--- PASS: TestAuthService_AdminLogin_FailedPasswordRecordsHistory (0.44s)
=== RUN   TestAuthService_AdminLogin_AdminNotFoundRecordsHistory

2026/02/07 15:04:38 [31;1mD:/project/TimeLedger/app/repositories/generic.go:126 [35;1mrecord not found
[0m[33m[1.144ms] [34;1m[rows:0][0m SELECT * FROM `admin_users` WHERE email = 'nonexistent@example.com' AND `admin_users`.`deleted_at` IS NULL ORDER BY `admin_users`.`id` LIMIT 1
--- PASS: TestAuthService_AdminLogin_AdminNotFoundRecordsHistory (0.34s)
=== RUN   TestAdminLoginHistoryRepository_GetRecentFailedLogins
--- PASS: TestAdminLoginHistoryRepository_GetRecentFailedLogins (0.22s)
=== RUN   TestAdminLoginHistoryRepository_CountFailedLoginsSince

2026/02/07 15:04:39 [32mD:/project/TimeLedger/testing/test/auth_test.go:41 [33mSLOW SQL >= 200ms
[0m[31;1m[244.253ms] [33m[rows:-][35m SELECT * FROM `teachers` LIMIT 1[0m
--- PASS: TestAdminLoginHistoryRepository_CountFailedLoginsSince (0.58s)
=== RUN   TestIntegration_ApplyTemplate_BufferOverride
=== RUN   TestIntegration_ApplyTemplate_BufferOverride/ApplyTemplate_BufferConflict_WithoutOverride
    buffer_override_integration_test.go:263: Buffer conflict detected: 憟璅⊥?????蝒?隢?閫?捱銵?敺??岫
=== RUN   TestIntegration_ApplyTemplate_BufferOverride/ApplyTemplate_OverrideBuffer_Success

2026/02/07 15:04:39 [31;1mD:/project/TimeLedger/app/services/schedule_rule_validator.go:483 [35;1mrecord not found
[0m[33m[1.630ms] [34;1m[rows:0][0m SELECT * FROM `schedule_rules` WHERE center_id = 3 AND teacher_id = 2 AND weekday = 2 AND end_time <= '09:00' AND `schedule_rules`.`deleted_at` IS NULL ORDER BY end_time DESC,`schedule_rules`.`id` LIMIT 1

2026/02/07 15:04:39 [31;1mD:/project/TimeLedger/app/services/schedule_rule_validator.go:535 [35;1mrecord not found
[0m[33m[1.217ms] [34;1m[rows:0][0m SELECT * FROM `schedule_rules` WHERE center_id = 3 AND room_id = 2 AND weekday = 2 AND end_time <= '09:00' AND `schedule_rules`.`deleted_at` IS NULL ORDER BY end_time DESC,`schedule_rules`.`id` LIMIT 1
    buffer_override_integration_test.go:300: Template applied with override: OK
--- PASS: TestIntegration_ApplyTemplate_BufferOverride (0.38s)
    --- PASS: TestIntegration_ApplyTemplate_BufferOverride/ApplyTemplate_BufferConflict_WithoutOverride (0.02s)
    --- PASS: TestIntegration_ApplyTemplate_BufferOverride/ApplyTemplate_OverrideBuffer_Success (0.04s)
=== RUN   TestIntegration_CreateRule_BufferOverride
=== RUN   TestIntegration_CreateRule_BufferOverride/CreateRule_BufferConflict_WithoutOverride

2026/02/07 15:04:40 [31;1mD:/project/TimeLedger/app/services/scheduling_validation.go:65 [35;1mError 1525 (HY000): Incorrect DATE value: ''
[0m[33m[1.066ms] [34;1m[rows:0][0m SELECT * FROM `schedule_rules` WHERE center_id = 4 AND weekday = 1 AND start_time < '10:00:00' AND end_time > '09:00:00' AND JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.start_date')) <= '0000-01-01' AND ((JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) >= '0000-01-01' OR JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) = '0001-01-01' OR JSON_EXTRACT(effective_range, '$.end_date') IS NULL OR JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) = '')) AND teacher_id = 3 AND `schedule_rules`.`deleted_at` IS NULL
    buffer_override_integration_test.go:374: Buffer conflict detected: Database operation failed
=== RUN   TestIntegration_CreateRule_BufferOverride/CreateRule_OverrideBuffer_Success

2026/02/07 15:04:40 [31;1mD:/project/TimeLedger/app/services/scheduling_validation.go:65 [35;1mError 1525 (HY000): Incorrect DATE value: ''
[0m[33m[1.583ms] [34;1m[rows:0][0m SELECT * FROM `schedule_rules` WHERE center_id = 4 AND weekday = 2 AND start_time < '10:00:00' AND end_time > '09:00:00' AND JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.start_date')) <= '0000-01-01' AND ((JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) >= '0000-01-01' OR JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) = '0001-01-01' OR JSON_EXTRACT(effective_range, '$.end_date') IS NULL OR JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) = '')) AND teacher_id = 3 AND `schedule_rules`.`deleted_at` IS NULL
    buffer_override_integration_test.go:406: Expected status 200, got 500. Body: {"code":120001,"message":"Database operation failed","datas":null}
--- FAIL: TestIntegration_CreateRule_BufferOverride (0.25s)
    --- PASS: TestIntegration_CreateRule_BufferOverride/CreateRule_BufferConflict_WithoutOverride (0.00s)
    --- FAIL: TestIntegration_CreateRule_BufferOverride/CreateRule_OverrideBuffer_Success (0.00s)
=== RUN   TestIntegration_OverlapConflict_CannotOverride
=== RUN   TestIntegration_OverlapConflict_CannotOverride/CreateRule_OverlapConflict_EvenWithOverride

2026/02/07 15:04:40 [31;1mD:/project/TimeLedger/app/services/scheduling_validation.go:65 [35;1mError 1525 (HY000): Incorrect DATE value: ''
[0m[33m[1.546ms] [34;1m[rows:0][0m SELECT * FROM `schedule_rules` WHERE center_id = 5 AND weekday = 1 AND start_time < '10:00:00' AND end_time > '09:00:00' AND JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.start_date')) <= '0000-01-01' AND ((JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) >= '0000-01-01' OR JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) = '0001-01-01' OR JSON_EXTRACT(effective_range, '$.end_date') IS NULL OR JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) = '')) AND teacher_id = 4 AND `schedule_rules`.`deleted_at` IS NULL
    buffer_override_integration_test.go:480: Expected status 400, got 500. Body: {"code":120001,"message":"Database operation failed","datas":null}
--- FAIL: TestIntegration_OverlapConflict_CannotOverride (0.28s)
    --- FAIL: TestIntegration_OverlapConflict_CannotOverride/CreateRule_OverlapConflict_EvenWithOverride (0.00s)
=== RUN   TestCenterHolidayRepository_Initialization
    center_holiday_test.go:14: Holiday repository initialization test - requires full app setup for integration tests
--- PASS: TestCenterHolidayRepository_Initialization (0.00s)
=== RUN   TestCenterHolidayModel_Structure
--- PASS: TestCenterHolidayModel_Structure (0.00s)
=== RUN   TestCenterHoliday_TableName
--- PASS: TestCenterHoliday_TableName (0.00s)
=== RUN   TestCenterInvitationRepository_CRUD
=== RUN   TestCenterInvitationRepository_CRUD/CreateInvitation

2026/02/07 15:04:40 [31;1mD:/project/TimeLedger/app/repositories/generic.go:241 [35;1mError 1292 (22007): Incorrect datetime value: '0000-00-00' for column 'expires_at' at row 1
[0m[33m[2.294ms] [34;1m[rows:0][0m INSERT INTO `center_invitations` (`center_id`,`teacher_id`,`invited_by`,`email`,`token`,`invite_type`,`role`,`status`,`message`,`responded_at`,`created_at`,`expires_at`,`deleted_at`) VALUES (6,5,1,'','TOKEN-a5795d67-9000-5','TALENT_POOL','TEACHER','PENDING','甇∟??嚗?,NULL,'2026-02-07 15:04:40.417','0000-00-00 00:00:00',NULL)
    center_invitation_test.go:125: 撱箇??隢仃?? Error 1292 (22007): Incorrect datetime value: '0000-00-00' for column 'expires_at' at row 1

2026/02/07 15:04:40 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:104 [33mSLOW SQL >= 200ms
[0m[31;1m[310.179ms] [33m[rows:1][35m UPDATE `teachers` SET `deleted_at`='2026-02-07 15:04:40.421' WHERE id = 5 AND `teachers`.`deleted_at` IS NULL[0m

2026/02/07 15:04:41 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[416.161ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:04:41 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[329.169ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:04:41 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[252.907ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:04:42 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[321.061ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:04:42 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[221.256ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
=== RUN   TestCenterInvitationRepository_CRUD/GetByID

2026/02/07 15:04:42 [31;1mD:/project/TimeLedger/testing/test/center_invitation_test.go:167 [35;1mError 1292 (22007): Incorrect datetime value: '0000-00-00' for column 'expires_at' at row 1
[0m[33m[2.050ms] [34;1m[rows:0][0m INSERT INTO `center_invitations` (`center_id`,`teacher_id`,`invited_by`,`email`,`token`,`invite_type`,`role`,`status`,`message`,`responded_at`,`created_at`,`expires_at`,`deleted_at`) VALUES (1,1,1,'','TOKEN-ccd6bbaf-4600-5','TALENT_POOL','TEACHER','PENDING','',NULL,'2026-02-07 15:04:42.417','0000-00-00 00:00:00',NULL)
    center_invitation_test.go:168: 撱箇??隢仃?? Error 1292 (22007): Incorrect datetime value: '0000-00-00' for column 'expires_at' at row 1

2026/02/07 15:04:42 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[398.631ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:04:43 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[387.618ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:04:43 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[251.071ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:04:43 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[285.365ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:04:44 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[312.439ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
=== RUN   TestCenterInvitationRepository_CRUD/GetByTeacherAndCenter

2026/02/07 15:04:44 [31;1mD:/project/TimeLedger/testing/test/center_invitation_test.go:226 [35;1mError 1292 (22007): Incorrect datetime value: '0000-00-00' for column 'expires_at' at row 1
[0m[33m[2.103ms] [34;1m[rows:0][0m INSERT INTO `center_invitations` (`center_id`,`teacher_id`,`invited_by`,`email`,`token`,`invite_type`,`role`,`status`,`message`,`responded_at`,`created_at`,`expires_at`,`deleted_at`) VALUES (1,1,1,'','TOKEN-1397de7c-2900-5','TALENT_POOL','TEACHER','PENDING','',NULL,'2026-02-07 15:04:44.185','0000-00-00 00:00:00',NULL)
    center_invitation_test.go:227: 撱箇??隢?0 憭望?: Error 1292 (22007): Incorrect datetime value: '0000-00-00' for column 'expires_at' at row 1

2026/02/07 15:04:44 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[383.722ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:04:44 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[320.911ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:04:45 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[228.513ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:04:45 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[235.015ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:04:45 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[215.871ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
=== RUN   TestCenterInvitationRepository_CRUD/HasPendingInvitation

2026/02/07 15:04:45 [31;1mD:/project/TimeLedger/testing/test/center_invitation_test.go:279 [35;1mError 1292 (22007): Incorrect datetime value: '0000-00-00' for column 'expires_at' at row 1
[0m[33m[2.387ms] [34;1m[rows:0][0m INSERT INTO `center_invitations` (`center_id`,`teacher_id`,`invited_by`,`email`,`token`,`invite_type`,`role`,`status`,`message`,`responded_at`,`created_at`,`expires_at`,`deleted_at`) VALUES (1,1,1,'','TOKEN-af575ac1-4000-5','TALENT_POOL','TEACHER','PENDING','',NULL,'2026-02-07 15:04:45.69','0000-00-00 00:00:00',NULL)
    center_invitation_test.go:280: 撱箇??隢仃?? Error 1292 (22007): Incorrect datetime value: '0000-00-00' for column 'expires_at' at row 1

2026/02/07 15:04:46 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[403.505ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:04:46 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[308.364ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:04:46 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[241.650ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:04:47 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[398.394ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m
=== RUN   TestCenterInvitationRepository_CRUD/UpdateStatus

2026/02/07 15:04:47 [31;1mD:/project/TimeLedger/testing/test/center_invitation_test.go:339 [35;1mError 1292 (22007): Incorrect datetime value: '0000-00-00' for column 'expires_at' at row 1
[0m[33m[2.096ms] [34;1m[rows:0][0m INSERT INTO `center_invitations` (`center_id`,`teacher_id`,`invited_by`,`email`,`token`,`invite_type`,`role`,`status`,`message`,`responded_at`,`created_at`,`expires_at`,`deleted_at`) VALUES (1,1,1,'','TOKEN-1d870076-3300-5','TALENT_POOL','TEACHER','PENDING','',NULL,'2026-02-07 15:04:47.351','0000-00-00 00:00:00',NULL)
    center_invitation_test.go:340: 撱箇??隢仃?? Error 1292 (22007): Incorrect datetime value: '0000-00-00' for column 'expires_at' at row 1

2026/02/07 15:04:47 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[384.179ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:04:48 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[331.299ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:04:48 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[259.211ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:04:48 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[273.258ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:04:48 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[211.620ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
=== RUN   TestCenterInvitationRepository_CRUD/CountByCenter

2026/02/07 15:04:49 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[388.236ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:04:49 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[321.088ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:04:50 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[280.409ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:04:50 [32mD:/project/TimeLedger/testing/test/center_invitation_test.go:72 [33mSLOW SQL >= 200ms
[0m[31;1m[267.030ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m
--- FAIL: TestCenterInvitationRepository_CRUD (10.18s)
    --- FAIL: TestCenterInvitationRepository_CRUD/CreateInvitation (1.99s)
    --- FAIL: TestCenterInvitationRepository_CRUD/GetByID (1.76s)
    --- FAIL: TestCenterInvitationRepository_CRUD/GetByTeacherAndCenter (1.52s)
    --- FAIL: TestCenterInvitationRepository_CRUD/HasPendingInvitation (1.66s)
    --- FAIL: TestCenterInvitationRepository_CRUD/UpdateStatus (1.58s)
    --- PASS: TestCenterInvitationRepository_CRUD/CountByCenter (1.67s)
=== RUN   TestCenterTeacherNoteRepository_Initialization
--- PASS: TestCenterTeacherNoteRepository_Initialization (0.00s)
=== RUN   TestCenterTeacherNoteModel_Structure
--- PASS: TestCenterTeacherNoteModel_Structure (0.00s)
=== RUN   TestCenterTeacherNote_TableName
--- PASS: TestCenterTeacherNote_TableName (0.00s)
=== RUN   TestCenterMembershipModel_Structure
--- PASS: TestCenterMembershipModel_Structure (0.00s)
=== RUN   TestCenterMembership_TableName
--- PASS: TestCenterMembership_TableName (0.00s)
=== RUN   TestErrInfos_ErrorCodes
--- PASS: TestErrInfos_ErrorCodes (0.00s)
=== RUN   TestCenterRepository_CRUD
--- PASS: TestCenterRepository_CRUD (0.03s)
=== RUN   TestValidationService_OverlapDetection
=== RUN   TestValidationService_OverlapDetection/Standard_Overlap
=== RUN   TestValidationService_OverlapDetection/Contained_Overlap
=== RUN   TestValidationService_OverlapDetection/No_Overlap_-_Adjacent
=== RUN   TestValidationService_OverlapDetection/Exact_Match
=== RUN   TestValidationService_OverlapDetection/No_Overlap_-_Separate
--- PASS: TestValidationService_OverlapDetection (0.00s)
    --- PASS: TestValidationService_OverlapDetection/Standard_Overlap (0.00s)
    --- PASS: TestValidationService_OverlapDetection/Contained_Overlap (0.00s)
    --- PASS: TestValidationService_OverlapDetection/No_Overlap_-_Adjacent (0.00s)
    --- PASS: TestValidationService_OverlapDetection/Exact_Match (0.00s)
    --- PASS: TestValidationService_OverlapDetection/No_Overlap_-_Separate (0.00s)
=== RUN   TestValidationService_BufferCheck
=== RUN   TestValidationService_BufferCheck/Sufficient_Buffer
=== RUN   TestValidationService_BufferCheck/Insufficient_Buffer
=== RUN   TestValidationService_BufferCheck/Zero_Buffer_Required
--- PASS: TestValidationService_BufferCheck (0.00s)
    --- PASS: TestValidationService_BufferCheck/Sufficient_Buffer (0.00s)
    --- PASS: TestValidationService_BufferCheck/Insufficient_Buffer (0.00s)
    --- PASS: TestValidationService_BufferCheck/Zero_Buffer_Required (0.00s)
=== RUN   TestValidationService_WeekdayMapping
=== RUN   TestValidationService_WeekdayMapping/Sunday_Mapping
=== RUN   TestValidationService_WeekdayMapping/Monday_Mapping
=== RUN   TestValidationService_WeekdayMapping/Saturday_Mapping
--- PASS: TestValidationService_WeekdayMapping (0.00s)
    --- PASS: TestValidationService_WeekdayMapping/Sunday_Mapping (0.00s)
    --- PASS: TestValidationService_WeekdayMapping/Monday_Mapping (0.00s)
    --- PASS: TestValidationService_WeekdayMapping/Saturday_Mapping (0.00s)
=== RUN   TestExpansionService_RuleExpansion
=== RUN   TestExpansionService_RuleExpansion/Expand_Single_Week
=== RUN   TestExpansionService_RuleExpansion/Expand_Multiple_Weeks
--- PASS: TestExpansionService_RuleExpansion (0.00s)
    --- PASS: TestExpansionService_RuleExpansion/Expand_Single_Week (0.00s)
    --- PASS: TestExpansionService_RuleExpansion/Expand_Multiple_Weeks (0.00s)
=== RUN   TestExpansionService_EffectiveRange
=== RUN   TestExpansionService_EffectiveRange/Within_Effective_Range
=== RUN   TestExpansionService_EffectiveRange/Before_Effective_Range
=== RUN   TestExpansionService_EffectiveRange/After_Effective_Range
=== RUN   TestExpansionService_EffectiveRange/Open_Ended_Range
--- PASS: TestExpansionService_EffectiveRange (0.00s)
    --- PASS: TestExpansionService_EffectiveRange/Within_Effective_Range (0.00s)
    --- PASS: TestExpansionService_EffectiveRange/Before_Effective_Range (0.00s)
    --- PASS: TestExpansionService_EffectiveRange/After_Effective_Range (0.00s)
    --- PASS: TestExpansionService_EffectiveRange/Open_Ended_Range (0.00s)
=== RUN   TestExceptionService_DeadlineCalculation
=== RUN   TestExceptionService_DeadlineCalculation/Calculate_Deadline_from_Lead_Days
=== RUN   TestExceptionService_DeadlineCalculation/Check_if_Within_Deadline
--- PASS: TestExceptionService_DeadlineCalculation (0.00s)
    --- PASS: TestExceptionService_DeadlineCalculation/Calculate_Deadline_from_Lead_Days (0.00s)
    --- PASS: TestExceptionService_DeadlineCalculation/Check_if_Within_Deadline (0.00s)
=== RUN   TestSmartMatchingService_Scoring
=== RUN   TestSmartMatchingService_Scoring/Skill_Match_Score
=== RUN   TestSmartMatchingService_Scoring/Partial_Skill_Match_Score
--- PASS: TestSmartMatchingService_Scoring (0.00s)
    --- PASS: TestSmartMatchingService_Scoring/Skill_Match_Score (0.00s)
    --- PASS: TestSmartMatchingService_Scoring/Partial_Skill_Match_Score (0.00s)
=== RUN   TestNotificationService_MessageFormatting
=== RUN   TestNotificationService_MessageFormatting/Format_Schedule_Reminder
=== RUN   TestNotificationService_MessageFormatting/Format_Emergency_Notification
--- PASS: TestNotificationService_MessageFormatting (0.00s)
    --- PASS: TestNotificationService_MessageFormatting/Format_Schedule_Reminder (0.00s)
    --- PASS: TestNotificationService_MessageFormatting/Format_Emergency_Notification (0.00s)
=== RUN   TestAuditLogService_ActionFormatting
=== RUN   TestAuditLogService_ActionFormatting/Action_String_Formatting
=== RUN   TestAuditLogService_ActionFormatting/Action_Consistency
--- PASS: TestAuditLogService_ActionFormatting (0.00s)
    --- PASS: TestAuditLogService_ActionFormatting/Action_String_Formatting (0.00s)
    --- PASS: TestAuditLogService_ActionFormatting/Action_Consistency (0.00s)
=== RUN   TestPaginationService_Calculation
=== RUN   TestPaginationService_Calculation/Calculate_Total_Pages
=== RUN   TestPaginationService_Calculation/Calculate_Has_Next
=== RUN   TestPaginationService_Calculation/Calculate_Has_Prev
=== RUN   TestPaginationService_Calculation/Last_Page_Has_Next_False
=== RUN   TestPaginationService_Calculation/First_Page_Has_Prev_False
--- PASS: TestPaginationService_Calculation (0.00s)
    --- PASS: TestPaginationService_Calculation/Calculate_Total_Pages (0.00s)
    --- PASS: TestPaginationService_Calculation/Calculate_Has_Next (0.00s)
    --- PASS: TestPaginationService_Calculation/Calculate_Has_Prev (0.00s)
    --- PASS: TestPaginationService_Calculation/Last_Page_Has_Next_False (0.00s)
    --- PASS: TestPaginationService_Calculation/First_Page_Has_Prev_False (0.00s)
=== RUN   TestTimezoneService_UTCConversion
=== RUN   TestTimezoneService_UTCConversion/UTC_to_Local
=== RUN   TestTimezoneService_UTCConversion/Local_to_UTC
--- PASS: TestTimezoneService_UTCConversion (0.00s)
    --- PASS: TestTimezoneService_UTCConversion/UTC_to_Local (0.00s)
    --- PASS: TestTimezoneService_UTCConversion/Local_to_UTC (0.00s)
=== RUN   TestResourceService_CapacityCheck
=== RUN   TestResourceService_CapacityCheck/Check_Room_Capacity
=== RUN   TestResourceService_CapacityCheck/Room_At_Capacity
=== RUN   TestResourceService_CapacityCheck/Room_Over_Capacity
--- PASS: TestResourceService_CapacityCheck (0.00s)
    --- PASS: TestResourceService_CapacityCheck/Check_Room_Capacity (0.00s)
    --- PASS: TestResourceService_CapacityCheck/Room_At_Capacity (0.00s)
    --- PASS: TestResourceService_CapacityCheck/Room_Over_Capacity (0.00s)
=== RUN   TestCrossDayTimeFunctions
=== RUN   TestCrossDayTimeFunctions/IsCrossDayTime
=== RUN   TestCrossDayTimeFunctions/ParseTimeToMinutes
=== RUN   TestCrossDayTimeFunctions/TimesOverlapCrossDay_NormalCourses
=== RUN   TestCrossDayTimeFunctions/TimesOverlapCrossDay_CrossDayCourse
=== RUN   TestCrossDayTimeFunctions/TimesOverlapCrossDay_BothCrossDay
=== RUN   TestCrossDayTimeFunctions/TimesOverlapCrossDayWithNextDay
--- PASS: TestCrossDayTimeFunctions (0.00s)
    --- PASS: TestCrossDayTimeFunctions/IsCrossDayTime (0.00s)
    --- PASS: TestCrossDayTimeFunctions/ParseTimeToMinutes (0.00s)
    --- PASS: TestCrossDayTimeFunctions/TimesOverlapCrossDay_NormalCourses (0.00s)
    --- PASS: TestCrossDayTimeFunctions/TimesOverlapCrossDay_CrossDayCourse (0.00s)
    --- PASS: TestCrossDayTimeFunctions/TimesOverlapCrossDay_BothCrossDay (0.00s)
    --- PASS: TestCrossDayTimeFunctions/TimesOverlapCrossDayWithNextDay (0.00s)
=== RUN   TestCrossDayScheduleRule
    cross_day_test.go:208: No rooms available, skipping test
--- SKIP: TestCrossDayScheduleRule (0.01s)
=== RUN   TestGetTodaySummary_API

2026/02/07 15:04:50 [32mD:/project/TimeLedger/app/services/scheduling_exception.go:442 [33mSLOW SQL >= 200ms
[0m[31;1m[253.447ms] [33m[rows:0][35m SELECT * FROM `schedule_exceptions` WHERE center_id = 2 AND status = 'PENDING' ORDER BY created_at ASC[0m
    dashboard_test.go:121: Response: {Code:0 Message:OK Datas:map[changes_count:0 completed_sessions:0 has_schedule_changes:false in_progress_sessions:0 pending_exceptions:0 sessions:[] total_sessions:0 upcoming_sessions:0] Warnings:[]}
    dashboard_test.go:122: Response Datas: map[changes_count:0 completed_sessions:0 has_schedule_changes:false in_progress_sessions:0 pending_exceptions:0 sessions:[] total_sessions:0 upcoming_sessions:0]
    dashboard_test.go:131: Response missing 'completedSessions' field
    dashboard_test.go:134: Response missing 'pendingExceptions' field
    dashboard_test.go:137: Response missing 'totalSessions' field
--- FAIL: TestGetTodaySummary_API (0.40s)
=== RUN   TestGetTodaySummary_Service

2026/02/07 15:04:51 [32mD:/project/TimeLedger/testing/test/dashboard_test.go:35 [33mSLOW SQL >= 200ms
[0m[31;1m[269.960ms] [33m[rows:-][35m SELECT * FROM `schedule_rules` LIMIT 1[0m

2026/02/07 15:04:51 [31;1mD:/project/TimeLedger/testing/test/dashboard_test.go:157 [35;1mrecord not found
[0m[33m[1.045ms] [34;1m[rows:0][0m SELECT * FROM `offerings` WHERE center_id = 2 AND `offerings`.`deleted_at` IS NULL ORDER BY id DESC,`offerings`.`id` LIMIT 1
    dashboard_test.go:158: Skipping - no offering data available: record not found
--- SKIP: TestGetTodaySummary_Service (0.42s)
=== RUN   TestGetAllExceptions
    exception_api_test.go:63: GetAllExceptions response: {"code":0,"message":"OK","datas":[]}
--- PASS: TestGetAllExceptions (0.01s)
=== RUN   TestGetAllExceptions_WithFilters
    exception_api_test.go:100: GetAllExceptions with filters response: {"code":0,"message":"OK","datas":[]}
--- PASS: TestGetAllExceptions_WithFilters (0.01s)
=== RUN   TestReviewException_Approve

2026/02/07 15:04:51 [31;1mD:/project/TimeLedger/testing/test/exception_api_test.go:116 [35;1mrecord not found
[0m[33m[1.039ms] [34;1m[rows:0][0m SELECT * FROM `offerings` WHERE center_id = 2 AND `offerings`.`deleted_at` IS NULL ORDER BY id DESC,`offerings`.`id` LIMIT 1
    exception_api_test.go:117: Skipping - no offering data available: record not found
--- SKIP: TestReviewException_Approve (0.01s)
=== RUN   TestReviewException_Reject

2026/02/07 15:04:51 [31;1mD:/project/TimeLedger/testing/test/exception_api_test.go:223 [35;1mrecord not found
[0m[33m[1.075ms] [34;1m[rows:0][0m SELECT * FROM `offerings` WHERE center_id = 2 AND `offerings`.`deleted_at` IS NULL ORDER BY id DESC,`offerings`.`id` LIMIT 1
    exception_api_test.go:224: Skipping - no offering data available: record not found
--- SKIP: TestReviewException_Reject (0.01s)
=== RUN   TestReviewException_InvalidAction
    exception_api_test.go:346: ReviewException INVALID action response: {"code":401,"message":"Authentication required","datas":null}
    exception_api_test.go:352: Invalid action correctly rejected
--- PASS: TestReviewException_InvalidAction (0.01s)
=== RUN   TestExpandRulesWithPendingException

2026/02/07 15:04:51 [31;1mD:/project/TimeLedger/testing/test/exception_flow_test.go:76 [35;1mrecord not found
[0m[33m[1.597ms] [34;1m[rows:0][0m SELECT * FROM `courses` WHERE center_id = 2 AND `courses`.`deleted_at` IS NULL ORDER BY `courses`.`id` LIMIT 1
    exception_flow_test.go:77: No course data available, skipping test: record not found
--- SKIP: TestExpandRulesWithPendingException (0.01s)
=== RUN   TestExceptionFlowE2ECancel

2026/02/07 15:04:51 [31;1mD:/project/TimeLedger/testing/test/exception_flow_test.go:184 [35;1mrecord not found
[0m[33m[1.059ms] [34;1m[rows:0][0m SELECT * FROM `courses` WHERE center_id = 2 AND `courses`.`deleted_at` IS NULL ORDER BY `courses`.`id` LIMIT 1
    exception_flow_test.go:185: No course data available, skipping test: record not found
--- SKIP: TestExceptionFlowE2ECancel (0.01s)
=== RUN   TestExceptionFlowE2EReschedule

2026/02/07 15:04:51 [31;1mD:/project/TimeLedger/testing/test/exception_flow_test.go:310 [35;1mrecord not found
[0m[33m[1.041ms] [34;1m[rows:0][0m SELECT * FROM `courses` WHERE center_id = 2 AND `courses`.`deleted_at` IS NULL ORDER BY `courses`.`id` LIMIT 1
    exception_flow_test.go:311: No course data available, skipping test: record not found
--- SKIP: TestExceptionFlowE2EReschedule (0.01s)
=== RUN   TestExceptionFlowE2ERevoke

2026/02/07 15:04:51 [31;1mD:/project/TimeLedger/testing/test/exception_flow_test.go:447 [35;1mrecord not found
[0m[33m[1.060ms] [34;1m[rows:0][0m SELECT * FROM `courses` WHERE center_id = 2 AND `courses`.`deleted_at` IS NULL ORDER BY `courses`.`id` LIMIT 1
    exception_flow_test.go:448: No course data available, skipping test: record not found
--- SKIP: TestExceptionFlowE2ERevoke (0.01s)
=== RUN   TestExceptionFlowE2EReject

2026/02/07 15:04:51 [31;1mD:/project/TimeLedger/testing/test/exception_flow_test.go:563 [35;1mrecord not found
[0m[33m[1.049ms] [34;1m[rows:0][0m SELECT * FROM `courses` WHERE center_id = 2 AND `courses`.`deleted_at` IS NULL ORDER BY `courses`.`id` LIMIT 1
    exception_flow_test.go:564: No course data available, skipping test: record not found
--- SKIP: TestExceptionFlowE2EReject (0.01s)
=== RUN   TestNotificationQueueService_PushNotification
2026-02-07T15:04:51.428+0800	[34mINFO[0m	Notification queued	{"type": "exception_submit", "recipient_id": 1, "recipient_type": "ADMIN"}
--- PASS: TestNotificationQueueService_PushNotification (0.01s)
=== RUN   TestNotificationQueueService_ProcessQueue
    exception_notification_test.go:99: ProcessQueue 雿輻 BRPop ??憛?閮剛??箄???worker ?瑁?嚗??拙??桀?皜祈岫
--- SKIP: TestNotificationQueueService_ProcessQueue (0.00s)
=== RUN   TestNotificationQueueService_NotifyExceptionSubmitted
--- PASS: TestNotificationQueueService_NotifyExceptionSubmitted (0.01s)
=== RUN   TestNotificationQueueService_NotifyWelcomeAdmin
--- PASS: TestNotificationQueueService_NotifyWelcomeAdmin (0.00s)
=== RUN   TestLineWebhookHandler
--- PASS: TestLineWebhookHandler (0.00s)
=== RUN   TestFlexMessageJSON
--- PASS: TestFlexMessageJSON (0.00s)
=== RUN   TestExportService_CourseCreation
--- PASS: TestExportService_CourseCreation (0.07s)
=== RUN   TestExportService_DateRange
--- PASS: TestExportService_DateRange (0.00s)
=== RUN   TestIntegration_FullFlow
    integration_full_flow_test.go:8: Skipping - requires proper datetime handling in SQLite
--- SKIP: TestIntegration_FullFlow (0.00s)
=== RUN   TestIntegration_CenterAdminFullWorkflow
    integration_full_workflow_test.go:139: Created center: ID=4, Name=Full Test Center 1770447891909125600
    integration_full_workflow_test.go:155: Created admin user: ID=2
=== RUN   TestIntegration_CenterAdminFullWorkflow/Step1_AdminLogin
    integration_full_workflow_test.go:199: Admin login successful, token: eyJhbGciOiJIUzI1NiIsInR5cCI6Ik...
=== RUN   TestIntegration_CenterAdminFullWorkflow/Step2_CreateRoom
2026-02-07T15:04:52.044+0800	[35mDEBUG[0m	invalidating room list cache	{"component": "CacheService", "center_id": 4, "pattern": "list:4"}
2026-02-07T15:04:52.044+0800	[35mDEBUG[0m	deleting cache by pattern	{"component": "CacheService", "pattern": "timeledger:room:list:4"}
2026-02-07T15:04:52.050+0800	[35mDEBUG[0m	found keys to delete	{"component": "CacheService", "keys": [], "count": 0}
    integration_full_workflow_test.go:232: Created room: ID=1
=== RUN   TestIntegration_CenterAdminFullWorkflow/Step3_CreateCourse
2026-02-07T15:04:52.104+0800	[35mDEBUG[0m	invalidating course list cache	{"component": "CacheService", "center_id": 4, "pattern": "list:4"}
2026-02-07T15:04:52.105+0800	[35mDEBUG[0m	deleting cache by pattern	{"component": "CacheService", "pattern": "timeledger:course:list:4"}
2026-02-07T15:04:52.105+0800	[35mDEBUG[0m	found keys to delete	{"component": "CacheService", "keys": [], "count": 0}
    integration_full_workflow_test.go:271: Created course: ID=3
=== RUN   TestIntegration_CenterAdminFullWorkflow/Step4_GetRoomsAndCourses
2026-02-07T15:04:52.107+0800	[35mDEBUG[0m	caching room list	{"component": "CacheService", "center_id": 4, "count": 1}
2026-02-07T15:04:52.107+0800	[35mDEBUG[0m	course cache miss or parse error	{"component": "CacheService", "center_id": 4, "error": "cache miss"}
2026-02-07T15:04:52.107+0800	[35mDEBUG[0m	course cache miss or error, fetching from database	{"component": "CourseService", "center_id": 4, "cache_error": null}
2026-02-07T15:04:52.108+0800	[35mDEBUG[0m	caching course list	{"component": "CacheService", "center_id": 4, "count": 1}
    integration_full_workflow_test.go:298: Successfully retrieved rooms and courses

2026/02/07 15:04:52 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[260.410ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:04:52 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[464.320ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:04:53 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[325.936ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:04:53 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[418.404ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:04:53 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[393.902ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:04:54 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[257.065ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:04:54 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[381.565ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:04:54 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[374.419ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:04:55 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[316.901ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:04:55 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[230.037ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:04:55 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[251.077ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:04:56 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[340.024ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:04:56 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[311.805ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:04:56 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[347.962ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:04:57 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[265.322ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- PASS: TestIntegration_CenterAdminFullWorkflow (5.56s)
    --- PASS: TestIntegration_CenterAdminFullWorkflow/Step1_AdminLogin (0.05s)
    --- PASS: TestIntegration_CenterAdminFullWorkflow/Step2_CreateRoom (0.07s)
    --- PASS: TestIntegration_CenterAdminFullWorkflow/Step3_CreateCourse (0.03s)
    --- PASS: TestIntegration_CenterAdminFullWorkflow/Step4_GetRoomsAndCourses (0.00s)
=== RUN   TestIntegration_TeacherFullWorkflow
    integration_full_workflow_test.go:335: Created teacher: ID=1, Name=Test Teacher
    integration_full_workflow_test.go:387: Created schedule rule: ID=1
=== RUN   TestIntegration_TeacherFullWorkflow/Step1_GetProfile
    integration_full_workflow_test.go:411: Successfully retrieved teacher profile
=== RUN   TestIntegration_TeacherFullWorkflow/Step2_GetSchedule
    integration_full_workflow_test.go:428: Successfully retrieved teacher schedule
=== RUN   TestIntegration_TeacherFullWorkflow/Step3_GetExceptions
    integration_full_workflow_test.go:443: Successfully retrieved teacher exceptions

2026/02/07 15:04:57 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[276.432ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:04:58 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[696.251ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:04:58 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[290.488ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:04:59 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[459.002ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:04:59 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[318.940ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:04:59 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[324.446ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:05:00 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[413.471ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:05:00 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[343.565ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:05:01 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[308.114ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:05:01 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[214.865ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:05:01 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[243.849ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:05:01 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[312.187ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:05:02 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[342.162ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:05:02 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[330.028ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:05:02 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[225.472ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- PASS: TestIntegration_TeacherFullWorkflow (5.65s)
    --- PASS: TestIntegration_TeacherFullWorkflow/Step1_GetProfile (0.00s)
    --- PASS: TestIntegration_TeacherFullWorkflow/Step2_GetSchedule (0.08s)
    --- PASS: TestIntegration_TeacherFullWorkflow/Step3_GetExceptions (0.00s)
=== RUN   TestIntegration_ScheduleRuleCreation

2026/02/07 15:05:03 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:45 [33mSLOW SQL >= 200ms
[0m[31;1m[339.168ms] [33m[rows:-][35m SELECT * FROM `center_invitations` LIMIT 1[0m
=== RUN   TestIntegration_ScheduleRuleCreation/Step1_CreateScheduleRule

2026/02/07 15:05:03 [31;1mD:/project/TimeLedger/app/services/scheduling_validation.go:65 [35;1mError 1525 (HY000): Incorrect DATE value: ''
[0m[33m[1.070ms] [34;1m[rows:0][0m SELECT * FROM `schedule_rules` WHERE center_id = 1 AND weekday = 2 AND start_time < '00:00:00' AND end_time > '00:00:00' AND JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.start_date')) <= '0001-01-01' AND ((JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) >= '0001-01-01' OR JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) = '0001-01-01' OR JSON_EXTRACT(effective_range, '$.end_date') IS NULL OR JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) = '')) AND teacher_id = 1 AND `schedule_rules`.`deleted_at` IS NULL
    integration_full_workflow_test.go:548: Expected status 200, got 500. Body: {"code":120001,"message":"Database operation failed","datas":null}
=== RUN   TestIntegration_ScheduleRuleCreation/Step2_GetRules
    integration_full_workflow_test.go:572: Successfully retrieved schedule rules
=== RUN   TestIntegration_ScheduleRuleCreation/Step3_ExpandRules
    integration_full_workflow_test.go:597: Successfully expanded schedule rules

2026/02/07 15:05:03 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[303.177ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:05:04 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[569.671ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:05:04 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[275.339ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:05:05 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[501.259ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:05:05 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[328.559ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:05:05 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[272.111ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:05:06 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[463.961ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:05:06 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[292.181ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:05:06 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[330.840ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:05:07 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[292.122ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:05:07 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[243.632ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:05:07 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[315.529ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:05:08 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[395.476ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:05:08 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[289.530ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:05:08 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[238.758ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- FAIL: TestIntegration_ScheduleRuleCreation (5.94s)
    --- FAIL: TestIntegration_ScheduleRuleCreation/Step1_CreateScheduleRule (0.00s)
    --- PASS: TestIntegration_ScheduleRuleCreation/Step2_GetRules (0.00s)
    --- PASS: TestIntegration_ScheduleRuleCreation/Step3_ExpandRules (0.00s)
=== RUN   TestIntegration_ResourceToggleAndInvitationStats

2026/02/07 15:05:09 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:45 [33mSLOW SQL >= 200ms
[0m[31;1m[285.202ms] [33m[rows:-][35m SELECT * FROM `center_invitations` LIMIT 1[0m
    integration_full_workflow_test.go:651: Toggle test course created: ID=2
=== RUN   TestIntegration_ResourceToggleAndInvitationStats/Step1_GetActiveRooms
    integration_full_workflow_test.go:703: Successfully retrieved active rooms
=== RUN   TestIntegration_ResourceToggleAndInvitationStats/Step2_ToggleCourseActive
2026-02-07T15:05:09.426+0800	[35mDEBUG[0m	invalidating course list cache	{"component": "CacheService", "center_id": 1, "pattern": "list:1"}
2026-02-07T15:05:09.426+0800	[35mDEBUG[0m	deleting cache by pattern	{"component": "CacheService", "pattern": "timeledger:course:list:1"}
2026-02-07T15:05:09.431+0800	[35mDEBUG[0m	found keys to delete	{"component": "CacheService", "keys": [], "count": 0}
    integration_full_workflow_test.go:729: Successfully toggled course active status
=== RUN   TestIntegration_ResourceToggleAndInvitationStats/Step3_GetInvitationStats
    integration_full_workflow_test.go:742: Expected status 200, got 400. Body: {"code":400,"message":"parameter 'id' is required","datas":null}
=== RUN   TestIntegration_ResourceToggleAndInvitationStats/Step4_GetInvitations
    integration_full_workflow_test.go:774: Expected status 200, got 400. Body: {"code":400,"message":"parameter 'id' is required","datas":null}

2026/02/07 15:05:09 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[249.373ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:05:10 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[520.261ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:05:10 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[273.704ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:05:10 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[405.186ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:05:11 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[379.711ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:05:11 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[252.992ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:05:11 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[396.880ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:05:12 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[315.362ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:05:12 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[259.982ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:05:12 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[205.408ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:05:13 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[332.312ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:05:13 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[259.795ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:05:13 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[308.652ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:05:13 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[372.375ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:05:14 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[236.502ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- FAIL: TestIntegration_ResourceToggleAndInvitationStats (5.55s)
    --- PASS: TestIntegration_ResourceToggleAndInvitationStats/Step1_GetActiveRooms (0.00s)
    --- PASS: TestIntegration_ResourceToggleAndInvitationStats/Step2_ToggleCourseActive (0.05s)
    --- FAIL: TestIntegration_ResourceToggleAndInvitationStats/Step3_GetInvitationStats (0.00s)
    --- FAIL: TestIntegration_ResourceToggleAndInvitationStats/Step4_GetInvitations (0.00s)
=== RUN   TestIntegration_ValidationAndException
=== RUN   TestIntegration_ValidationAndException/Step1_CheckOverlap_Empty

2026/02/07 15:05:14 [31;1mD:/project/TimeLedger/app/services/scheduling_validation.go:65 [35;1mError 1525 (HY000): Incorrect DATE value: ''
[0m[33m[2.047ms] [34;1m[rows:0][0m SELECT * FROM `schedule_rules` WHERE center_id = 1 AND weekday = 6 AND start_time < '16:05:14' AND end_time > '15:05:14' AND JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.start_date')) <= '2026-02-07' AND ((JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) >= '2026-02-07' OR JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) = '0001-01-01' OR JSON_EXTRACT(effective_range, '$.end_date') IS NULL OR JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) = '')) AND teacher_id = 1 AND `schedule_rules`.`deleted_at` IS NULL
    integration_full_workflow_test.go:897: Expected status 200, got 500. Body: {"code":10001,"message":"Error 1525 (HY000): Incorrect DATE value: ''","datas":null}
=== RUN   TestIntegration_ValidationAndException/Step2_ValidateFull

2026/02/07 15:05:14 [31;1mD:/project/TimeLedger/app/services/scheduling_validation.go:65 [35;1mError 1525 (HY000): Incorrect DATE value: ''
[0m[33m[1.087ms] [34;1m[rows:0][0m SELECT * FROM `schedule_rules` WHERE center_id = 1 AND weekday = 6 AND start_time < '16:05:14' AND end_time > '15:05:14' AND JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.start_date')) <= '2026-02-07' AND ((JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) >= '2026-02-07' OR JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) = '0001-01-01' OR JSON_EXTRACT(effective_range, '$.end_date') IS NULL OR JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) = '')) AND teacher_id = 1 AND `schedule_rules`.`deleted_at` IS NULL
    integration_full_workflow_test.go:927: Expected status 200, got 500. Body: {"code":10001,"message":"Error 1525 (HY000): Incorrect DATE value: ''","datas":null}
=== RUN   TestIntegration_ValidationAndException/Step3_DetectPhaseTransitions
    integration_full_workflow_test.go:955: Expected status 200, got 400. Body: {"code":400,"message":"invalid request body: Key: 'DetectPhaseTransitionsRequest.StartDate' Error:Field validation for 'StartDate' failed on the 'date_format' tag\nKey: 'DetectPhaseTransitionsRequest.EndDate' Error:Field validation for 'EndDate' failed on the 'date_format' tag","datas":null}
=== RUN   TestIntegration_ValidationAndException/Step4_CheckRuleLockStatus
    integration_full_workflow_test.go:982: Successfully checked rule lock status

2026/02/07 15:05:15 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[360.564ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:05:15 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[490.869ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:05:15 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[297.587ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:05:16 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[492.970ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:05:16 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[345.682ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:05:17 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[353.568ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:05:17 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[364.635ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:05:17 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[283.663ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:05:18 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[391.885ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:05:18 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[224.460ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:05:18 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[249.099ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:05:18 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[276.930ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:05:19 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[328.649ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:05:19 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[325.360ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:05:19 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[223.241ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- FAIL: TestIntegration_ValidationAndException (5.50s)
    --- FAIL: TestIntegration_ValidationAndException/Step1_CheckOverlap_Empty (0.00s)
    --- FAIL: TestIntegration_ValidationAndException/Step2_ValidateFull (0.00s)
    --- FAIL: TestIntegration_ValidationAndException/Step3_DetectPhaseTransitions (0.00s)
    --- PASS: TestIntegration_ValidationAndException/Step4_CheckRuleLockStatus (0.00s)
=== RUN   TestIntegration_InvitationFlow

2026/02/07 15:05:20 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:45 [33mSLOW SQL >= 200ms
[0m[31;1m[323.782ms] [33m[rows:-][35m SELECT * FROM `center_invitations` LIMIT 1[0m
=== RUN   TestIntegration_InvitationFlow/Step1_CreateInvitation
    integration_full_workflow_test.go:1046: Created invitation with token: 1cb9752671cf6aa1b10f...
=== RUN   TestIntegration_InvitationFlow/Step2_GetInvitations
    integration_full_workflow_test.go:1062: Expected status 200, got 400. Body: {"code":400,"message":"parameter 'id' is required","datas":null}

2026/02/07 15:05:20 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[301.858ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:05:21 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[585.545ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:05:21 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[279.109ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:05:22 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[497.046ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:05:22 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[363.166ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:05:22 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[260.329ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:05:23 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[451.250ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:05:23 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[324.663ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:05:23 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[319.179ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:05:24 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[329.252ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:05:24 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[250.741ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:05:24 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[295.782ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:05:24 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[319.808ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:05:25 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[359.317ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:05:25 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[222.627ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- FAIL: TestIntegration_InvitationFlow (5.82s)
    --- PASS: TestIntegration_InvitationFlow/Step1_CreateInvitation (0.05s)
    --- FAIL: TestIntegration_InvitationFlow/Step2_GetInvitations (0.00s)
=== RUN   TestIntegration_ExceptionReview

2026/02/07 15:05:25 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:45 [33mSLOW SQL >= 200ms
[0m[31;1m[205.921ms] [33m[rows:-][35m SELECT * FROM `center_invitations` LIMIT 1[0m
=== RUN   TestIntegration_ExceptionReview/Step1_CreateExceptionRequest
2026-02-07T15:05:26.185+0800	[35mDEBUG[0m	deleting cache by pattern	{"component": "CacheService", "pattern": "timeledger:schedule:schedule:expand:center:1:*"}
2026-02-07T15:05:26.190+0800	[35mDEBUG[0m	found keys to delete	{"component": "CacheService", "keys": [], "count": 0}
2026-02-07T15:05:26.190+0800	[35mDEBUG[0m	deleting cache by pattern	{"component": "CacheService", "pattern": "timeledger:schedule:schedule:expand:teacher:1:center:1:*"}
2026-02-07T15:05:26.190+0800	[35mDEBUG[0m	found keys to delete	{"component": "CacheService", "keys": [], "count": 0}
2026-02-07T15:05:26.190+0800	[34mINFO[0m	exception-related cache invalidated	{"component": "ScheduleExceptionService", "center_id": 1, "exception_id": 1, "rule_id": 1, "teacher_id": 1}
    integration_full_workflow_test.go:1195: Successfully created exception request
=== RUN   TestIntegration_ExceptionReview/Step2_GetExceptions
    integration_full_workflow_test.go:1211: Successfully retrieved exceptions
=== RUN   TestIntegration_ExceptionReview/Step3_ReviewException_Approve

2026/02/07 15:05:26 [31;1mD:/project/TimeLedger/app/services/scheduling_validation.go:65 [35;1mError 1525 (HY000): Incorrect DATE value: ''
[0m[33m[1.044ms] [34;1m[rows:0][0m SELECT * FROM `schedule_rules` WHERE center_id = 1 AND weekday = 5 AND start_time < '06:05:26' AND end_time > '05:05:26' AND JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.start_date')) <= '2026-02-13' AND ((JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) >= '2026-02-13' OR JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) = '0001-01-01' OR JSON_EXTRACT(effective_range, '$.end_date') IS NULL OR JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) = '')) AND `schedule_rules`.`deleted_at` IS NULL
    integration_full_workflow_test.go:1249: Expected status 200, got 500. Body: {"code":10001,"message":"validation failed: Error 1525 (HY000): Incorrect DATE value: ''","datas":null}
=== RUN   TestIntegration_ExceptionReview/Step4_ReviewException_Reject
2026-02-07T15:05:26.451+0800	[35mDEBUG[0m	deleting cache by pattern	{"component": "CacheService", "pattern": "timeledger:schedule:schedule:expand:center:1:*"}
2026-02-07T15:05:26.451+0800	[35mDEBUG[0m	found keys to delete	{"component": "CacheService", "keys": [], "count": 0}
2026-02-07T15:05:26.451+0800	[35mDEBUG[0m	deleting cache by pattern	{"component": "CacheService", "pattern": "timeledger:schedule:schedule:expand:teacher:1:center:1:*"}
2026-02-07T15:05:26.451+0800	[35mDEBUG[0m	found keys to delete	{"component": "CacheService", "keys": [], "count": 0}
2026-02-07T15:05:26.451+0800	[34mINFO[0m	exception-related cache invalidated	{"component": "ScheduleExceptionService", "center_id": 1, "exception_id": 3, "rule_id": 1, "teacher_id": 1}
    integration_full_workflow_test.go:1287: Successfully rejected exception request
=== RUN   TestIntegration_ExceptionReview/Step5_RevokeException
2026-02-07T15:05:26.531+0800	[35mDEBUG[0m	deleting cache by pattern	{"component": "CacheService", "pattern": "timeledger:schedule:schedule:expand:center:1:*"}
2026-02-07T15:05:26.531+0800	[35mDEBUG[0m	found keys to delete	{"component": "CacheService", "keys": [], "count": 0}
2026-02-07T15:05:26.531+0800	[35mDEBUG[0m	deleting cache by pattern	{"component": "CacheService", "pattern": "timeledger:schedule:schedule:expand:teacher:1:center:1:*"}
2026-02-07T15:05:26.531+0800	[35mDEBUG[0m	found keys to delete	{"component": "CacheService", "keys": [], "count": 0}
2026-02-07T15:05:26.531+0800	[34mINFO[0m	exception-related cache invalidated	{"component": "ScheduleExceptionService", "center_id": 1, "exception_id": 4, "rule_id": 1, "teacher_id": 1}
    integration_full_workflow_test.go:1321: Successfully revoked exception request

2026/02/07 15:05:26 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[261.386ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:05:27 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[557.820ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:05:27 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[273.295ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:05:28 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[459.698ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:05:28 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[312.574ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:05:28 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[266.505ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:05:29 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[429.586ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:05:29 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[234.287ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:05:29 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[219.599ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:05:29 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[215.788ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:05:30 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[378.156ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:05:30 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[300.909ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:05:30 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[263.768ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:05:31 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[396.306ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:05:31 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[248.789ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- FAIL: TestIntegration_ExceptionReview (5.85s)
    --- PASS: TestIntegration_ExceptionReview/Step1_CreateExceptionRequest (0.05s)
    --- PASS: TestIntegration_ExceptionReview/Step2_GetExceptions (0.00s)
    --- FAIL: TestIntegration_ExceptionReview/Step3_ReviewException_Approve (0.03s)
    --- PASS: TestIntegration_ExceptionReview/Step4_ReviewException_Reject (0.21s)
    --- PASS: TestIntegration_ExceptionReview/Step5_RevokeException (0.10s)
=== RUN   TestIntegration_RecurrenceEditing
=== RUN   TestIntegration_RecurrenceEditing/Step1_PreviewAffectedSessions
    integration_full_workflow_test.go:1447: Preview recurrence edit completed
=== RUN   TestIntegration_RecurrenceEditing/Step2_EditRecurringSchedule_Single
    integration_full_workflow_test.go:1475: Edit recurring schedule (single) completed
=== RUN   TestIntegration_RecurrenceEditing/Step3_EditRecurringSchedule_Future
    integration_full_workflow_test.go:1503: Edit recurring schedule (future) completed
=== RUN   TestIntegration_RecurrenceEditing/Step4_DeleteRecurringSchedule
    integration_full_workflow_test.go:1527: Delete recurring schedule completed

2026/02/07 15:05:32 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[336.481ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:05:32 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[476.453ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:05:32 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[336.185ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:05:33 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[461.075ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:05:33 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[284.297ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:05:34 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[345.983ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:05:34 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[386.584ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:05:34 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[273.049ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:05:35 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[419.034ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:05:35 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[324.150ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:05:35 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[360.130ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:05:36 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[329.386ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:05:36 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[305.863ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:05:36 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[247.305ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- PASS: TestIntegration_RecurrenceEditing (5.49s)
    --- PASS: TestIntegration_RecurrenceEditing/Step1_PreviewAffectedSessions (0.00s)
    --- PASS: TestIntegration_RecurrenceEditing/Step2_EditRecurringSchedule_Single (0.00s)
    --- PASS: TestIntegration_RecurrenceEditing/Step3_EditRecurringSchedule_Future (0.00s)
    --- PASS: TestIntegration_RecurrenceEditing/Step4_DeleteRecurringSchedule (0.00s)
=== RUN   TestIntegration_OfferingManagement
=== RUN   TestIntegration_OfferingManagement/Step1_CreateOffering
    integration_full_workflow_test.go:1593: Expected status 200, got 201. Body: {"code":0,"message":"Created","datas":{"id":1,"center_id":1,"course_id":1,"name":"Offering Test Course","default_room_id":null,"default_teacher_id":null,"allow_buffer_override":false,"is_active":true,"created_at":"2026-02-07T15:05:37.1826548+08:00","updated_at":"2026-02-07T15:05:37.1826548+08:00"}}
=== RUN   TestIntegration_OfferingManagement/Step2_GetOfferings
    integration_full_workflow_test.go:1618: Successfully retrieved offerings
=== RUN   TestIntegration_OfferingManagement/Step3_ToggleOfferingActive
    integration_full_workflow_test.go:1651: Successfully toggled offering active status
=== RUN   TestIntegration_OfferingManagement/Step4_CopyOffering
    integration_full_workflow_test.go:1682: Expected status 200, got 400. Body: {"code":400,"message":"parameter 'offering_id' is required","datas":null}
=== RUN   TestIntegration_OfferingManagement/Step5_DeleteOffering
    integration_full_workflow_test.go:1712: Successfully deleted offering

2026/02/07 15:05:37 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[268.656ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:05:38 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[580.670ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:05:38 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[288.448ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:05:38 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[458.380ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:05:39 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[370.611ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:05:39 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[240.766ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:05:39 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[435.483ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:05:40 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[345.445ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:05:40 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[282.214ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:05:40 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[220.887ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:05:41 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[352.722ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:05:41 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[236.809ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:05:41 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[307.709ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:05:42 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[410.623ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:05:42 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[210.358ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- FAIL: TestIntegration_OfferingManagement (5.47s)
    --- FAIL: TestIntegration_OfferingManagement/Step1_CreateOffering (0.02s)
    --- PASS: TestIntegration_OfferingManagement/Step2_GetOfferings (0.00s)
    --- PASS: TestIntegration_OfferingManagement/Step3_ToggleOfferingActive (0.05s)
    --- FAIL: TestIntegration_OfferingManagement/Step4_CopyOffering (0.02s)
    --- PASS: TestIntegration_OfferingManagement/Step5_DeleteOffering (0.06s)
=== RUN   TestIntegration_HolidayManagement

2026/02/07 15:05:42 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:45 [33mSLOW SQL >= 200ms
[0m[31;1m[336.526ms] [33m[rows:-][35m SELECT * FROM `center_invitations` LIMIT 1[0m
=== RUN   TestIntegration_HolidayManagement/Step1_CreateHoliday
    integration_full_workflow_test.go:1772: Successfully created holiday
=== RUN   TestIntegration_HolidayManagement/Step2_GetHolidays
    integration_full_workflow_test.go:1789: Successfully retrieved holidays
=== RUN   TestIntegration_HolidayManagement/Step3_BulkCreateHolidays
    integration_full_workflow_test.go:1825: Successfully bulk created holidays

2026/02/07 15:05:43 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[291.854ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:05:43 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[487.983ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:05:44 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[344.563ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:05:44 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[431.514ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:05:45 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[393.453ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:05:45 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[262.856ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:05:45 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[370.737ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:05:46 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[388.732ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:05:46 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[284.409ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:05:46 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[243.326ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:05:47 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[394.177ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:05:47 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[288.072ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:05:47 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[290.454ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:05:48 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[315.796ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- PASS: TestIntegration_HolidayManagement (5.76s)
    --- PASS: TestIntegration_HolidayManagement/Step1_CreateHoliday (0.04s)
    --- PASS: TestIntegration_HolidayManagement/Step2_GetHolidays (0.00s)
    --- PASS: TestIntegration_HolidayManagement/Step3_BulkCreateHolidays (0.06s)
=== RUN   TestIntegration_TemplateManagement
=== RUN   TestIntegration_TemplateManagement/Step1_CreateTemplate
    integration_full_workflow_test.go:1894: Expected status 200, got 201. Body: {"code":0,"message":"Created","datas":{"id":14,"center_id":1,"name":"Weekly Template 1770447948471191200","row_type":"ROOM","is_active":true,"created_at":"2026-02-07T15:05:48.5108684+08:00","updated_at":"2026-02-07T15:05:48.5108684+08:00"}}
=== RUN   TestIntegration_TemplateManagement/Step2_GetTemplates
    integration_full_workflow_test.go:1913: Successfully retrieved templates
=== RUN   TestIntegration_TemplateManagement/Step3_UpdateTemplate

2026/02/07 15:05:48 [31;1mD:/project/TimeLedger/app/repositories/generic.go:269 [35;1mError 1292 (22007): Incorrect datetime value: '0000-00-00' for column 'created_at' at row 1
[0m[33m[2.665ms] [34;1m[rows:0][0m UPDATE `timetable_templates` SET `center_id`=1,`name`='Updated Template 1770447948471191200',`row_type`='',`is_active`=false,`created_at`='0000-00-00 00:00:00',`updated_at`='2026-02-07 15:05:48.577',`deleted_at`=NULL WHERE `timetable_templates`.`deleted_at` IS NULL AND `id` = 15
    integration_full_workflow_test.go:1944: Expected status 200, got 500. Body: {"code":10001,"message":"Failed to update template","datas":null}
=== RUN   TestIntegration_TemplateManagement/Step4_GetTemplateCells
    integration_full_workflow_test.go:1972: Successfully retrieved template cells
=== RUN   TestIntegration_TemplateManagement/Step5_CreateTemplateCells
    integration_full_workflow_test.go:2013: Expected status 200, got 201. Body: {"code":0,"message":"Created","datas":[{"id":9,"template_id":17,"row_no":1,"col_no":1,"start_time":"14:00","end_time":"15:00","room_id":null,"teacher_id":null,"is_active":true,"sort_order":0,"created_at":"2026-02-07T15:05:48.6258079+08:00","updated_at":"2026-02-07T15:05:48.6258079+08:00"},{"id":10,"template_id":17,"row_no":2,"col_no":1,"start_time":"15:00","end_time":"16:00","room_id":null,"teacher_id":null,"is_active":true,"sort_order":0,"created_at":"2026-02-07T15:05:48.6258079+08:00","updated_at":"2026-02-07T15:05:48.6258079+08:00"}]}
=== RUN   TestIntegration_TemplateManagement/Step6_DeleteTemplate
    integration_full_workflow_test.go:2041: Successfully deleted template

2026/02/07 15:05:49 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[366.784ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:05:49 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[469.047ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:05:49 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[371.536ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:05:50 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[443.741ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:05:50 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[300.436ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:05:51 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[334.947ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:05:51 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[354.409ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:05:51 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[252.871ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:05:52 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[357.192ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:05:52 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[219.383ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:05:52 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[244.198ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:05:52 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[280.323ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:05:53 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[401.645ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:05:53 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[294.137ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:05:53 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[238.235ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- FAIL: TestIntegration_TemplateManagement (5.59s)
    --- FAIL: TestIntegration_TemplateManagement/Step1_CreateTemplate (0.05s)
    --- PASS: TestIntegration_TemplateManagement/Step2_GetTemplates (0.00s)
    --- FAIL: TestIntegration_TemplateManagement/Step3_UpdateTemplate (0.02s)
    --- PASS: TestIntegration_TemplateManagement/Step4_GetTemplateCells (0.02s)
    --- FAIL: TestIntegration_TemplateManagement/Step5_CreateTemplateCells (0.09s)
    --- PASS: TestIntegration_TemplateManagement/Step6_DeleteTemplate (0.07s)
=== RUN   TestIntegration_ExportFunctionality

2026/02/07 15:05:54 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:45 [33mSLOW SQL >= 200ms
[0m[31;1m[221.115ms] [33m[rows:-][35m SELECT * FROM `center_invitations` LIMIT 1[0m
=== RUN   TestIntegration_ExportFunctionality/Step1_ExportScheduleCSV
    integration_full_workflow_test.go:2177: Successfully exported schedule to CSV
=== RUN   TestIntegration_ExportFunctionality/Step2_ExportTeachersCSV
    integration_full_workflow_test.go:2194: Successfully exported teachers to CSV
=== RUN   TestIntegration_ExportFunctionality/Step3_ExportExceptionsCSV
    integration_full_workflow_test.go:2213: Successfully exported exceptions to CSV

2026/02/07 15:05:54 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[249.410ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:05:55 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[562.762ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:05:55 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[278.072ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:05:55 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[402.726ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:05:56 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[425.168ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:05:56 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[255.843ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:05:56 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[407.114ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:05:57 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[378.492ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:05:57 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[293.378ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:05:57 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[230.488ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:05:58 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[340.053ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:05:58 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[267.522ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:05:58 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[293.483ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:05:59 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[414.899ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:05:59 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[206.929ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- PASS: TestIntegration_ExportFunctionality (5.65s)
    --- PASS: TestIntegration_ExportFunctionality/Step1_ExportScheduleCSV (0.01s)
    --- PASS: TestIntegration_ExportFunctionality/Step2_ExportTeachersCSV (0.00s)
    --- PASS: TestIntegration_ExportFunctionality/Step3_ExportExceptionsCSV (0.00s)
=== RUN   TestIntegration_AuthRefreshAndLogout
=== RUN   TestIntegration_AuthRefreshAndLogout/Step1_RefreshToken
    integration_full_workflow_test.go:2262: Refresh token test completed
=== RUN   TestIntegration_AuthRefreshAndLogout/Step2_Logout
    integration_full_workflow_test.go:2281: Logout test completed

2026/02/07 15:06:00 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[350.611ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:06:00 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[478.691ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:06:00 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[311.499ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:06:01 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[461.315ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:06:01 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[328.710ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:06:02 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[325.297ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:06:02 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[421.867ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:06:02 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[307.333ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:06:03 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[406.848ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:06:03 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[218.002ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:06:03 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[219.312ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:06:03 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[359.449ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:06:04 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[372.235ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:06:04 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[260.295ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:06:04 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[207.321ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- PASS: TestIntegration_AuthRefreshAndLogout (5.47s)
    --- PASS: TestIntegration_AuthRefreshAndLogout/Step1_RefreshToken (0.00s)
    --- PASS: TestIntegration_AuthRefreshAndLogout/Step2_Logout (0.00s)
=== RUN   TestIntegration_AdminResourceCentersAndDelete

2026/02/07 15:06:05 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:45 [33mSLOW SQL >= 200ms
[0m[31;1m[273.752ms] [33m[rows:-][35m SELECT * FROM `center_invitations` LIMIT 1[0m
=== RUN   TestIntegration_AdminResourceCentersAndDelete/Step1_GetCenters
    integration_full_workflow_test.go:2328: Successfully retrieved centers
=== RUN   TestIntegration_AdminResourceCentersAndDelete/Step2_CreateCenter
    integration_full_workflow_test.go:2348: Expected status 200, got 201. Body: {"code":0,"message":"Created","datas":{"id":2,"name":"New Center 1770447965328210000","plan_level":"STARTER","settings":{"allow_public_register":false,"default_language":"zh-TW","exception_lead_days":0},"created_at":"2026-02-07T15:06:05.3856743+08:00"}}
=== RUN   TestIntegration_AdminResourceCentersAndDelete/Step3_DeleteCourse
2026-02-07T15:06:05.474+0800	[35mDEBUG[0m	invalidating course list cache	{"component": "CacheService", "center_id": 1, "pattern": "list:1"}
2026-02-07T15:06:05.474+0800	[35mDEBUG[0m	deleting cache by pattern	{"component": "CacheService", "pattern": "timeledger:course:list:1"}
2026-02-07T15:06:05.480+0800	[35mDEBUG[0m	found keys to delete	{"component": "CacheService", "keys": [], "count": 0}
    integration_full_workflow_test.go:2380: Successfully deleted course
=== RUN   TestIntegration_AdminResourceCentersAndDelete/Step4_DeleteHoliday
    integration_full_workflow_test.go:2406: Successfully deleted holiday

2026/02/07 15:06:05 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[274.065ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:06:06 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[577.947ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:06:06 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[252.374ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:06:07 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[516.676ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:06:07 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[325.396ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:06:07 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[258.234ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:06:08 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[474.274ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:06:08 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[271.239ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:06:08 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[245.948ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:06:09 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[335.373ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:06:09 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[333.189ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:06:09 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[274.380ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:06:10 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[348.061ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:06:10 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[338.591ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:06:10 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[215.190ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- FAIL: TestIntegration_AdminResourceCentersAndDelete (5.76s)
    --- PASS: TestIntegration_AdminResourceCentersAndDelete/Step1_GetCenters (0.00s)
    --- FAIL: TestIntegration_AdminResourceCentersAndDelete/Step2_CreateCenter (0.04s)
    --- PASS: TestIntegration_AdminResourceCentersAndDelete/Step3_DeleteCourse (0.05s)
    --- PASS: TestIntegration_AdminResourceCentersAndDelete/Step4_DeleteHoliday (0.04s)
=== RUN   TestIntegration_SchedulingBufferAndMore
=== RUN   TestIntegration_SchedulingBufferAndMore/Step1_CheckTeacherBuffer
    integration_full_workflow_test.go:2481: Check teacher buffer completed
=== RUN   TestIntegration_SchedulingBufferAndMore/Step2_CheckRoomBuffer
    integration_full_workflow_test.go:2507: Check room buffer completed
=== RUN   TestIntegration_SchedulingBufferAndMore/Step3_GetExceptionsByRule

2026/02/07 15:06:10 [31;1mD:/project/TimeLedger/app/repositories/generic.go:241 [35;1mError 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`timeledger`.`schedule_rules`, CONSTRAINT `fk_schedule_rules_offering` FOREIGN KEY (`offering_id`) REFERENCES `offerings` (`id`))
[0m[33m[22.280ms] [34;1m[rows:0][0m INSERT INTO `schedule_rules` (`center_id`,`offering_id`,`teacher_id`,`room_id`,`name`,`weekday`,`start_time`,`end_time`,`duration`,`is_cross_day`,`skip_holiday`,`effective_range`,`lock_at`,`created_at`,`updated_at`,`deleted_at`) VALUES (1,0,NULL,0,'',1,'10:00:00','11:00:00',60,false,true,'{"start_date":"0001-01-01 00:00:00","end_date":"0001-01-01 00:00:00"}',NULL,'2026-02-07 15:06:10.8','2026-02-07 15:06:10.8',NULL)
    integration_full_workflow_test.go:2533: Expected status 200, got 400. Body: {"code":400,"message":"parameter 'ruleId' must be greater than 0","datas":null}
=== RUN   TestIntegration_SchedulingBufferAndMore/Step4_GetExceptionsByDateRange
    integration_full_workflow_test.go:2556: Get exceptions by date range completed
=== RUN   TestIntegration_SchedulingBufferAndMore/Step5_DeleteRule

2026/02/07 15:06:10 [31;1mD:/project/TimeLedger/app/repositories/generic.go:241 [35;1mError 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`timeledger`.`schedule_rules`, CONSTRAINT `fk_schedule_rules_offering` FOREIGN KEY (`offering_id`) REFERENCES `offerings` (`id`))
[0m[33m[41.149ms] [34;1m[rows:0][0m INSERT INTO `schedule_rules` (`center_id`,`offering_id`,`teacher_id`,`room_id`,`name`,`weekday`,`start_time`,`end_time`,`duration`,`is_cross_day`,`skip_holiday`,`effective_range`,`lock_at`,`created_at`,`updated_at`,`deleted_at`) VALUES (1,0,NULL,0,'',3,'14:00:00','15:00:00',60,false,true,'{"start_date":"0001-01-01 00:00:00","end_date":"0001-01-01 00:00:00"}',NULL,'2026-02-07 15:06:10.8','2026-02-07 15:06:10.8',NULL)
    integration_full_workflow_test.go:2582: Expected status 200, got 400. Body: {"code":400,"message":"parameter 'ruleId' must be greater than 0","datas":null}

2026/02/07 15:06:11 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[304.517ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:06:11 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[484.722ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:06:12 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[371.151ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:06:12 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[400.664ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:06:12 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[305.058ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:06:13 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[327.840ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:06:13 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[390.986ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:06:13 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[343.327ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:06:14 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[371.284ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:06:14 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[243.876ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:06:14 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[252.558ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:06:15 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[385.764ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:06:15 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[221.104ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:06:15 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[259.538ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:06:15 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[226.355ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- FAIL: TestIntegration_SchedulingBufferAndMore (5.31s)
    --- PASS: TestIntegration_SchedulingBufferAndMore/Step1_CheckTeacherBuffer (0.00s)
    --- PASS: TestIntegration_SchedulingBufferAndMore/Step2_CheckRoomBuffer (0.00s)
    --- FAIL: TestIntegration_SchedulingBufferAndMore/Step3_GetExceptionsByRule (0.02s)
    --- PASS: TestIntegration_SchedulingBufferAndMore/Step4_GetExceptionsByDateRange (0.00s)
    --- FAIL: TestIntegration_SchedulingBufferAndMore/Step5_DeleteRule (0.04s)
=== RUN   TestIntegration_TeacherSkillsCertificates
=== RUN   TestIntegration_TeacherSkillsCertificates/Step1_GetSkills
    integration_full_workflow_test.go:2627: Get skills completed
=== RUN   TestIntegration_TeacherSkillsCertificates/Step2_CreateSkill
    integration_full_workflow_test.go:2651: Create skill completed
=== RUN   TestIntegration_TeacherSkillsCertificates/Step3_GetCertificates
    integration_full_workflow_test.go:2667: Get certificates completed
=== RUN   TestIntegration_TeacherSkillsCertificates/Step4_CreateCertificate
    integration_full_workflow_test.go:2691: Create certificate completed
=== RUN   TestIntegration_TeacherSkillsCertificates/Step5_UploadCertificate
    integration_full_workflow_test.go:2714: Upload certificate completed

2026/02/07 15:06:16 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[242.646ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:06:16 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[411.380ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:06:17 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[353.757ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:06:17 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[309.789ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:06:17 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[236.708ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:06:18 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[320.300ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:06:18 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[320.758ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:06:18 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[228.247ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:06:18 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[221.165ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:06:19 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[318.783ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:06:19 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[210.937ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:06:19 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[200.823ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:06:20 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[531.330ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m
--- PASS: TestIntegration_TeacherSkillsCertificates (4.57s)
    --- PASS: TestIntegration_TeacherSkillsCertificates/Step1_GetSkills (0.00s)
    --- PASS: TestIntegration_TeacherSkillsCertificates/Step2_CreateSkill (0.02s)
    --- PASS: TestIntegration_TeacherSkillsCertificates/Step3_GetCertificates (0.00s)
    --- PASS: TestIntegration_TeacherSkillsCertificates/Step4_CreateCertificate (0.02s)
    --- PASS: TestIntegration_TeacherSkillsCertificates/Step5_UploadCertificate (0.00s)
=== RUN   TestIntegration_TeacherNotesAndEvents
=== RUN   TestIntegration_TeacherNotesAndEvents/Step1_GetSessionNote
    integration_full_workflow_test.go:2758: Get session note completed
=== RUN   TestIntegration_TeacherNotesAndEvents/Step2_UpsertSessionNote
    integration_full_workflow_test.go:2782: Upsert session note completed
=== RUN   TestIntegration_TeacherNotesAndEvents/Step3_GetPersonalEvents
    integration_full_workflow_test.go:2798: Get personal events completed
=== RUN   TestIntegration_TeacherNotesAndEvents/Step4_CreatePersonalEvent
    integration_full_workflow_test.go:2826: Create personal event completed
=== RUN   TestIntegration_TeacherNotesAndEvents/Step5_UpdatePersonalEvent
    integration_full_workflow_test.go:2849: Update personal event completed

2026/02/07 15:06:21 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[318.106ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:06:21 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[407.640ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:06:21 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[294.350ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:06:22 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[451.947ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:06:22 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[251.443ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:06:23 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[401.891ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:06:23 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[227.935ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:06:23 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[223.324ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:06:23 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[252.328ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:06:24 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[386.863ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:06:24 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[229.536ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:06:24 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[226.307ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:06:24 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[254.494ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:06:25 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[260.641ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- PASS: TestIntegration_TeacherNotesAndEvents (4.67s)
    --- PASS: TestIntegration_TeacherNotesAndEvents/Step1_GetSessionNote (0.00s)
    --- PASS: TestIntegration_TeacherNotesAndEvents/Step2_UpsertSessionNote (0.02s)
    --- PASS: TestIntegration_TeacherNotesAndEvents/Step3_GetPersonalEvents (0.00s)
    --- PASS: TestIntegration_TeacherNotesAndEvents/Step4_CreatePersonalEvent (0.02s)
    --- PASS: TestIntegration_TeacherNotesAndEvents/Step5_UpdatePersonalEvent (0.00s)
=== RUN   TestIntegration_AdminTeacherManagement
=== RUN   TestIntegration_AdminTeacherManagement/Step1_ListTeachers
    integration_full_workflow_test.go:2904: List teachers completed
=== RUN   TestIntegration_AdminTeacherManagement/Step2_DeleteTeacher
    integration_full_workflow_test.go:2930: Delete teacher completed
=== RUN   TestIntegration_AdminTeacherManagement/Step3_InviteTeacher
    integration_full_workflow_test.go:2956: Invite teacher completed

2026/02/07 15:06:25 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[213.002ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:06:26 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[503.893ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:06:26 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[209.493ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:06:26 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[312.318ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:06:27 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[390.717ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:06:27 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[218.128ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:06:27 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[272.791ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:06:27 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[209.029ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:06:28 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[359.566ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:06:28 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[210.170ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:06:28 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[236.212ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:06:28 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[223.186ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:06:29 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[319.312ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:06:29 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[250.691ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m
--- PASS: TestIntegration_AdminTeacherManagement (4.47s)
    --- PASS: TestIntegration_AdminTeacherManagement/Step1_ListTeachers (0.00s)
    --- PASS: TestIntegration_AdminTeacherManagement/Step2_DeleteTeacher (0.06s)
    --- PASS: TestIntegration_AdminTeacherManagement/Step3_InviteTeacher (0.04s)
=== RUN   TestIntegration_OfferingUpdate
=== RUN   TestIntegration_OfferingUpdate/Step1_UpdateOffering
    integration_full_workflow_test.go:3032: Update offering completed

2026/02/07 15:06:30 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[273.947ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:06:30 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[372.434ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:06:30 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[215.456ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:06:31 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[428.553ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:06:31 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[230.865ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:06:32 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[416.197ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:06:32 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[234.883ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:06:32 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[212.079ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:06:32 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[205.399ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:06:33 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[388.105ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:06:33 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[203.434ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:06:33 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[213.667ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:06:33 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[233.147ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:06:34 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[286.494ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- PASS: TestIntegration_OfferingUpdate (4.46s)
    --- PASS: TestIntegration_OfferingUpdate/Step1_UpdateOffering (0.04s)
=== RUN   TestIntegration_TemplateUpdate
=== RUN   TestIntegration_TemplateUpdate/Step1_UpdateTemplate

2026/02/07 15:06:34 [31;1mD:/project/TimeLedger/app/repositories/generic.go:269 [35;1mError 1292 (22007): Incorrect datetime value: '0000-00-00' for column 'created_at' at row 1
[0m[33m[2.151ms] [34;1m[rows:0][0m UPDATE `timetable_templates` SET `center_id`=1,`name`='Updated Template 1770447994262609600',`row_type`='',`is_active`=false,`created_at`='0000-00-00 00:00:00',`updated_at`='2026-02-07 15:06:34.313',`deleted_at`=NULL WHERE `timetable_templates`.`deleted_at` IS NULL AND `id` = 20
    integration_full_workflow_test.go:3092: Expected status 200, got 500. Body: {"code":10001,"message":"Failed to update template","datas":null}

2026/02/07 15:06:34 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[201.923ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:06:34 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[366.903ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:06:35 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[302.829ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:06:35 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[305.116ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:06:35 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[227.273ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:06:36 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[292.644ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:06:36 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[345.262ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:06:36 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[224.983ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:06:36 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[205.236ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:06:37 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[345.288ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:06:37 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[236.381ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:06:37 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[211.760ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:06:37 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[211.161ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:06:38 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[356.172ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m
--- FAIL: TestIntegration_TemplateUpdate (4.26s)
    --- FAIL: TestIntegration_TemplateUpdate/Step1_UpdateTemplate (0.02s)
=== RUN   TestIntegration_NotificationManagement
=== RUN   TestIntegration_NotificationManagement/Step1_ListNotifications
    integration_full_workflow_test.go:3140: List notifications completed
=== RUN   TestIntegration_NotificationManagement/Step2_GetUnreadCount
    integration_full_workflow_test.go:3156: Get unread count completed
=== RUN   TestIntegration_NotificationManagement/Step3_SetNotifyToken

2026/02/07 15:06:38 [31;1mD:/project/TimeLedger/app/repositories/generic.go:92 [35;1mrecord not found
[0m[33m[1.086ms] [34;1m[rows:0][0m SELECT * FROM `teachers` WHERE id = 1 AND `teachers`.`deleted_at` IS NULL ORDER BY `teachers`.`id` LIMIT 1
    integration_full_workflow_test.go:3178: Set notify token completed
=== RUN   TestIntegration_NotificationManagement/Step4_SendTestNotification

2026/02/07 15:06:38 [31;1mD:/project/TimeLedger/app/repositories/generic.go:92 [35;1mrecord not found
[0m[33m[1.364ms] [34;1m[rows:0][0m SELECT * FROM `teachers` WHERE id = 1 AND `teachers`.`deleted_at` IS NULL ORDER BY `teachers`.`id` LIMIT 1
    integration_full_workflow_test.go:3201: Send test notification completed
=== RUN   TestIntegration_NotificationManagement/Step5_MarkAllAsRead
    integration_full_workflow_test.go:3217: Mark all as read completed
=== RUN   TestIntegration_NotificationManagement/Step6_MarkAsRead
    integration_full_workflow_test.go:3234: Mark as read completed

2026/02/07 15:06:38 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[217.127ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:06:39 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[482.875ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:06:39 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[212.510ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:06:39 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[303.564ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:06:40 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[382.475ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:06:40 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[282.468ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:06:41 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[333.124ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:06:41 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[266.691ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:06:41 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[207.971ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:06:41 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[247.196ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:06:42 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[334.304ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:06:42 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[212.117ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:06:42 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[233.152ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m
--- PASS: TestIntegration_NotificationManagement (4.39s)
    --- PASS: TestIntegration_NotificationManagement/Step1_ListNotifications (0.00s)
    --- PASS: TestIntegration_NotificationManagement/Step2_GetUnreadCount (0.00s)
    --- PASS: TestIntegration_NotificationManagement/Step3_SetNotifyToken (0.00s)
    --- PASS: TestIntegration_NotificationManagement/Step4_SendTestNotification (0.02s)
    --- PASS: TestIntegration_NotificationManagement/Step5_MarkAllAsRead (0.00s)
    --- PASS: TestIntegration_NotificationManagement/Step6_MarkAsRead (0.02s)
=== RUN   TestIntegration_SmartMatching
=== RUN   TestIntegration_SmartMatching/Step1_FindMatches
    integration_full_workflow_test.go:3303: Find matches completed
=== RUN   TestIntegration_SmartMatching/Step2_SearchTalent
    integration_full_workflow_test.go:3325: Search talent completed

2026/02/07 15:06:43 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[213.900ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:06:43 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[384.678ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:06:43 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[313.858ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:06:44 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[361.049ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:06:44 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[237.416ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:06:45 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[431.267ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:06:45 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[207.702ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:06:45 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[219.374ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:06:45 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[285.229ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:06:46 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[343.598ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:06:46 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[239.225ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:06:47 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[380.314ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m
--- PASS: TestIntegration_SmartMatching (4.57s)
    --- PASS: TestIntegration_SmartMatching/Step1_FindMatches (0.05s)
    --- PASS: TestIntegration_SmartMatching/Step2_SearchTalent (0.02s)
=== RUN   TestIntegration_TeacherDeletion
=== RUN   TestIntegration_TeacherDeletion/Step1_DeleteSkill
    integration_full_workflow_test.go:3369: Delete skill completed
=== RUN   TestIntegration_TeacherDeletion/Step2_DeleteCertificate
    integration_full_workflow_test.go:3385: Delete certificate completed
=== RUN   TestIntegration_TeacherDeletion/Step3_DeletePersonalEvent
    integration_full_workflow_test.go:3401: Delete personal event completed

2026/02/07 15:06:47 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[215.321ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:06:48 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[510.667ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:06:48 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[218.161ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:06:48 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[310.509ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:06:49 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[384.692ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:06:49 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[279.945ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:06:49 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[261.846ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:06:50 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[336.450ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:06:50 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[207.821ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:06:50 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[241.821ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:06:51 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[319.282ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:06:51 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[278.744ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:06:51 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[235.383ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m
--- PASS: TestIntegration_TeacherDeletion (4.42s)
    --- PASS: TestIntegration_TeacherDeletion/Step1_DeleteSkill (0.00s)
    --- PASS: TestIntegration_TeacherDeletion/Step2_DeleteCertificate (0.00s)
    --- PASS: TestIntegration_TeacherDeletion/Step3_DeletePersonalEvent (0.00s)
=== RUN   TestIntegration_TeacherGetCenters
=== RUN   TestIntegration_TeacherGetCenters/Step1_GetCenters
    integration_full_workflow_test.go:3444: Get centers completed
=== RUN   TestIntegration_TeacherGetCenters/Step2_UpdateProfile
    integration_full_workflow_test.go:3468: Update profile completed

2026/02/07 15:06:52 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[240.324ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:06:52 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[369.173ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:06:52 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[207.481ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:06:53 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[444.498ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:06:53 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[236.612ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:06:54 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[406.146ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:06:54 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[211.696ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:06:54 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[229.307ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:06:54 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[222.301ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:06:55 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[394.114ms] [33m[rows:0][35m TRUNCATE TABLE admin_users[0m

2026/02/07 15:06:55 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[207.952ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:06:55 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[223.675ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:06:55 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[269.218ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:06:56 [32mD:/project/TimeLedger/testing/test/integration_full_workflow_test.go:108 [33mSLOW SQL >= 200ms
[0m[31;1m[252.506ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- PASS: TestIntegration_TeacherGetCenters (4.44s)
    --- PASS: TestIntegration_TeacherGetCenters/Step1_GetCenters (0.00s)
    --- PASS: TestIntegration_TeacherGetCenters/Step2_UpdateProfile (0.05s)
=== RUN   TestIntegration_AdminLoginAndCRUD
=== RUN   TestIntegration_AdminLoginAndCRUD/Step1_AdminLogin_Success
    integration_login_test.go:156: Login successful, token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX3R5c...
=== RUN   TestIntegration_AdminLoginAndCRUD/Step2_AdminLogin_InvalidPassword
=== RUN   TestIntegration_AdminLoginAndCRUD/Step5_CreateCenter_WithAuth
    integration_login_test.go:204: Expected status 200, got 201. Body: {"code":0,"message":"Created","datas":{"id":2,"name":"New Center from Test","plan_level":"STARTER","settings":{"allow_public_register":false,"default_language":"zh-TW","exception_lead_days":0},"created_at":"2026-02-07T15:06:56.436847+08:00"}}
--- FAIL: TestIntegration_AdminLoginAndCRUD (0.33s)
    --- PASS: TestIntegration_AdminLoginAndCRUD/Step1_AdminLogin_Success (0.05s)
    --- PASS: TestIntegration_AdminLoginAndCRUD/Step2_AdminLogin_InvalidPassword (0.05s)
    --- FAIL: TestIntegration_AdminLoginAndCRUD/Step5_CreateCenter_WithAuth (0.05s)
=== RUN   TestIntegration_TeacherCRUD_WithAuth
=== RUN   TestIntegration_TeacherCRUD_WithAuth/GetTeacherByID
=== RUN   TestIntegration_TeacherCRUD_WithAuth/UpdateTeacherProfile
--- PASS: TestIntegration_TeacherCRUD_WithAuth (0.20s)
    --- PASS: TestIntegration_TeacherCRUD_WithAuth/GetTeacherByID (0.00s)
    --- PASS: TestIntegration_TeacherCRUD_WithAuth/UpdateTeacherProfile (0.02s)
=== RUN   TestIntegration_RefreshToken
=== RUN   TestIntegration_RefreshToken/RefreshToken_InvalidToken
=== RUN   TestIntegration_RefreshToken/Logout_WithoutAuth
    integration_login_test.go:336: Got status 401 - auth context behavior
=== RUN   TestIntegration_RefreshToken/Logout_WithAuthContext
--- PASS: TestIntegration_RefreshToken (0.21s)
    --- PASS: TestIntegration_RefreshToken/RefreshToken_InvalidToken (0.00s)
    --- PASS: TestIntegration_RefreshToken/Logout_WithoutAuth (0.00s)
    --- PASS: TestIntegration_RefreshToken/Logout_WithAuthContext (0.00s)
=== RUN   TestLineBotService_SendMessage
--- PASS: TestLineBotService_SendMessage (0.00s)
=== RUN   TestLineBotService_VerifySignature
--- PASS: TestLineBotService_VerifySignature (0.00s)
=== RUN   TestLineBotService_PushFlexMessage
--- PASS: TestLineBotService_PushFlexMessage (0.00s)
=== RUN   TestLineBotTemplateService_GetWelcomeTemplate
--- PASS: TestLineBotTemplateService_GetWelcomeTemplate (0.00s)
=== RUN   TestLineBotTemplateService_GetExceptionSubmitTemplate
--- PASS: TestLineBotTemplateService_GetExceptionSubmitTemplate (0.00s)
=== RUN   TestLineBotTemplateService_GetExceptionApproveTemplate
--- PASS: TestLineBotTemplateService_GetExceptionApproveTemplate (0.00s)
=== RUN   TestGenerateBindingCode
--- PASS: TestGenerateBindingCode (0.00s)
=== RUN   TestLoadTest_ConcurrentScheduling
    load_test.go:8: Skipping - requires .env file
--- SKIP: TestLoadTest_ConcurrentScheduling (0.00s)
=== RUN   TestLoadTest_RoomBooking
    load_test.go:12: Skipping - requires .env file
--- SKIP: TestLoadTest_RoomBooking (0.00s)
=== RUN   TestCenterSettings_JSON
--- PASS: TestCenterSettings_JSON (0.00s)
=== RUN   TestDateRange_JSON
    models_test.go:48: Expected StartDate 2026-01-01 00:00:00 +0000 UTC, got 2026-01-01 00:00:00 +0800 CST
--- FAIL: TestDateRange_JSON (0.00s)
=== RUN   TestRecurrenceRule_JSON
--- PASS: TestRecurrenceRule_JSON (0.00s)
=== RUN   TestAuditPayload_JSON
--- PASS: TestAuditPayload_JSON (0.00s)
=== RUN   TestModel_Fields
--- PASS: TestModel_Fields (0.00s)
=== RUN   TestCenterRepository_CRUD_WithMySQL
    mysql_test.go:21: Skipping - requires .env file and production DB
--- SKIP: TestCenterRepository_CRUD_WithMySQL (0.00s)
=== RUN   TestNotificationService_SendTalentInvitationNotification
=== RUN   TestNotificationService_SendTalentInvitationNotification/SendTalentInvitationNotification_Success
=== RUN   TestNotificationService_SendTalentInvitationNotification/SendTalentInvitationNotification_TeacherNotFound

2026/02/07 15:06:57 [31;1mD:/project/TimeLedger/app/repositories/generic.go:92 [35;1mrecord not found
[0m[33m[1.095ms] [34;1m[rows:0][0m SELECT * FROM `teachers` WHERE id = 999999 AND `teachers`.`deleted_at` IS NULL ORDER BY `teachers`.`id` LIMIT 1
--- PASS: TestNotificationService_SendTalentInvitationNotification (0.23s)
    --- PASS: TestNotificationService_SendTalentInvitationNotification/SendTalentInvitationNotification_Success (0.17s)
    --- PASS: TestNotificationService_SendTalentInvitationNotification/SendTalentInvitationNotification_TeacherNotFound (0.06s)
=== RUN   TestNotificationRepository_CRUD
=== RUN   TestNotificationRepository_CRUD/CreateAndGetNotification
--- PASS: TestNotificationRepository_CRUD (0.14s)
    --- PASS: TestNotificationRepository_CRUD/CreateAndGetNotification (0.14s)
=== RUN   TestScheduleRuleRepository_CheckPersonalEventConflict
=== RUN   TestScheduleRuleRepository_CheckPersonalEventConflict/Conflict_WithOverlappingTime
    personal_event_conflict_test.go:215: Found 1 conflict(s), rule ID: 1
=== RUN   TestScheduleRuleRepository_CheckPersonalEventConflict/NoConflict_WithNonOverlappingTime
    personal_event_conflict_test.go:235: No conflicts found as expected
=== RUN   TestScheduleRuleRepository_CheckPersonalEventConflict/NoConflict_WithDifferentWeekday
    personal_event_conflict_test.go:255: No conflicts found as expected (different weekday)
=== RUN   TestScheduleRuleRepository_CheckPersonalEventConflict/Conflict_WithContainingTime
    personal_event_conflict_test.go:275: Found 1 conflict(s) with containing time
=== RUN   TestScheduleRuleRepository_CheckPersonalEventConflict/Conflict_WithContainedTime
    personal_event_conflict_test.go:295: Found 1 conflict(s) with contained time
=== RUN   TestScheduleRuleRepository_CheckPersonalEventConflict/NoConflict_WhenEventDateOutsideEffectiveRange
    personal_event_conflict_test.go:358: Found 2 conflicts (expected 1 from original course)
=== RUN   TestScheduleRuleRepository_CheckPersonalEventConflict/NoConflict_EventEndsExactlyWhenCourseStarts
    personal_event_conflict_test.go:378: No conflicts found when event ends exactly when course starts
=== RUN   TestScheduleRuleRepository_CheckPersonalEventConflict/NoConflict_EventStartsExactlyWhenCourseEnds
    personal_event_conflict_test.go:397: No conflicts found when event starts exactly when course ends
=== RUN   TestScheduleRuleRepository_CheckPersonalEventConflict/Conflict_EventOneMinuteOverlap
    personal_event_conflict_test.go:416: Found 2 conflict(s) with 1 minute overlap
=== RUN   TestScheduleRuleRepository_CheckPersonalEventConflict/NoConflict_EventOneMinuteBeforeCourse
    personal_event_conflict_test.go:435: No conflicts found with 1 minute gap
=== RUN   TestScheduleRuleRepository_CheckPersonalEventConflict/Conflict_MultipleOverlappingCourses
    personal_event_conflict_test.go:493: Expected conflicts with 2 courses, got 3
    personal_event_conflict_test.go:496: Found 3 conflict(s) with multiple courses
=== RUN   TestScheduleRuleRepository_CheckPersonalEventConflict/Conflict_SameCourseOnDifferentDays
    personal_event_conflict_test.go:562: Found 3 conflict(s) - correctly only Monday courses
=== RUN   TestScheduleRuleRepository_CheckPersonalEventConflict/Debug_PrintValues
    personal_event_conflict_test.go:577: === Debug Values ===
    personal_event_conflict_test.go:578: now: 2026-02-07 15:06:57.4079595 +0800 CST m=+143.996843401 (Saturday)
    personal_event_conflict_test.go:579: eventTime (next Monday): 2026-02-09 00:00:00 +0800 CST (Monday)
    personal_event_conflict_test.go:580: eventStartAt: 2026-02-09 09:30:00 +0800 CST
    personal_event_conflict_test.go:581: eventStartAtTaipei: 2026-02-09 09:30:00 +0800 CST
    personal_event_conflict_test.go:582: eventWeekday (original): 1
    personal_event_conflict_test.go:583: eventWeekday (Taipei): 1
    personal_event_conflict_test.go:591: Found 4 rules for teacher 4 in center 5
    personal_event_conflict_test.go:593: Rule 0: ID=1, Weekday=1, StartTime=09:00, EndTime=10:00
    personal_event_conflict_test.go:594:   EffectiveRange: 2026-01-07 15:06:57 +0800 CST to 2026-03-07 15:06:57 +0800 CST
    personal_event_conflict_test.go:601:   eventWeekday=1, rule.Weekday=1, match=true
    personal_event_conflict_test.go:606:   eventDate=2026-02-09, ruleStartDate=2026-01-07, ruleEndDate=2026-03-07
    personal_event_conflict_test.go:608:   inRange=true
    personal_event_conflict_test.go:612:   eventStartTime=09:30, eventEndTime=10:30
    personal_event_conflict_test.go:615:   timesOverlap=true
    personal_event_conflict_test.go:593: Rule 1: ID=2, Weekday=1, StartTime=09:00, EndTime=10:00
    personal_event_conflict_test.go:594:   EffectiveRange: 2026-03-07 15:06:57 +0800 CST to 2026-04-07 15:06:57 +0800 CST
    personal_event_conflict_test.go:601:   eventWeekday=1, rule.Weekday=1, match=true
    personal_event_conflict_test.go:606:   eventDate=2026-02-09, ruleStartDate=2026-03-07, ruleEndDate=2026-04-07
    personal_event_conflict_test.go:608:   inRange=false
    personal_event_conflict_test.go:612:   eventStartTime=09:30, eventEndTime=10:30
    personal_event_conflict_test.go:615:   timesOverlap=true
    personal_event_conflict_test.go:593: Rule 2: ID=3, Weekday=1, StartTime=09:30, EndTime=10:30
    personal_event_conflict_test.go:594:   EffectiveRange: 2026-01-07 15:06:57 +0800 CST to 2026-03-07 15:06:57 +0800 CST
    personal_event_conflict_test.go:601:   eventWeekday=1, rule.Weekday=1, match=true
    personal_event_conflict_test.go:606:   eventDate=2026-02-09, ruleStartDate=2026-01-07, ruleEndDate=2026-03-07
    personal_event_conflict_test.go:608:   inRange=true
    personal_event_conflict_test.go:612:   eventStartTime=09:30, eventEndTime=10:30
    personal_event_conflict_test.go:615:   timesOverlap=true
    personal_event_conflict_test.go:593: Rule 3: ID=4, Weekday=2, StartTime=09:00, EndTime=10:00
    personal_event_conflict_test.go:594:   EffectiveRange: 2026-01-07 15:06:57 +0800 CST to 2026-03-07 15:06:57 +0800 CST
    personal_event_conflict_test.go:601:   eventWeekday=1, rule.Weekday=2, match=false
    personal_event_conflict_test.go:606:   eventDate=2026-02-09, ruleStartDate=2026-01-07, ruleEndDate=2026-03-07
    personal_event_conflict_test.go:608:   inRange=true
    personal_event_conflict_test.go:612:   eventStartTime=09:30, eventEndTime=10:30
    personal_event_conflict_test.go:615:   timesOverlap=true
    personal_event_conflict_test.go:623: Final conflicts count: 3

2026/02/07 15:06:58 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[368.627ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:06:58 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[388.793ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:06:58 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[211.975ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:06:59 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[433.915ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:06:59 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[250.424ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:06:59 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[227.409ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:07:00 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[427.728ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:07:00 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[234.619ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:07:00 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[230.549ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:07:01 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[341.046ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:07:01 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[252.249ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:07:01 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[259.107ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m
--- FAIL: TestScheduleRuleRepository_CheckPersonalEventConflict (4.47s)
    --- PASS: TestScheduleRuleRepository_CheckPersonalEventConflict/Conflict_WithOverlappingTime (0.00s)
    --- PASS: TestScheduleRuleRepository_CheckPersonalEventConflict/NoConflict_WithNonOverlappingTime (0.00s)
    --- PASS: TestScheduleRuleRepository_CheckPersonalEventConflict/NoConflict_WithDifferentWeekday (0.00s)
    --- PASS: TestScheduleRuleRepository_CheckPersonalEventConflict/Conflict_WithContainingTime (0.00s)
    --- PASS: TestScheduleRuleRepository_CheckPersonalEventConflict/Conflict_WithContainedTime (0.01s)
    --- PASS: TestScheduleRuleRepository_CheckPersonalEventConflict/NoConflict_WhenEventDateOutsideEffectiveRange (0.07s)
    --- PASS: TestScheduleRuleRepository_CheckPersonalEventConflict/NoConflict_EventEndsExactlyWhenCourseStarts (0.00s)
    --- PASS: TestScheduleRuleRepository_CheckPersonalEventConflict/NoConflict_EventStartsExactlyWhenCourseEnds (0.00s)
    --- PASS: TestScheduleRuleRepository_CheckPersonalEventConflict/Conflict_EventOneMinuteOverlap (0.00s)
    --- PASS: TestScheduleRuleRepository_CheckPersonalEventConflict/NoConflict_EventOneMinuteBeforeCourse (0.00s)
    --- FAIL: TestScheduleRuleRepository_CheckPersonalEventConflict/Conflict_MultipleOverlappingCourses (0.06s)
    --- PASS: TestScheduleRuleRepository_CheckPersonalEventConflict/Conflict_SameCourseOnDifferentDays (0.06s)
    --- PASS: TestScheduleRuleRepository_CheckPersonalEventConflict/Debug_PrintValues (0.01s)
=== RUN   TestScheduleRuleRepository_CheckPersonalEventConflictAllCenters
=== RUN   TestScheduleRuleRepository_CheckPersonalEventConflictAllCenters/ConflictInOneCenter
    personal_event_conflict_test.go:730: Skipping - CheckPersonalEventConflictAllCenters not implemented
=== RUN   TestScheduleRuleRepository_CheckPersonalEventConflictAllCenters/NoConflictInAnyCenter
    personal_event_conflict_test.go:737: Skipping - CheckPersonalEventConflictAllCenters not implemented

2026/02/07 15:07:02 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[221.361ms] [33m[rows:0][35m TRUNCATE TABLE schedule_exceptions[0m

2026/02/07 15:07:02 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[375.209ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:07:03 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[333.865ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:07:03 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[348.536ms] [33m[rows:0][35m TRUNCATE TABLE center_invitations[0m

2026/02/07 15:07:03 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[241.584ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:07:03 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[206.082ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:07:04 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[320.660ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:07:04 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[301.674ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:07:04 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[227.087ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:07:05 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[346.392ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:07:05 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[236.600ms] [33m[rows:0][35m TRUNCATE TABLE teacher_certificates[0m

2026/02/07 15:07:05 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[225.650ms] [33m[rows:0][35m TRUNCATE TABLE teacher_personal_hashtags[0m

2026/02/07 15:07:05 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[233.005ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:07:06 [32mD:/project/TimeLedger/testing/test/personal_event_conflict_test.go:96 [33mSLOW SQL >= 200ms
[0m[31;1m[282.008ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- PASS: TestScheduleRuleRepository_CheckPersonalEventConflictAllCenters (4.29s)
    --- SKIP: TestScheduleRuleRepository_CheckPersonalEventConflictAllCenters/ConflictInOneCenter (0.00s)
    --- SKIP: TestScheduleRuleRepository_CheckPersonalEventConflictAllCenters/NoConflictInAnyCenter (0.00s)
=== RUN   TestRateLimiter
=== RUN   TestRateLimiter/CheckRateLimit_FirstRequest
=== RUN   TestRateLimiter/CheckRateLimit_MultipleRequests
=== RUN   TestRateLimiter/ResetIP
--- PASS: TestRateLimiter (0.01s)
    --- PASS: TestRateLimiter/CheckRateLimit_FirstRequest (0.01s)
    --- PASS: TestRateLimiter/CheckRateLimit_MultipleRequests (0.00s)
    --- PASS: TestRateLimiter/ResetIP (0.00s)
=== RUN   TestScheduleExpansionService_HolidayFiltering
=== RUN   TestScheduleExpansionService_HolidayFiltering/HolidaySessionsShouldBeFiltered
    schedule_expansion_holiday_test.go:195: ??蕪皜祈岫??嚗 4 ?玨銵券???    schedule_expansion_holiday_test.go:197:   - 2026-01-14: 10:00:00 12:00:00
    schedule_expansion_holiday_test.go:197:   - 2026-01-28: 10:00:00 12:00:00
    schedule_expansion_holiday_test.go:197:   - 2026-02-04: 10:00:00 12:00:00
    schedule_expansion_holiday_test.go:197:   - 2026-02-11: 10:00:00 12:00:00
--- PASS: TestScheduleExpansionService_HolidayFiltering (0.34s)
    --- PASS: TestScheduleExpansionService_HolidayFiltering/HolidaySessionsShouldBeFiltered (0.34s)
=== RUN   TestScheduleRuleRepository_CRUD
    schedule_rule_test.go:13: Skipping - requires .env file
--- SKIP: TestScheduleRuleRepository_CRUD (0.00s)
=== RUN   TestScheduleRuleRepository_ListByOfferingIDWithPreload
    schedule_rule_test.go:49: ListByOfferingIDWithPreload Results:
    schedule_rule_test.go:50:   Total rules found: 0
    schedule_rule_test.go:51:   Offering ID: 1
    schedule_rule_test.go:79: ListByOfferingIDWithPreload with non-existent offering: 0 rules (expected 0)
--- PASS: TestScheduleRuleRepository_ListByOfferingIDWithPreload (0.01s)
=== RUN   TestScheduleRuleRepository_ListByOfferingIDWithPreload_PreloadVerification
    schedule_rule_test.go:104: Skipping - no offering with rules available: ScheduleRules: unsupported relations for schema Offering
--- SKIP: TestScheduleRuleRepository_ListByOfferingIDWithPreload_PreloadVerification (0.00s)
=== RUN   TestScheduleRuleUpdateMode_Single

2026/02/07 15:07:06 [31;1mD:/project/TimeLedger/testing/test/schedule_rule_update_mode_test.go:69 [35;1mrecord not found
[0m[33m[1.052ms] [34;1m[rows:0][0m SELECT * FROM `centers` ORDER BY id DESC,`centers`.`id` LIMIT 1
    schedule_rule_update_mode_test.go:70: No center data available, skipping test: record not found
--- SKIP: TestScheduleRuleUpdateMode_Single (0.00s)
=== RUN   TestScheduleRuleUpdateMode_Future

2026/02/07 15:07:06 [31;1mD:/project/TimeLedger/testing/test/schedule_rule_update_mode_test.go:217 [35;1mrecord not found
[0m[33m[1.084ms] [34;1m[rows:0][0m SELECT * FROM `centers` ORDER BY id DESC,`centers`.`id` LIMIT 1
    schedule_rule_update_mode_test.go:218: No center data available, skipping test: record not found
--- SKIP: TestScheduleRuleUpdateMode_Future (0.00s)
=== RUN   TestScheduleRuleUpdateMode_All

2026/02/07 15:07:06 [31;1mD:/project/TimeLedger/testing/test/schedule_rule_update_mode_test.go:347 [35;1mrecord not found
[0m[33m[1.056ms] [34;1m[rows:0][0m SELECT * FROM `centers` ORDER BY id DESC,`centers`.`id` LIMIT 1
    schedule_rule_update_mode_test.go:348: No center data available, skipping test: record not found
--- SKIP: TestScheduleRuleUpdateMode_All (0.00s)
=== RUN   TestScheduleRuleValidator_ValidateForApplyTemplate_OverlapConflict
    schedule_rule_validator_test.go:36: Skipping - no center data available: record not found
--- SKIP: TestScheduleRuleValidator_ValidateForApplyTemplate_OverlapConflict (0.00s)
=== RUN   TestScheduleRuleValidator_ValidateForCreateRule_NoConflict
    schedule_rule_validator_test.go:114: Skipping - no center data available: record not found
--- SKIP: TestScheduleRuleValidator_ValidateForCreateRule_NoConflict (0.00s)
=== RUN   TestScheduleRuleValidator_ValidateForCreateRule_BufferConflict
    schedule_rule_validator_test.go:170: Skipping - no center data available: record not found
--- SKIP: TestScheduleRuleValidator_ValidateForCreateRule_BufferConflict (0.00s)
=== RUN   TestScheduleRuleValidator_ValidationSummary_Structure
    schedule_rule_validator_test.go:259: ValidationSummary structure test passed
--- PASS: TestScheduleRuleValidator_ValidationSummary_Structure (0.00s)
=== RUN   TestScheduleRuleValidator_ValidateForApplyTemplate_WithOverride
    schedule_rule_validator_test.go:291: Skipping - no center data available: record not found
--- SKIP: TestScheduleRuleValidator_ValidateForApplyTemplate_WithOverride (0.00s)
=== RUN   TestScheduleRuleValidator_ValidateForCreateRule_WithOverride
    schedule_rule_validator_test.go:377: Skipping - no center data available: record not found
--- SKIP: TestScheduleRuleValidator_ValidateForCreateRule_WithOverride (0.00s)
=== RUN   TestScheduleRuleValidator_Override_NonOverridableConflict
    schedule_rule_validator_test.go:461: Skipping - no center data available: record not found
--- SKIP: TestScheduleRuleValidator_Override_NonOverridableConflict (0.00s)
=== RUN   TestSchedulingController_CRUD
    scheduling_controller_test.go:6: Skipping - requires .env file
--- SKIP: TestSchedulingController_CRUD (0.00s)
=== RUN   TestScheduleValidationService_CheckOverlap
    scheduling_controller_test.go:10: Skipping - requires .env file
--- SKIP: TestScheduleValidationService_CheckOverlap (0.00s)
=== RUN   TestScheduleValidationService_Complete
    scheduling_validation_unit_test.go:37: 頝喲?皜祈岫 - ?∪?其葉敹??? record not found
--- SKIP: TestScheduleValidationService_Complete (0.00s)
=== RUN   TestValidationResult_Structure
--- PASS: TestValidationResult_Structure (0.00s)
=== RUN   TestScheduleValidationService_AdditionalCases
    scheduling_validation_unit_test.go:658: 頝喲?皜祈岫 - ?∪?其葉敹??? record not found
--- SKIP: TestScheduleValidationService_AdditionalCases (0.00s)
=== RUN   TestScheduleValidationService_OverlapCheck

2026/02/07 15:07:06 [31;1mD:/project/TimeLedger/testing/test/service_coverage_test.go:111 [35;1mrecord not found
[0m[33m[1.045ms] [34;1m[rows:0][0m SELECT * FROM `centers` ORDER BY id DESC,`centers`.`id` LIMIT 1
    service_coverage_test.go:112: ?∪?其葉敹???頝喲?皜祈岫: record not found

2026/02/07 15:07:07 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[486.257ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:07:07 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[234.950ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:07:07 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[210.759ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:07:07 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[288.619ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:07:08 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[318.334ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:07:08 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[215.482ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:07:08 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[208.132ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:07:09 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[397.276ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m
--- SKIP: TestScheduleValidationService_OverlapCheck (2.84s)
=== RUN   TestScheduleValidationService_CheckTeacherBuffer

2026/02/07 15:07:09 [31;1mD:/project/TimeLedger/testing/test/service_coverage_test.go:205 [35;1mrecord not found
[0m[33m[1.053ms] [34;1m[rows:0][0m SELECT * FROM `centers` ORDER BY id DESC,`centers`.`id` LIMIT 1
    service_coverage_test.go:206: ?∪?其葉敹???頝喲?皜祈岫: record not found

2026/02/07 15:07:09 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[347.934ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:07:10 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[346.616ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:07:10 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[245.852ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:07:10 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[209.565ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:07:11 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[395.999ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:07:11 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[207.893ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:07:11 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[223.465ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:07:12 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[293.229ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- SKIP: TestScheduleValidationService_CheckTeacherBuffer (2.79s)
=== RUN   TestScheduleValidationService_CheckRoomBuffer

2026/02/07 15:07:12 [31;1mD:/project/TimeLedger/testing/test/service_coverage_test.go:263 [35;1mrecord not found
[0m[33m[0.525ms] [34;1m[rows:0][0m SELECT * FROM `centers` ORDER BY id DESC,`centers`.`id` LIMIT 1
    service_coverage_test.go:264: ?∪?其葉敹???頝喲?皜祈岫: record not found

2026/02/07 15:07:12 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[363.639ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:07:12 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[202.033ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:07:13 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[340.370ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:07:13 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[207.149ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:07:13 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[276.823ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:07:14 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[350.089ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:07:14 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[213.276ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:07:14 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[245.983ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m
--- SKIP: TestScheduleValidationService_CheckRoomBuffer (2.68s)
=== RUN   TestScheduleValidationService_ValidateFull

2026/02/07 15:07:14 [31;1mD:/project/TimeLedger/testing/test/service_coverage_test.go:318 [35;1mrecord not found
[0m[33m[1.093ms] [34;1m[rows:0][0m SELECT * FROM `centers` ORDER BY id DESC,`centers`.`id` LIMIT 1
    service_coverage_test.go:319: ?∪?其葉敹???頝喲?皜祈岫: record not found

2026/02/07 15:07:15 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[426.055ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:07:15 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[216.310ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:07:15 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[227.475ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:07:16 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[326.049ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:07:16 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[211.513ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:07:16 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[278.939ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:07:16 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[203.248ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:07:17 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[334.821ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:07:17 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[229.562ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m
--- SKIP: TestScheduleValidationService_ValidateFull (2.76s)
=== RUN   TestNotificationService
=== RUN   TestNotificationService/撱箇??閮?
    service_coverage_test.go:378: ? ID ?府鋡怨身摰?=== RUN   TestNotificationService/???皜
=== RUN   TestNotificationService/璅??箏歇霈
=== RUN   TestNotificationService/璅??券?箏歇霈

2026/02/07 15:07:18 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[488.669ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:07:18 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[200.900ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:07:18 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[230.522ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:07:19 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[319.703ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:07:19 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[283.744ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:07:19 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[222.288ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:07:20 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[397.351ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m
--- FAIL: TestNotificationService (2.88s)
    --- FAIL: TestNotificationService/撱箇??閮? (0.02s)
    --- PASS: TestNotificationService/???皜 (0.00s)
    --- PASS: TestNotificationService/璅??箏歇霈 (0.02s)
    --- PASS: TestNotificationService/璅??券?箏歇霈 (0.02s)
=== RUN   TestRedisQueueService
=== RUN   TestRedisQueueService/雿??亙熒瑼Ｘ
=== RUN   TestRedisQueueService/??雿??瑕漲
=== RUN   TestRedisQueueService/??蝯梯?鞈?
=== RUN   TestRedisQueueService/?券?唬???2026-02-07T15:07:20.535+0800	[34mINFO[0m	Notification queued	{"type": "TEST", "recipient_id": 1, "recipient_type": "TEACHER"}
=== RUN   TestRedisQueueService/??岫璈
2026-02-07T15:07:20.536+0800	[34mINFO[0m	Notification queued for retry	{"notification_id": 998, "type": "TEST_RETRY", "retry_count": 1}
=== RUN   TestRedisQueueService/???岫雿?
=== RUN   TestRedisQueueService/憓?閮??
2026/02/07 15:07:21 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[524.400ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:07:21 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[222.796ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:07:21 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[242.738ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:07:21 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[203.090ms] [33m[rows:0][35m TRUNCATE TABLE center_teacher_notes[0m

2026/02/07 15:07:22 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[325.641ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:07:22 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[279.658ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:07:22 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[210.660ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:07:22 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[207.147ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:07:23 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[345.094ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m
--- PASS: TestRedisQueueService (2.87s)
    --- PASS: TestRedisQueueService/雿??亙熒瑼Ｘ (0.01s)
    --- PASS: TestRedisQueueService/??雿??瑕漲 (0.00s)
    --- PASS: TestRedisQueueService/??蝯梯?鞈? (0.00s)
    --- PASS: TestRedisQueueService/?券?唬???(0.00s)
    --- PASS: TestRedisQueueService/??岫璈 (0.00s)
    --- PASS: TestRedisQueueService/???岫雿? (0.00s)
    --- PASS: TestRedisQueueService/憓?閮??(0.00s)
=== RUN   TestNotificationQueueService
=== RUN   TestNotificationQueueService/??雿?蝯梯?
=== RUN   TestNotificationQueueService/?潮迭餈蝯西葦

2026/02/07 15:07:23 [31;1mD:/project/TimeLedger/testing/test/service_coverage_test.go:553 [35;1mrecord not found
[0m[33m[1.041ms] [34;1m[rows:0][0m SELECT * FROM `teachers` WHERE `teachers`.`deleted_at` IS NULL ORDER BY `teachers`.`id` LIMIT 1
    service_coverage_test.go:554: ?∪?刻葦鞈?嚗歲?葫閰? record not found
=== RUN   TestNotificationQueueService/?潮迭餈蝯衣恣?
=== RUN   TestNotificationQueueService/?券?唬???2026-02-07T15:07:23.397+0800	[34mINFO[0m	Notification queued	{"type": "welcome_teacher", "recipient_id": 1, "recipient_type": "TEACHER"}

2026/02/07 15:07:23 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[366.083ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:07:24 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[305.248ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:07:24 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[237.664ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:07:24 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[209.205ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:07:25 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[410.723ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:07:25 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[207.752ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:07:25 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[237.481ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:07:25 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[224.833ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:07:26 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[266.615ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- PASS: TestNotificationQueueService (2.81s)
    --- PASS: TestNotificationQueueService/??雿?蝯梯? (0.01s)
    --- SKIP: TestNotificationQueueService/?潮迭餈蝯西葦 (0.00s)
    --- PASS: TestNotificationQueueService/?潮迭餈蝯衣恣? (0.00s)
    --- PASS: TestNotificationQueueService/?券?唬???(0.00s)
=== RUN   TestCrossDayValidation

2026/02/07 15:07:26 [31;1mD:/project/TimeLedger/testing/test/service_coverage_test.go:601 [35;1mrecord not found
[0m[33m[1.053ms] [34;1m[rows:0][0m SELECT * FROM `centers` ORDER BY id DESC,`centers`.`id` LIMIT 1
    service_coverage_test.go:602: ?∪?其葉敹???頝喲?皜祈岫: record not found

2026/02/07 15:07:26 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[379.275ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:07:26 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[219.362ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:07:27 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[318.680ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:07:27 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[217.778ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:07:27 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[278.375ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:07:28 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[279.720ms] [33m[rows:0][35m TRUNCATE TABLE courses[0m

2026/02/07 15:07:28 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[209.371ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:07:28 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[243.548ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m
--- SKIP: TestCrossDayValidation (2.64s)
=== RUN   TestIntegrationWorkflow
=== RUN   TestIntegrationWorkflow/摰?玨撌乩?瘚?

2026/02/07 15:07:29 [31;1mD:/project/TimeLedger/app/services/scheduling_validation.go:65 [35;1mError 1525 (HY000): Incorrect DATE value: ''
[0m[33m[1.571ms] [34;1m[rows:0][0m SELECT * FROM `schedule_rules` WHERE center_id = 1 AND weekday = 2 AND start_time < '12:00:00' AND end_time > '11:00:00' AND JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.start_date')) <= '2026-01-20' AND ((JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) >= '2026-01-20' OR JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) = '0001-01-01' OR JSON_EXTRACT(effective_range, '$.end_date') IS NULL OR JSON_UNQUOTE(JSON_EXTRACT(effective_range, '$.end_date')) = '')) AND teacher_id = 1 AND `schedule_rules`.`deleted_at` IS NULL
    service_coverage_test.go:761: ValidateFull ?潛??航炊: Error 1525 (HY000): Incorrect DATE value: ''
=== RUN   TestIntegrationWorkflow/靘??唾?摰瘚?
=== RUN   TestIntegrationWorkflow/?摨???????
=== RUN   TestIntegrationWorkflow/?憿?撣豢皜祈岫

2026/02/07 15:07:29 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[459.701ms] [33m[rows:0][35m TRUNCATE TABLE schedule_rules[0m

2026/02/07 15:07:30 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[257.349ms] [33m[rows:0][35m TRUNCATE TABLE center_holidays[0m

2026/02/07 15:07:30 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[231.898ms] [33m[rows:0][35m TRUNCATE TABLE center_memberships[0m

2026/02/07 15:07:30 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[271.233ms] [33m[rows:0][35m TRUNCATE TABLE personal_events[0m

2026/02/07 15:07:31 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[343.294ms] [33m[rows:0][35m TRUNCATE TABLE offerings[0m

2026/02/07 15:07:31 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[208.058ms] [33m[rows:0][35m TRUNCATE TABLE rooms[0m

2026/02/07 15:07:32 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[324.945ms] [33m[rows:0][35m TRUNCATE TABLE teachers[0m

2026/02/07 15:07:32 [32mD:/project/TimeLedger/testing/test/service_coverage_test.go:94 [33mSLOW SQL >= 200ms
[0m[31;1m[210.444ms] [33m[rows:0][35m TRUNCATE TABLE centers[0m
--- FAIL: TestIntegrationWorkflow (3.52s)
    --- FAIL: TestIntegrationWorkflow/摰?玨撌乩?瘚? (0.39s)
    --- PASS: TestIntegrationWorkflow/靘??唾?摰瘚? (0.30s)
    --- PASS: TestIntegrationWorkflow/?摨??????? (0.00s)
    --- PASS: TestIntegrationWorkflow/?憿?撣豢皜祈岫 (0.00s)
=== RUN   TestSessionNoteRepository_CRUD
    session_note_test.go:6: Skipping - requires .env file
--- SKIP: TestSessionNoteRepository_CRUD (0.00s)
=== RUN   TestSmartMatchingService_InviteTalent
=== RUN   TestSmartMatchingService_InviteTalent/InviteTalent_Success

2026/02/07 15:07:32 [31;1mD:/project/TimeLedger/app/repositories/generic.go:92 [35;1mrecord not found
[0m[33m[1.600ms] [34;1m[rows:0][0m SELECT * FROM `teachers` WHERE id = 1 AND `teachers`.`deleted_at` IS NULL ORDER BY `teachers`.`id` LIMIT 1
[ERROR] ?潮犖?澈?隢憭望?: record not found (teacher_id=1)
=== RUN   TestSmartMatchingService_InviteTalent/InviteTalent_AlreadyHasPendingInvitation
=== RUN   TestSmartMatchingService_InviteTalent/InviteTalent_TeacherNotOpenToHiring
=== RUN   TestSmartMatchingService_InviteTalent/InviteTalent_MultipleTeachers
[INFO] 鈭箸?摨恍?隢撌脩?策 皜祈岫?葦 - Batch0 - 5e24af08
[INFO] 鈭箸?摨恍?隢撌脩?策 皜祈岫?葦 - Batch1 - 7c74ad2c
[INFO] 鈭箸?摨恍?隢撌脩?策 皜祈岫?葦 - Batch2 - 1390bf28
--- PASS: TestSmartMatchingService_InviteTalent (0.93s)
    --- PASS: TestSmartMatchingService_InviteTalent/InviteTalent_Success (0.21s)
    --- PASS: TestSmartMatchingService_InviteTalent/InviteTalent_AlreadyHasPendingInvitation (0.19s)
    --- PASS: TestSmartMatchingService_InviteTalent/InviteTalent_TeacherNotOpenToHiring (0.15s)
    --- PASS: TestSmartMatchingService_InviteTalent/InviteTalent_MultipleTeachers (0.38s)
=== RUN   TestSmartMatchingService_GetTalentStats
=== RUN   TestSmartMatchingService_GetTalentStats/GetTalentStats_WithRealData

2026/02/07 15:07:33 [31;1mD:/project/TimeLedger/app/repositories/generic.go:138 [35;1mrecord not found
[0m[33m[1.051ms] [34;1m[rows:0][0m SELECT * FROM `center_teacher_notes` WHERE center_id = 5 AND teacher_id = 7 ORDER BY `center_teacher_notes`.`id` LIMIT 1
--- PASS: TestSmartMatchingService_GetTalentStats (0.20s)
    --- PASS: TestSmartMatchingService_GetTalentStats/GetTalentStats_WithRealData (0.20s)
=== RUN   TestSmartMatchingService_FindMatches
=== RUN   TestSmartMatchingService_FindMatches/FindMatches_Success
=== RUN   TestSmartMatchingService_FindMatches/FindMatches_WithExcludedTeachers
=== RUN   TestSmartMatchingService_FindMatches/FindMatches_NoOpenToHiringTeachers
--- PASS: TestSmartMatchingService_FindMatches (0.85s)
    --- PASS: TestSmartMatchingService_FindMatches/FindMatches_Success (0.26s)
    --- PASS: TestSmartMatchingService_FindMatches/FindMatches_WithExcludedTeachers (0.34s)
    --- PASS: TestSmartMatchingService_FindMatches/FindMatches_NoOpenToHiringTeachers (0.25s)
=== RUN   TestSmartMatchingService_SearchTalent
=== RUN   TestSmartMatchingService_SearchTalent/SearchTalent_WithFilters

2026/02/07 15:07:34 [31;1mD:/project/TimeLedger/app/repositories/generic.go:138 [35;1mrecord not found
[0m[33m[1.049ms] [34;1m[rows:0][0m SELECT * FROM `center_teacher_notes` WHERE center_id = 9 AND teacher_id = 12 ORDER BY `center_teacher_notes`.`id` LIMIT 1
    smart_matching_test.go:681: ??蝯??賊?: 1
=== RUN   TestSmartMatchingService_SearchTalent/SearchTalent_ByKeyword
    smart_matching_test.go:717: 鞈?摨思葉?葦: ID=13, Name=皜祈岫?葦 - Keyword - 93831736, Bio=?撠平???毀XYZ123, IsOpenToHiring=true

2026/02/07 15:07:34 [31;1mD:/project/TimeLedger/app/repositories/generic.go:138 [35;1mrecord not found
[0m[33m[1.065ms] [34;1m[rows:0][0m SELECT * FROM `center_teacher_notes` WHERE center_id = 10 AND teacher_id = 13 ORDER BY `center_teacher_notes`.`id` LIMIT 1
    smart_matching_test.go:730: ????曉噩?葦?賊?: 1

2026/02/07 15:07:34 [31;1mD:/project/TimeLedger/app/repositories/generic.go:138 [35;1mrecord not found
[0m[33m[1.050ms] [34;1m[rows:0][0m SELECT * FROM `center_teacher_notes` WHERE center_id = 10 AND teacher_id = 13 ORDER BY `center_teacher_notes`.`id` LIMIT 1
    smart_matching_test.go:743: ?摮?撠???? 1
    smart_matching_test.go:748:   ?曉: ID=13, Name=皜祈岫?葦 - Keyword - 93831736, Bio=?撠平???毀XYZ123
--- PASS: TestSmartMatchingService_SearchTalent (0.32s)
    --- PASS: TestSmartMatchingService_SearchTalent/SearchTalent_WithFilters (0.16s)
    --- PASS: TestSmartMatchingService_SearchTalent/SearchTalent_ByKeyword (0.16s)
=== RUN   TestSmartMatchingService_GetSearchSuggestions
=== RUN   TestSmartMatchingService_GetSearchSuggestions/GetSearchSuggestions_Success
    smart_matching_test.go:792: ??撱箄降????
=== RUN   TestSmartMatchingService_GetSearchSuggestions/GetSearchSuggestions_EmptyQuery
--- PASS: TestSmartMatchingService_GetSearchSuggestions (0.15s)
    --- PASS: TestSmartMatchingService_GetSearchSuggestions/GetSearchSuggestions_Success (0.08s)
    --- PASS: TestSmartMatchingService_GetSearchSuggestions/GetSearchSuggestions_EmptyQuery (0.07s)
=== RUN   TestSmartMatchingService_GetAlternativeSlots
=== RUN   TestSmartMatchingService_GetAlternativeSlots/GetAlternativeSlots_Success
    smart_matching_test.go:856: ?曉 21 ?隞??畾?--- PASS: TestSmartMatchingService_GetAlternativeSlots (0.14s)
    --- PASS: TestSmartMatchingService_GetAlternativeSlots/GetAlternativeSlots_Success (0.14s)
=== RUN   TestSmartMatchingService_GetTeacherSessions
=== RUN   TestSmartMatchingService_GetTeacherSessions/GetTeacherSessions_Success
    smart_matching_test.go:939: ?葦隤脰”? 4 ?甈?=== RUN   TestSmartMatchingService_GetTeacherSessions/GetTeacherSessions_NoSessions
--- PASS: TestSmartMatchingService_GetTeacherSessions (0.43s)
    --- PASS: TestSmartMatchingService_GetTeacherSessions/GetTeacherSessions_Success (0.28s)
    --- PASS: TestSmartMatchingService_GetTeacherSessions/GetTeacherSessions_NoSessions (0.15s)
=== RUN   TestTeacherMergeService_MergeTeacher
    teacher_merge_test.go:117: 靘??葦 ID: 17
    teacher_merge_test.go:118: ?格??葦 ID: 18
    teacher_merge_test.go:119: 撱箇?皜祈岫?玨閬?: ID=6, 7, 8
2026-02-07T15:07:35.463+0800	[34mINFO[0m	???蔥?葦鞈?	{"component": "TeacherMergeService", "source_teacher_id": 17, "target_teacher_id": 18, "center_id": 14}
2026-02-07T15:07:35.465+0800	[34mINFO[0m	?葦鞈?撽???	{"component": "TeacherMergeService", "source_name": "靘??葦 - 1770448055326437800", "target_name": "?格??葦 - 1770448055368289700"}
2026-02-07T15:07:35.466+0800	[34mINFO[0m	撌脤蝘餅?隤脰???{"component": "TeacherMergeService", "count": 3, "source_teacher_id": 17, "target_teacher_id": 18}
2026-02-07T15:07:35.467+0800	[31mERROR[0m	?瑞宏靘?閮?嚗?憪?撣恬?憭望?	{"component": "TeacherMergeService", "error": "Error 1054 (42S22): Unknown column 'schedule_rules.teacher_id' in 'where clause'"}
timeLedger/app/services.(*ServiceLogger).Error
	D:/project/TimeLedger/app/services/base.go:319
timeLedger/app/services.(*TeacherMergeService).migrateScheduleExceptions
	D:/project/TimeLedger/app/services/teacher_merge_service.go:187
timeLedger/app/services.(*TeacherMergeService).MergeTeacher.func1
	D:/project/TimeLedger/app/services/teacher_merge_service.go:80
gorm.io/gorm.(*DB).Transaction
	D:/project/TimeLedger/vendor/gorm.io/gorm/finisher_api.go:654
timeLedger/app/services.(*TeacherMergeService).MergeTeacher
	D:/project/TimeLedger/app/services/teacher_merge_service.go:73
timeLedger/testing/test.TestTeacherMergeService_MergeTeacher
	D:/project/TimeLedger/testing/test/teacher_merge_test.go:132
testing.tRunner
	C:/Program Files/Go/src/testing/testing.go:1934
    teacher_merge_test.go:133: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:133
        	Error:      	Received unexpected error:
        	            	?瑞宏靘?閮?憭望?: Error 1054 (42S22): Unknown column 'schedule_rules.teacher_id' in 'where clause'
        	Test:       	TestTeacherMergeService_MergeTeacher
        	Messages:   	?蔥銝?憭望?
    teacher_merge_test.go:134: ?蔥?瑁???
=== RUN   TestTeacherMergeService_MergeTeacher/撽??玨閬?撌脤蝘餉?格??葦
    teacher_merge_test.go:154: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:154
        	Error:      	Not equal: 
        	            	expected: 3
        	            	actual  : 0
        	Test:       	TestTeacherMergeService_MergeTeacher/撽??玨閬?撌脤蝘餉?格??葦
        	Messages:   	?蔥敺璅?撣急?隤脰????甇?Ⅱ
    teacher_merge_test.go:155: ?蔥敺璅?撣急?隤脰???? 0 (?? 0 + ?啣? 3)
    teacher_merge_test.go:162: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:162
        	Error:      	Not equal: 
        	            	expected: 0
        	            	actual  : 3
        	Test:       	TestTeacherMergeService_MergeTeacher/撽??玨閬?撌脤蝘餉?格??葦
        	Messages:   	?蔥敺?皞?撣急???0 蝑?隤脰???    teacher_merge_test.go:163: ?蔥敺?皞?撣急?隤脰???? 3
    teacher_merge_test.go:171: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:171
        	Error:      	Not equal: 
        	            	expected: 0x12
        	            	actual  : 0x11
        	Test:       	TestTeacherMergeService_MergeTeacher/撽??玨閬?撌脤蝘餉?格??葦
        	Messages:   	?玨閬? 1 ??TeacherID ???渡?格??葦 ID
    teacher_merge_test.go:172: ?玨閬? 1 (ID=6) teacher_id 撌脫迤蝣箄??渡 17 ??    teacher_merge_test.go:171: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:171
        	Error:      	Not equal: 
        	            	expected: 0x12
        	            	actual  : 0x11
        	Test:       	TestTeacherMergeService_MergeTeacher/撽??玨閬?撌脤蝘餉?格??葦
        	Messages:   	?玨閬? 2 ??TeacherID ???渡?格??葦 ID
    teacher_merge_test.go:172: ?玨閬? 2 (ID=7) teacher_id 撌脫迤蝣箄??渡 17 ??    teacher_merge_test.go:171: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:171
        	Error:      	Not equal: 
        	            	expected: 0x12
        	            	actual  : 0x11
        	Test:       	TestTeacherMergeService_MergeTeacher/撽??玨閬?撌脤蝘餉?格??葦
        	Messages:   	?玨閬? 3 ??TeacherID ???渡?格??葦 ID
    teacher_merge_test.go:172: ?玨閬? 3 (ID=8) teacher_id 撌脫迤蝣箄??渡 17 ??=== RUN   TestTeacherMergeService_MergeTeacher/撽?靘??葦撌脰??芷
    teacher_merge_test.go:180: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:180
        	Error:      	An error is expected but got nil.
        	Test:       	TestTeacherMergeService_MergeTeacher/撽?靘??葦撌脰??芷
        	Messages:   	靘??葦?府?曆??堆?撌脰◤頠?歹?
    teacher_merge_test.go:181: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:181
        	Error:      	Expected error with "record not found" in chain but got nil.
        	Test:       	TestTeacherMergeService_MergeTeacher/撽?靘??葦撌脰??芷
        	Messages:   	?府??RecordNotFound ?航炊
    teacher_merge_test.go:188: 靘??葦撌脰??芷嚗?斗??? {0001-01-01 00:00:00 +0000 UTC false}
=== RUN   TestTeacherMergeService_MergeTeacher/皜?皜祈岫鞈?
    teacher_merge_test.go:200: 皜祈岫鞈?撌脫???--- FAIL: TestTeacherMergeService_MergeTeacher (0.35s)
    --- FAIL: TestTeacherMergeService_MergeTeacher/撽??玨閬?撌脤蝘餉?格??葦 (0.00s)
    --- FAIL: TestTeacherMergeService_MergeTeacher/撽?靘??葦撌脰??芷 (0.00s)
    --- PASS: TestTeacherMergeService_MergeTeacher/皜?皜祈岫鞈? (0.02s)
=== RUN   TestTeacherMergeService_ValidationErrors
=== RUN   TestTeacherMergeService_ValidationErrors/靘??璅?撣怎???仃??    teacher_merge_test.go:353: ???航炊: 靘??葦 ID ?璅?撣?ID ?詨?嚗瘜?雿?=== RUN   TestTeacherMergeService_ValidationErrors/靘??葦_ID_?粹??憭望?
    teacher_merge_test.go:360: ???航炊: ?葦 ID 銝?粹
=== RUN   TestTeacherMergeService_ValidationErrors/?格??葦_ID_?粹??憭望?
    teacher_merge_test.go:367: ???航炊: ?葦 ID 銝?粹
--- PASS: TestTeacherMergeService_ValidationErrors (0.00s)
    --- PASS: TestTeacherMergeService_ValidationErrors/靘??璅?撣怎???仃??(0.00s)
    --- PASS: TestTeacherMergeService_ValidationErrors/靘??葦_ID_?粹??憭望? (0.00s)
    --- PASS: TestTeacherMergeService_ValidationErrors/?格??葦_ID_?粹??憭望? (0.00s)
=== RUN   TestTeacherMergeService_NonExistentTeachers
    teacher_merge_test.go:394: 頝喲?皜祈岫 - ?∪?冽?撣怨??? record not found
--- SKIP: TestTeacherMergeService_NonExistentTeachers (0.00s)
=== RUN   TestTeacherMergeService_MultipleScheduleRules
    teacher_merge_test.go:477: 撱箇??玨閬? 1: ID=9, Time=09:00-10:00
    teacher_merge_test.go:477: 撱箇??玨閬? 2: ID=10, Time=10:00-11:00
    teacher_merge_test.go:477: 撱箇??玨閬? 3: ID=11, Time=11:00-12:00
    teacher_merge_test.go:477: 撱箇??玨閬? 4: ID=12, Time=12:00-13:00
    teacher_merge_test.go:477: 撱箇??玨閬? 5: ID=13, Time=13:00-14:00
2026-02-07T15:07:35.855+0800	[34mINFO[0m	???蔥?葦鞈?	{"component": "TeacherMergeService", "source_teacher_id": 19, "target_teacher_id": 20, "center_id": 15}
2026-02-07T15:07:35.858+0800	[34mINFO[0m	?葦鞈?撽???	{"component": "TeacherMergeService", "source_name": "靘??葦 - 1770448055675917800", "target_name": "?格??葦 - 1770448055710892000"}
2026-02-07T15:07:35.860+0800	[34mINFO[0m	撌脤蝘餅?隤脰???{"component": "TeacherMergeService", "count": 5, "source_teacher_id": 19, "target_teacher_id": 20}
2026-02-07T15:07:35.860+0800	[31mERROR[0m	?瑞宏靘?閮?嚗?憪?撣恬?憭望?	{"component": "TeacherMergeService", "error": "Error 1054 (42S22): Unknown column 'schedule_rules.teacher_id' in 'where clause'"}
timeLedger/app/services.(*ServiceLogger).Error
	D:/project/TimeLedger/app/services/base.go:319
timeLedger/app/services.(*TeacherMergeService).migrateScheduleExceptions
	D:/project/TimeLedger/app/services/teacher_merge_service.go:187
timeLedger/app/services.(*TeacherMergeService).MergeTeacher.func1
	D:/project/TimeLedger/app/services/teacher_merge_service.go:80
gorm.io/gorm.(*DB).Transaction
	D:/project/TimeLedger/vendor/gorm.io/gorm/finisher_api.go:654
timeLedger/app/services.(*TeacherMergeService).MergeTeacher
	D:/project/TimeLedger/app/services/teacher_merge_service.go:73
timeLedger/testing/test.TestTeacherMergeService_MultipleScheduleRules
	D:/project/TimeLedger/testing/test/teacher_merge_test.go:484
testing.tRunner
	C:/Program Files/Go/src/testing/testing.go:1934
    teacher_merge_test.go:485: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:485
        	Error:      	Received unexpected error:
        	            	?瑞宏靘?閮?憭望?: Error 1054 (42S22): Unknown column 'schedule_rules.teacher_id' in 'where clause'
        	Test:       	TestTeacherMergeService_MultipleScheduleRules
        	Messages:   	?蔥銝?憭望?
=== RUN   TestTeacherMergeService_MultipleScheduleRules/撽????隤脰??撌脤蝘?    teacher_merge_test.go:499: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:499
        	Error:      	Not equal: 
        	            	expected: 0x14
        	            	actual  : 0x13
        	Test:       	TestTeacherMergeService_MultipleScheduleRules/撽????隤脰??撌脤蝘?        	Messages:   	?玨閬? 1 TeacherID ??格??葦 ID
    teacher_merge_test.go:500: ?玨閬? 1 (ID=9) teacher_id=19 ??    teacher_merge_test.go:499: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:499
        	Error:      	Not equal: 
        	            	expected: 0x14
        	            	actual  : 0x13
        	Test:       	TestTeacherMergeService_MultipleScheduleRules/撽????隤脰??撌脤蝘?        	Messages:   	?玨閬? 2 TeacherID ??格??葦 ID
    teacher_merge_test.go:500: ?玨閬? 2 (ID=10) teacher_id=19 ??    teacher_merge_test.go:499: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:499
        	Error:      	Not equal: 
        	            	expected: 0x14
        	            	actual  : 0x13
        	Test:       	TestTeacherMergeService_MultipleScheduleRules/撽????隤脰??撌脤蝘?        	Messages:   	?玨閬? 3 TeacherID ??格??葦 ID
    teacher_merge_test.go:500: ?玨閬? 3 (ID=11) teacher_id=19 ??    teacher_merge_test.go:499: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:499
        	Error:      	Not equal: 
        	            	expected: 0x14
        	            	actual  : 0x13
        	Test:       	TestTeacherMergeService_MultipleScheduleRules/撽????隤脰??撌脤蝘?        	Messages:   	?玨閬? 4 TeacherID ??格??葦 ID
    teacher_merge_test.go:500: ?玨閬? 4 (ID=12) teacher_id=19 ??    teacher_merge_test.go:499: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:499
        	Error:      	Not equal: 
        	            	expected: 0x14
        	            	actual  : 0x13
        	Test:       	TestTeacherMergeService_MultipleScheduleRules/撽????隤脰??撌脤蝘?        	Messages:   	?玨閬? 5 TeacherID ??格??葦 ID
    teacher_merge_test.go:500: ?玨閬? 5 (ID=13) teacher_id=19 ??=== RUN   TestTeacherMergeService_MultipleScheduleRules/撽?靘??葦瘝?隞颱??玨閬?
    teacher_merge_test.go:510: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:510
        	Error:      	Not equal: 
        	            	expected: 0
        	            	actual  : 5
        	Test:       	TestTeacherMergeService_MultipleScheduleRules/撽?靘??葦瘝?隞颱??玨閬?
        	Messages:   	靘??葦????隤脰???    teacher_merge_test.go:511: 靘??葦?玨閬??賊?: 5 ??=== RUN   TestTeacherMergeService_MultipleScheduleRules/皜?皜祈岫鞈?
    teacher_merge_test.go:521: 皜祈岫鞈?撌脫???--- FAIL: TestTeacherMergeService_MultipleScheduleRules (0.47s)
    --- FAIL: TestTeacherMergeService_MultipleScheduleRules/撽????隤脰??撌脤蝘?(0.00s)
    --- FAIL: TestTeacherMergeService_MultipleScheduleRules/撽?靘??葦瘝?隞颱??玨閬? (0.00s)
    --- PASS: TestTeacherMergeService_MultipleScheduleRules/皜?皜祈岫鞈? (0.04s)
=== RUN   TestTeacherMergeService_MigratePersonalEvents
    teacher_merge_test.go:587: 撱箇?靘??葦蝘犖銵?: 1, 2
2026-02-07T15:07:36.252+0800	[34mINFO[0m	???蔥?葦鞈?	{"component": "TeacherMergeService", "source_teacher_id": 21, "target_teacher_id": 22, "center_id": 16}
2026-02-07T15:07:36.254+0800	[34mINFO[0m	?葦鞈?撽???	{"component": "TeacherMergeService", "source_name": "靘??葦 - 1770448056147393000", "target_name": "?格??葦 - 1770448056181173900"}
2026-02-07T15:07:36.256+0800	[31mERROR[0m	?瑞宏靘?閮?嚗?憪?撣恬?憭望?	{"component": "TeacherMergeService", "error": "Error 1054 (42S22): Unknown column 'schedule_rules.teacher_id' in 'where clause'"}
timeLedger/app/services.(*ServiceLogger).Error
	D:/project/TimeLedger/app/services/base.go:319
timeLedger/app/services.(*TeacherMergeService).migrateScheduleExceptions
	D:/project/TimeLedger/app/services/teacher_merge_service.go:187
timeLedger/app/services.(*TeacherMergeService).MergeTeacher.func1
	D:/project/TimeLedger/app/services/teacher_merge_service.go:80
gorm.io/gorm.(*DB).Transaction
	D:/project/TimeLedger/vendor/gorm.io/gorm/finisher_api.go:654
timeLedger/app/services.(*TeacherMergeService).MergeTeacher
	D:/project/TimeLedger/app/services/teacher_merge_service.go:73
timeLedger/testing/test.TestTeacherMergeService_MigratePersonalEvents
	D:/project/TimeLedger/testing/test/teacher_merge_test.go:593
testing.tRunner
	C:/Program Files/Go/src/testing/testing.go:1934
    teacher_merge_test.go:594: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:594
        	Error:      	Received unexpected error:
        	            	?瑞宏靘?閮?憭望?: Error 1054 (42S22): Unknown column 'schedule_rules.teacher_id' in 'where clause'
        	Test:       	TestTeacherMergeService_MigratePersonalEvents
        	Messages:   	?蔥銝?憭望?
=== RUN   TestTeacherMergeService_MigratePersonalEvents/撽?蝘犖銵?撌脤蝘餉?格??葦
    teacher_merge_test.go:604: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:604
        	Error:      	Not equal: 
        	            	expected: 2
        	            	actual  : 0
        	Test:       	TestTeacherMergeService_MigratePersonalEvents/撽?蝘犖銵?撌脤蝘餉?格??葦
        	Messages:   	?格??葦?? 2 蝑?鈭箄?蝔?    teacher_merge_test.go:605: ?格??葦蝘犖銵??賊?: 0
    teacher_merge_test.go:612: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:612
        	Error:      	Should be true
        	Test:       	TestTeacherMergeService_MigratePersonalEvents/撽?蝘犖銵?撌脤蝘餉?格??葦
        	Messages:   	???恍??閮箄?蝔?    teacher_merge_test.go:613: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:613
        	Error:      	Should be true
        	Test:       	TestTeacherMergeService_MigratePersonalEvents/撽?蝘犖銵?撌脤蝘餉?格??葦
        	Messages:   	???怠振??擗?蝔?=== RUN   TestTeacherMergeService_MigratePersonalEvents/撽?靘??葦瘝?蝘犖銵?
    teacher_merge_test.go:622: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:622
        	Error:      	Not equal: 
        	            	expected: 0
        	            	actual  : 2
        	Test:       	TestTeacherMergeService_MigratePersonalEvents/撽?靘??葦瘝?蝘犖銵?
        	Messages:   	靘??葦????鈭箄?蝔?=== RUN   TestTeacherMergeService_MigratePersonalEvents/皜?皜祈岫鞈?
    teacher_merge_test.go:632: 皜祈岫鞈?撌脫???--- FAIL: TestTeacherMergeService_MigratePersonalEvents (0.29s)
    --- FAIL: TestTeacherMergeService_MigratePersonalEvents/撽?蝘犖銵?撌脤蝘餉?格??葦 (0.00s)
    --- FAIL: TestTeacherMergeService_MigratePersonalEvents/撽?靘??葦瘝?蝘犖銵? (0.00s)
    --- PASS: TestTeacherMergeService_MigratePersonalEvents/皜?皜祈岫鞈? (0.02s)
=== RUN   TestTeacherMergeService_MigrateTeacherSkills
    teacher_merge_test.go:688: 撱箇?靘??葦??? ??(??), ?格??(銝剔?)
2026-02-07T15:07:36.551+0800	[34mINFO[0m	???蔥?葦鞈?	{"component": "TeacherMergeService", "source_teacher_id": 23, "target_teacher_id": 24, "center_id": 17}
2026-02-07T15:07:36.554+0800	[34mINFO[0m	?葦鞈?撽???	{"component": "TeacherMergeService", "source_name": "靘??葦 - 1770448056437002900", "target_name": "?格??葦 - 1770448056475221600"}
2026-02-07T15:07:36.556+0800	[31mERROR[0m	?瑞宏靘?閮?嚗?憪?撣恬?憭望?	{"component": "TeacherMergeService", "error": "Error 1054 (42S22): Unknown column 'schedule_rules.teacher_id' in 'where clause'"}
timeLedger/app/services.(*ServiceLogger).Error
	D:/project/TimeLedger/app/services/base.go:319
timeLedger/app/services.(*TeacherMergeService).migrateScheduleExceptions
	D:/project/TimeLedger/app/services/teacher_merge_service.go:187
timeLedger/app/services.(*TeacherMergeService).MergeTeacher.func1
	D:/project/TimeLedger/app/services/teacher_merge_service.go:80
gorm.io/gorm.(*DB).Transaction
	D:/project/TimeLedger/vendor/gorm.io/gorm/finisher_api.go:654
timeLedger/app/services.(*TeacherMergeService).MergeTeacher
	D:/project/TimeLedger/app/services/teacher_merge_service.go:73
timeLedger/testing/test.TestTeacherMergeService_MigrateTeacherSkills
	D:/project/TimeLedger/testing/test/teacher_merge_test.go:694
testing.tRunner
	C:/Program Files/Go/src/testing/testing.go:1934
    teacher_merge_test.go:695: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:695
        	Error:      	Received unexpected error:
        	            	?瑞宏靘?閮?憭望?: Error 1054 (42S22): Unknown column 'schedule_rules.teacher_id' in 'where clause'
        	Test:       	TestTeacherMergeService_MigrateTeacherSkills
        	Messages:   	?蔥銝?憭望?
=== RUN   TestTeacherMergeService_MigrateTeacherSkills/撽???賢歇?瑞宏?喟璅?撣?    teacher_merge_test.go:705: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:705
        	Error:      	Not equal: 
        	            	expected: 2
        	            	actual  : 0
        	Test:       	TestTeacherMergeService_MigrateTeacherSkills/撽???賢歇?瑞宏?喟璅?撣?        	Messages:   	?格??葦?? 2 蝑???    teacher_merge_test.go:706: ?格??葦??賣?? 0
    teacher_merge_test.go:713: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:713
        	Error:      	Should be true
        	Test:       	TestTeacherMergeService_MigrateTeacherSkills/撽???賢歇?瑞宏?喟璅?撣?        	Messages:   	???怎?????    teacher_merge_test.go:714: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:714
        	Error:      	Should be true
        	Test:       	TestTeacherMergeService_MigrateTeacherSkills/撽???賢歇?瑞宏?喟璅?撣?        	Messages:   	???怎???舀???=== RUN   TestTeacherMergeService_MigrateTeacherSkills/撽?靘??葦瘝????    teacher_merge_test.go:723: 
        	Error Trace:	D:/project/TimeLedger/testing/test/teacher_merge_test.go:723
        	Error:      	Not equal: 
        	            	expected: 0
        	            	actual  : 2
        	Test:       	TestTeacherMergeService_MigrateTeacherSkills/撽?靘??葦瘝????        	Messages:   	靘??葦??????=== RUN   TestTeacherMergeService_MigrateTeacherSkills/皜?皜祈岫鞈?
    teacher_merge_test.go:735: 皜祈岫鞈?撌脫???--- FAIL: TestTeacherMergeService_MigrateTeacherSkills (0.31s)
    --- FAIL: TestTeacherMergeService_MigrateTeacherSkills/撽???賢歇?瑞宏?喟璅?撣?(0.00s)
    --- FAIL: TestTeacherMergeService_MigrateTeacherSkills/撽?靘??葦瘝????(0.00s)
    --- PASS: TestTeacherMergeService_MigrateTeacherSkills/皜?皜祈岫鞈? (0.02s)
=== RUN   TestTeacherController_SessionNote
    teacher_session_note_test.go:6: Skipping - requires .env file
--- SKIP: TestTeacherController_SessionNote (0.00s)
=== RUN   TestTeacherRepository_CRUD
    teacher_test.go:6: Skipping - requires .env file
--- SKIP: TestTeacherRepository_CRUD (0.00s)
=== RUN   TestUserService_CreateAndGet
    user_test.go:6: Skipping - requires .env file
--- SKIP: TestUserService_CreateAndGet (0.00s)
FAIL
FAIL	timeLedger/testing/test	183.399s
FAIL
